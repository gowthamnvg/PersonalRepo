"use strict";(self.webpackChunkApp=self.webpackChunkApp||[]).push([[179],{2011:(Je,ve,M)=>{M.d(ve,{Dh:()=>_e,cc:()=>le,hO:()=>Me,on:()=>U,xv:()=>ue});var v=M(8256),K=M(127),B=M(5813);Je=M.hmd(Je);class oe{constructor(ze){return ze}}const _e=new v.OlP("angularfire2.app.options"),ue=new v.OlP("angularfire2.app.name");function U(Ee,ze,Ie){const Ce="object"==typeof Ie&&Ie||{};Ce.name=Ce.name||"string"==typeof Ie&&Ie||"[DEFAULT]";const Oe=K.Z.apps.filter(de=>de&&de.name===Ce.name)[0]||ze.runOutsideAngular(()=>K.Z.initializeApp(Ee,Ce));try{JSON.stringify(Ee)!==JSON.stringify(Oe.options)&&F("error",`${Oe.name} Firebase App already initialized with different options${Je.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new oe(Oe)}const F=(Ee,...ze)=>{(0,v.X6Q)()&&typeof console<"u"&&console[Ee](...ze)},ie={provide:oe,useFactory:U,deps:[_e,v.R0b,[new v.FiY,ue]]};let Me=(()=>{class Ee{constructor(Ie){K.Z.registerVersion("angularfire",B.q4.full,"core"),K.Z.registerVersion("angularfire",B.q4.full,"app-compat"),K.Z.registerVersion("angular",v.q4F.full,Ie.toString())}static initializeApp(Ie,Ae){return{ngModule:Ee,providers:[{provide:_e,useValue:Ie},{provide:ue,useValue:Ae}]}}}return Ee.\u0275fac=function(Ie){return new(Ie||Ee)(v.LFG(v.Lbi))},Ee.\u0275mod=v.oAB({type:Ee}),Ee.\u0275inj=v.cJS({providers:[ie]}),Ee})();function le(Ee,ze,Ie,Ae,Ce){const[,X,Oe]=globalThis.\u0275AngularfireInstanceCache.find(de=>de[0]===Ee)||[];if(X)return function $e(Ee,ze){try{return Ee.toString()===ze.toString()}catch{return Ee===ze}}(Ce,Oe)||(ke("error",`${ze} was already initialized on the ${Ie} Firebase App with different settings.${Ne?" You may need to reload as Firebase is not HMR aware.":""}`),ke("warn",{is:Ce,was:Oe})),X;{const de=Ae();return globalThis.\u0275AngularfireInstanceCache.push([Ee,de,Ce]),de}}const Ne=!!Je.hot,ke=(Ee,...ze)=>{(0,v.X6Q)()&&typeof console<"u"&&console[Ee](...ze)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Je,ve,M)=>{M.d(ve,{q4:()=>xa,iC:()=>pr,fc:()=>tf,HU:()=>Ma,vb:()=>Cc,JM:()=>Wu,u3:()=>Ts});var v=M(8256),K=M(5867),B=M(5861),re=M(9681),Z=M(2090),we=M(4859),oe=M(1877),_e=M(8766);const ue="@firebase/installations",U="0.5.16",ie=`w:${U}`,Me="FIS_v2",ze=new Z.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ie(w){return w instanceof Z.ZR&&w.code.includes("request-failed")}function Ae({projectId:w}){return`https://firebaseinstallations.googleapis.com/v1/projects/${w}/installations`}function Ce(w){return{token:w.token,requestStatus:2,expiresIn:W(w.expiresIn),creationTime:Date.now()}}function X(w,E){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,B.Z)(function*(w,E){const R=(yield E.json()).error;return ze.create("request-failed",{requestName:w,serverCode:R.code,serverMessage:R.message,serverStatus:R.status})})).apply(this,arguments)}function de({apiKey:w}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":w})}function q(w,{refreshToken:E}){const b=de(w);return b.append("Authorization",function J(w){return`${Me} ${w}`}(E)),b}function pe(w){return j.apply(this,arguments)}function j(){return(j=(0,B.Z)(function*(w){const E=yield w();return E.status>=500&&E.status<600?w():E})).apply(this,arguments)}function W(w){return Number(w.replace("s","000"))}function z(w,E){return De.apply(this,arguments)}function De(){return(De=(0,B.Z)(function*({appConfig:w,heartbeatServiceProvider:E},{fid:b}){const R=Ae(w),V=de(w),H=E.getImmediate({optional:!0});if(H){const dt=yield H.getHeartbeatsHeader();dt&&V.append("x-firebase-client",dt)}const xe={method:"POST",headers:V,body:JSON.stringify({fid:b,authVersion:Me,appId:w.appId,sdkVersion:ie})},it=yield pe(()=>fetch(R,xe));if(it.ok){const dt=yield it.json();return{fid:dt.fid||b,registrationStatus:2,refreshToken:dt.refreshToken,authToken:Ce(dt.authToken)}}throw yield X("Create Installation",it)})).apply(this,arguments)}function Se(w){return new Promise(E=>{setTimeout(E,w)})}const Dt=/^[cdef][\w-]{21}$/;function vt(){try{const w=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(w),w[0]=112+w[0]%16;const b=function nn(w){return function rt(w){return btoa(String.fromCharCode(...w)).replace(/\+/g,"-").replace(/\//g,"_")}(w).substr(0,22)}(w);return Dt.test(b)?b:""}catch{return""}}function dn(w){return`${w.appName}!${w.appId}`}const $t=new Map;function sr(w,E){const b=dn(w);wn(b,E),function Ot(w,E){const b=function si(){return!ms&&"BroadcastChannel"in self&&(ms=new BroadcastChannel("[Firebase] FID Change"),ms.onmessage=w=>{wn(w.data.key,w.data.fid)}),ms}();b&&b.postMessage({key:w,fid:E}),function pa(){0===$t.size&&ms&&(ms.close(),ms=null)}()}(b,E)}function wn(w,E){const b=$t.get(w);if(b)for(const R of b)R(E)}let ms=null;const Ir="firebase-installations-store";let Ci=null;function yo(){return Ci||(Ci=(0,_e.X3)("firebase-installations-database",1,{upgrade:(w,E)=>{0===E&&w.createObjectStore(Ir)}})),Ci}function un(w,E){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,B.Z)(function*(w,E){const b=dn(w),V=(yield yo()).transaction(Ir,"readwrite"),H=V.objectStore(Ir),ce=yield H.get(b);return yield H.put(E,b),yield V.done,(!ce||ce.fid!==E.fid)&&sr(w,E.fid),E})).apply(this,arguments)}function vo(w){return _s.apply(this,arguments)}function _s(){return(_s=(0,B.Z)(function*(w){const E=dn(w),R=(yield yo()).transaction(Ir,"readwrite");yield R.objectStore(Ir).delete(E),yield R.done})).apply(this,arguments)}function oi(w,E){return ys.apply(this,arguments)}function ys(){return(ys=(0,B.Z)(function*(w,E){const b=dn(w),V=(yield yo()).transaction(Ir,"readwrite"),H=V.objectStore(Ir),ce=yield H.get(b),xe=E(ce);return void 0===xe?yield H.delete(b):yield H.put(xe,b),yield V.done,xe&&(!ce||ce.fid!==xe.fid)&&sr(w,xe.fid),xe})).apply(this,arguments)}function Zn(w){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,B.Z)(function*(w){let E;const b=yield oi(w.appConfig,R=>{const V=Be(R),H=et(w,V);return E=H.registrationPromise,H.installationEntry});return""===b.fid?{installationEntry:yield E}:{installationEntry:b,registrationPromise:E}})).apply(this,arguments)}function Be(w){return Zt(w||{fid:vt(),registrationStatus:0})}function et(w,E){if(0===E.registrationStatus){if(!navigator.onLine)return{installationEntry:E,registrationPromise:Promise.reject(ze.create("app-offline"))};const b={fid:E.fid,registrationStatus:1,registrationTime:Date.now()},R=function lt(w,E){return gn.apply(this,arguments)}(w,b);return{installationEntry:b,registrationPromise:R}}return 1===E.registrationStatus?{installationEntry:E,registrationPromise:bi(w)}:{installationEntry:E}}function gn(){return(gn=(0,B.Z)(function*(w,E){try{const b=yield z(w,E);return un(w.appConfig,b)}catch(b){throw Ie(b)&&409===b.customData.serverCode?yield vo(w.appConfig):yield un(w.appConfig,{fid:E.fid,registrationStatus:0}),b}})).apply(this,arguments)}function bi(w){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,B.Z)(function*(w){let E=yield ar(w.appConfig);for(;1===E.registrationStatus;)yield Se(100),E=yield ar(w.appConfig);if(0===E.registrationStatus){const{installationEntry:b,registrationPromise:R}=yield Zn(w);return R||b}return E})).apply(this,arguments)}function ar(w){return oi(w,E=>{if(!E)throw ze.create("installation-not-found");return Zt(E)})}function Zt(w){return function Yl(w){return 1===w.registrationStatus&&w.registrationTime+1e4<Date.now()}(w)?{fid:w.fid,registrationStatus:0}:w}function rn(w,E){return ur.apply(this,arguments)}function ur(){return(ur=(0,B.Z)(function*({appConfig:w,heartbeatServiceProvider:E},b){const R=at(w,b),V=q(w,b),H=E.getImmediate({optional:!0});if(H){const dt=yield H.getHeartbeatsHeader();dt&&V.append("x-firebase-client",dt)}const xe={method:"POST",headers:V,body:JSON.stringify({installation:{sdkVersion:ie,appId:w.appId}})},it=yield pe(()=>fetch(R,xe));if(it.ok)return Ce(yield it.json());throw yield X("Generate Auth Token",it)})).apply(this,arguments)}function at(w,{fid:E}){return`${Ae(w)}/${E}/authTokens:generate`}function Ls(w){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,B.Z)(function*(w,E=!1){let b;const R=yield oi(w.appConfig,H=>{if(!Bt(H))throw ze.create("not-registered");const ce=H.authToken;if(!E&&P(ce))return H;if(1===ce.requestStatus)return b=je(w,E),H;{if(!navigator.onLine)throw ze.create("app-offline");const xe=$(H);return b=pt(w,xe),xe}});return b?yield b:R.authToken})).apply(this,arguments)}function je(w,E){return ee.apply(this,arguments)}function ee(){return(ee=(0,B.Z)(function*(w,E){let b=yield Ge(w.appConfig);for(;1===b.authToken.requestStatus;)yield Se(100),b=yield Ge(w.appConfig);const R=b.authToken;return 0===R.requestStatus?Ls(w,E):R})).apply(this,arguments)}function Ge(w){return oi(w,E=>{if(!Bt(E))throw ze.create("not-registered");return function he(w){return 1===w.requestStatus&&w.requestTime+1e4<Date.now()}(E.authToken)?Object.assign(Object.assign({},E),{authToken:{requestStatus:0}}):E})}function pt(w,E){return mt.apply(this,arguments)}function mt(){return(mt=(0,B.Z)(function*(w,E){try{const b=yield rn(w,E),R=Object.assign(Object.assign({},E),{authToken:b});return yield un(w.appConfig,R),b}catch(b){if(!Ie(b)||401!==b.customData.serverCode&&404!==b.customData.serverCode){const R=Object.assign(Object.assign({},E),{authToken:{requestStatus:0}});yield un(w.appConfig,R)}else yield vo(w.appConfig);throw b}})).apply(this,arguments)}function Bt(w){return void 0!==w&&2===w.registrationStatus}function P(w){return 2===w.requestStatus&&!function N(w){const E=Date.now();return E<w.creationTime||w.creationTime+w.expiresIn<E+36e5}(w)}function $(w){const E={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},w),{authToken:E})}function We(){return(We=(0,B.Z)(function*(w){const E=w,{installationEntry:b,registrationPromise:R}=yield Zn(E);return R?R.catch(console.error):Ls(E).catch(console.error),b.fid})).apply(this,arguments)}function zt(){return(zt=(0,B.Z)(function*(w,E=!1){const b=w;return yield Vr(b),(yield Ls(b,E)).token})).apply(this,arguments)}function Vr(w){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,B.Z)(function*(w){const{registrationPromise:E}=yield Zn(w);E&&(yield E)})).apply(this,arguments)}function Le(w){return ze.create("missing-app-config-values",{valueName:w})}const _t="installations",lr=w=>{const E=w.getProvider("app").getImmediate(),b=function Tr(w){if(!w||!w.options)throw Le("App Configuration");if(!w.name)throw Le("App Name");const E=["projectId","apiKey","appId"];for(const b of E)if(!w.options[b])throw Le(b);return{appName:w.name,projectId:w.options.projectId,apiKey:w.options.apiKey,appId:w.options.appId}}(E);return{app:E,appConfig:b,heartbeatServiceProvider:(0,re._getProvider)(E,"heartbeat"),_delete:()=>Promise.resolve()}},Fs=w=>{const E=w.getProvider("app").getImmediate(),b=(0,re._getProvider)(E,_t).getImmediate();return{getId:()=>function Y(w){return We.apply(this,arguments)}(b),getToken:V=>function wt(w){return zt.apply(this,arguments)}(b,V)}};(function Un(){(0,re._registerComponent)(new we.wA(_t,lr,"PUBLIC")),(0,re._registerComponent)(new we.wA("installations-internal",Fs,"PRIVATE"))})(),(0,re.registerVersion)(ue,U),(0,re.registerVersion)(ue,U,"esm2017");const Wi="@firebase/remote-config",Xn=new Z.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Cr{constructor(E,b,R,V){this.client=E,this.storage=b,this.storageCache=R,this.logger=V}isCachedDataFresh(E,b){if(!b)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const R=Date.now()-b,V=R<=E;return this.logger.debug(`Config fetch cache check. Cache age millis: ${R}. Cache max age millis (minimumFetchIntervalMillis setting): ${E}. Is cache hit: ${V}.`),V}fetch(E){var b=this;return(0,B.Z)(function*(){const[R,V]=yield Promise.all([b.storage.getLastSuccessfulFetchTimestampMillis(),b.storage.getLastSuccessfulFetchResponse()]);if(V&&b.isCachedDataFresh(E.cacheMaxAgeMillis,R))return V;E.eTag=V&&V.eTag;const H=yield b.client.fetch(E),ce=[b.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===H.status&&ce.push(b.storage.setLastSuccessfulFetchResponse(H)),yield Promise.all(ce),H})()}}function ai(w=navigator){return w.languages&&w.languages[0]||w.language}class Ih{constructor(E,b,R,V,H,ce){this.firebaseInstallations=E,this.sdkVersion=b,this.namespace=R,this.projectId=V,this.apiKey=H,this.appId=ce}fetch(E){var b=this;return(0,B.Z)(function*(){var R,V,H;const[ce,xe]=yield Promise.all([b.firebaseInstallations.getId(),b.firebaseInstallations.getToken()]),dt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${b.projectId}/namespaces/${b.namespace}:fetch?key=${b.apiKey}`,It={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":E.eTag||"*"},st={sdk_version:b.sdkVersion,app_instance_id:ce,app_instance_id_token:xe,app_id:b.appId,language_code:ai()},er={method:"POST",headers:It,body:JSON.stringify(st)},gr=fetch(dt,er),Ri=new Promise((Mi,tr)=>{E.signal.addEventListener(()=>{const bc=new Error("The operation was aborted.");bc.name="AbortError",tr(bc)})});let gt;try{yield Promise.race([gr,Ri]),gt=yield gr}catch(Mi){let tr="fetch-client-network";throw"AbortError"===(null===(R=Mi)||void 0===R?void 0:R.name)&&(tr="fetch-timeout"),Xn.create(tr,{originalErrorMessage:null===(V=Mi)||void 0===V?void 0:V.message})}let xr=gt.status;const Cm=gt.headers.get("ETag")||void 0;let es,ts;if(200===gt.status){let Mi;try{Mi=yield gt.json()}catch(tr){throw Xn.create("fetch-client-parse",{originalErrorMessage:null===(H=tr)||void 0===H?void 0:H.message})}es=Mi.entries,ts=Mi.state}if("INSTANCE_STATE_UNSPECIFIED"===ts?xr=500:"NO_CHANGE"===ts?xr=304:("NO_TEMPLATE"===ts||"EMPTY_CONFIG"===ts)&&(es={}),304!==xr&&200!==xr)throw Xn.create("fetch-status",{httpStatus:xr});return{status:xr,eTag:Cm,config:es}})()}}class ui{constructor(E,b){this.client=E,this.storage=b}fetch(E){var b=this;return(0,B.Z)(function*(){const R=(yield b.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return b.attemptFetch(E,R)})()}attemptFetch(E,{throttleEndTimeMillis:b,backoffCount:R}){var V=this;return(0,B.Z)(function*(){yield function br(w,E){return new Promise((b,R)=>{const V=Math.max(E-Date.now(),0),H=setTimeout(b,V);w.addEventListener(()=>{clearTimeout(H),R(Xn.create("fetch-throttle",{throttleEndTimeMillis:E}))})})}(E.signal,b);try{const H=yield V.client.fetch(E);return yield V.storage.deleteThrottleMetadata(),H}catch(H){if(!function Tu(w){if(!(w instanceof Z.ZR&&w.customData))return!1;const E=Number(w.customData.httpStatus);return 429===E||500===E||503===E||504===E}(H))throw H;const ce={throttleEndTimeMillis:Date.now()+(0,Z.$s)(R),backoffCount:R+1};return yield V.storage.setThrottleMetadata(ce),V.attemptFetch(E,ce)}})()}}class tm{constructor(E,b,R,V,H){this.app=E,this._client=b,this._storageCache=R,this._storage=V,this._logger=H,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Cu(w,E){var b;const R=w.target.error||void 0;return Xn.create(E,{originalErrorMessage:R&&(null===(b=R)||void 0===b?void 0:b.message)})}const To="app_namespace_store";class Kw{constructor(E,b,R,V=function qw(){return new Promise((w,E)=>{var b;try{const R=indexedDB.open("firebase_remote_config",1);R.onerror=V=>{E(Cu(V,"storage-open"))},R.onsuccess=V=>{w(V.target.result)},R.onupgradeneeded=V=>{0===V.oldVersion&&V.target.result.createObjectStore(To,{keyPath:"compositeKey"})}}catch(R){E(Xn.create("storage-open",{originalErrorMessage:null===(b=R)||void 0===b?void 0:b.message}))}})}()){this.appId=E,this.appName=b,this.namespace=R,this.openDbPromise=V}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(E){return this.set("last_fetch_status",E)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(E){return this.set("last_successful_fetch_timestamp_millis",E)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(E){return this.set("last_successful_fetch_response",E)}getActiveConfig(){return this.get("active_config")}setActiveConfig(E){return this.set("active_config",E)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(E){return this.set("active_config_etag",E)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(E){return this.set("throttle_metadata",E)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(E){var b=this;return(0,B.Z)(function*(){const R=yield b.openDbPromise;return new Promise((V,H)=>{var ce;const it=R.transaction([To],"readonly").objectStore(To),dt=b.createCompositeKey(E);try{const It=it.get(dt);It.onerror=st=>{H(Cu(st,"storage-get"))},It.onsuccess=st=>{const er=st.target.result;V(er?er.value:void 0)}}catch(It){H(Xn.create("storage-get",{originalErrorMessage:null===(ce=It)||void 0===ce?void 0:ce.message}))}})})()}set(E,b){var R=this;return(0,B.Z)(function*(){const V=yield R.openDbPromise;return new Promise((H,ce)=>{var xe;const dt=V.transaction([To],"readwrite").objectStore(To),It=R.createCompositeKey(E);try{const st=dt.put({compositeKey:It,value:b});st.onerror=er=>{ce(Cu(er,"storage-set"))},st.onsuccess=()=>{H()}}catch(st){ce(Xn.create("storage-set",{originalErrorMessage:null===(xe=st)||void 0===xe?void 0:xe.message}))}})})()}delete(E){var b=this;return(0,B.Z)(function*(){const R=yield b.openDbPromise;return new Promise((V,H)=>{var ce;const it=R.transaction([To],"readwrite").objectStore(To),dt=b.createCompositeKey(E);try{const It=it.delete(dt);It.onerror=st=>{H(Cu(st,"storage-delete"))},It.onsuccess=()=>{V()}}catch(It){H(Xn.create("storage-delete",{originalErrorMessage:null===(ce=It)||void 0===ce?void 0:ce.message}))}})})()}createCompositeKey(E){return[this.appId,this.appName,this.namespace,E].join()}}class Yw{constructor(E){this.storage=E}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var E=this;return(0,B.Z)(function*(){const b=E.storage.getLastFetchStatus(),R=E.storage.getLastSuccessfulFetchTimestampMillis(),V=E.storage.getActiveConfig(),H=yield b;H&&(E.lastFetchStatus=H);const ce=yield R;ce&&(E.lastSuccessfulFetchTimestampMillis=ce);const xe=yield V;xe&&(E.activeConfig=xe)})()}setLastFetchStatus(E){return this.lastFetchStatus=E,this.storage.setLastFetchStatus(E)}setLastSuccessfulFetchTimestampMillis(E){return this.lastSuccessfulFetchTimestampMillis=E,this.storage.setLastSuccessfulFetchTimestampMillis(E)}setActiveConfig(E){return this.activeConfig=E,this.storage.setActiveConfig(E)}}function Zw(){return Th.apply(this,arguments)}function Th(){return(Th=(0,B.Z)(function*(){if(!(0,Z.hl)())return!1;try{return yield(0,Z.eu)()}catch{return!1}})).apply(this,arguments)}!function Qw(){(0,re._registerComponent)(new we.wA("remote-config",function w(E,{instanceIdentifier:b}){const R=E.getProvider("app").getImmediate(),V=E.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Xn.create("registration-window");if(!(0,Z.hl)())throw Xn.create("indexed-db-unavailable");const{projectId:H,apiKey:ce,appId:xe}=R.options;if(!H)throw Xn.create("registration-project-id");if(!ce)throw Xn.create("registration-api-key");if(!xe)throw Xn.create("registration-app-id");const it=new Kw(xe,R.name,b=b||"firebase"),dt=new Yw(it),It=new oe.Yd(Wi);It.logLevel=oe.in.ERROR;const st=new Ih(V,re.SDK_VERSION,b,H,ce,xe),er=new ui(st,it),gr=new Cr(er,it,dt,It),Ri=new tm(R,gr,dt,it,It);return function Yt(w){const E=(0,Z.m9)(w);E._initializePromise||(E._initializePromise=E._storageCache.loadFromStorage().then(()=>{E._isInitializationComplete=!0}))}(Ri),Ri},"PUBLIC").setMultipleInstances(!0)),(0,re.registerVersion)(Wi,"0.3.15"),(0,re.registerVersion)(Wi,"0.3.15","esm2017")}();const nm="/firebase-messaging-sw.js",Xw="/firebase-cloud-messaging-push-scope",rm="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Co="google.c.a.c_id",bh="google.c.a.c_l",Jw="google.c.a.ts",Rb="google.c.a.e";var js=(()=>{return(w=js||(js={})).PUSH_RECEIVED="push-received",w.NOTIFICATION_CLICKED="notification-clicked",js;var w})();function li(w){const E=new Uint8Array(w);return btoa(String.fromCharCode(...E)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Dh(w){const b=(w+"=".repeat((4-w.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),R=atob(b),V=new Uint8Array(R.length);for(let H=0;H<R.length;++H)V[H]=R.charCodeAt(H);return V}const Xl="fcm_token_details_db",Sh="fcm_token_object_Store";function im(w){return Ah.apply(this,arguments)}function Ah(){return Ah=(0,B.Z)(function*(w){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(H=>H.name).includes(Xl))return null;let E=null;return(yield(0,_e.X3)(Xl,5,{upgrade:(R=(0,B.Z)(function*(V,H,ce,xe){var it;if(H<2||!V.objectStoreNames.contains(Sh))return;const dt=xe.objectStore(Sh),It=yield dt.index("fcmSenderId").get(w);if(yield dt.clear(),It)if(2===H){const st=It;if(!st.auth||!st.p256dh||!st.endpoint)return;E={token:st.fcmToken,createTime:null!==(it=st.createTime)&&void 0!==it?it:Date.now(),subscriptionOptions:{auth:st.auth,p256dh:st.p256dh,endpoint:st.endpoint,swScope:st.swScope,vapidKey:"string"==typeof st.vapidKey?st.vapidKey:li(st.vapidKey)}}}else if(3===H){const st=It;E={token:st.fcmToken,createTime:st.createTime,subscriptionOptions:{auth:li(st.auth),p256dh:li(st.p256dh),endpoint:st.endpoint,swScope:st.swScope,vapidKey:li(st.vapidKey)}}}else if(4===H){const st=It;E={token:st.fcmToken,createTime:st.createTime,subscriptionOptions:{auth:li(st.auth),p256dh:li(st.p256dh),endpoint:st.endpoint,swScope:st.swScope,vapidKey:li(st.vapidKey)}}}}),function(H,ce,xe,it){return R.apply(this,arguments)})})).close(),yield(0,_e.Lj)(Xl),yield(0,_e.Lj)("fcm_vapid_details_db"),yield(0,_e.Lj)("undefined"),xh(E)?E:null;var R}),Ah.apply(this,arguments)}function xh(w){if(!w||!w.subscriptionOptions)return!1;const{subscriptionOptions:E}=w;return"number"==typeof w.createTime&&w.createTime>0&&"string"==typeof w.token&&w.token.length>0&&"string"==typeof E.auth&&E.auth.length>0&&"string"==typeof E.p256dh&&E.p256dh.length>0&&"string"==typeof E.endpoint&&E.endpoint.length>0&&"string"==typeof E.swScope&&E.swScope.length>0&&"string"==typeof E.vapidKey&&E.vapidKey.length>0}const Si="firebase-messaging-store";let Jl=null;function bu(){return Jl||(Jl=(0,_e.X3)("firebase-messaging-database",1,{upgrade:(w,E)=>{0===E&&w.createObjectStore(Si)}})),Jl}function Rh(w){return om.apply(this,arguments)}function om(){return(om=(0,B.Z)(function*(w){const E=Dr(w),R=yield(yield bu()).transaction(Si).objectStore(Si).get(E);if(R)return R;{const V=yield im(w.appConfig.senderId);if(V)return yield Nt(w,V),V}})).apply(this,arguments)}function Nt(w,E){return Mh.apply(this,arguments)}function Mh(){return(Mh=(0,B.Z)(function*(w,E){const b=Dr(w),V=(yield bu()).transaction(Si,"readwrite");return yield V.objectStore(Si).put(E,b),yield V.done,E})).apply(this,arguments)}function Nh(w){return ma.apply(this,arguments)}function ma(){return(ma=(0,B.Z)(function*(w){const E=Dr(w),R=(yield bu()).transaction(Si,"readwrite");yield R.objectStore(Si).delete(E),yield R.done})).apply(this,arguments)}function Dr({appConfig:w}){return w.appId}const xn=new Z.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function _a(w,E){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,B.Z)(function*(w,E){var b;const R=yield ya(w),V=Ph(E),H={method:"POST",headers:R,body:JSON.stringify(V)};let ce;try{ce=yield(yield fetch(Hs(w.appConfig),H)).json()}catch(xe){throw xn.create("token-subscribe-failed",{errorInfo:null===(b=xe)||void 0===b?void 0:b.toString()})}if(ce.error)throw xn.create("token-subscribe-failed",{errorInfo:ce.error.message});if(!ce.token)throw xn.create("token-subscribe-no-token");return ce.token})).apply(this,arguments)}function tI(w,E){return Do.apply(this,arguments)}function Do(){return(Do=(0,B.Z)(function*(w,E){var b;const R=yield ya(w),V=Ph(E.subscriptionOptions),H={method:"PATCH",headers:R,body:JSON.stringify(V)};let ce;try{ce=yield(yield fetch(`${Hs(w.appConfig)}/${E.token}`,H)).json()}catch(xe){throw xn.create("token-update-failed",{errorInfo:null===(b=xe)||void 0===b?void 0:b.toString()})}if(ce.error)throw xn.create("token-update-failed",{errorInfo:ce.error.message});if(!ce.token)throw xn.create("token-update-no-token");return ce.token})).apply(this,arguments)}function kh(w,E){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,B.Z)(function*(w,E){var b;const V={method:"DELETE",headers:yield ya(w)};try{const ce=yield(yield fetch(`${Hs(w.appConfig)}/${E}`,V)).json();if(ce.error)throw xn.create("token-unsubscribe-failed",{errorInfo:ce.error.message})}catch(H){throw xn.create("token-unsubscribe-failed",{errorInfo:null===(b=H)||void 0===b?void 0:b.toString()})}})).apply(this,arguments)}function Hs({projectId:w}){return`https://fcmregistrations.googleapis.com/v1/projects/${w}/registrations`}function ya(w){return ct.apply(this,arguments)}function ct(){return(ct=(0,B.Z)(function*({appConfig:w,installations:E}){const b=yield E.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":w.apiKey,"x-goog-firebase-installations-auth":`FIS ${b}`})})).apply(this,arguments)}function Ph({p256dh:w,auth:E,endpoint:b,vapidKey:R}){const V={web:{endpoint:b,auth:E,p256dh:w}};return R!==rm&&(V.web.applicationPubKey=R),V}const nI=6048e5;function rI(w){return ec.apply(this,arguments)}function ec(){return(ec=(0,B.Z)(function*(w){const E=yield Oh(w.swRegistration,w.vapidKey),b={vapidKey:w.vapidKey,swScope:w.swRegistration.scope,endpoint:E.endpoint,auth:li(E.getKey("auth")),p256dh:li(E.getKey("p256dh"))},R=yield Rh(w.firebaseDependencies);if(R){if(Rn(R.subscriptionOptions,b))return Date.now()>=R.createTime+nI?iI(w,{token:R.token,createTime:Date.now(),subscriptionOptions:b}):R.token;try{yield kh(w.firebaseDependencies,R.token)}catch(V){console.warn(V)}return me(w.firebaseDependencies,b)}return me(w.firebaseDependencies,b)})).apply(this,arguments)}function um(w){return Du.apply(this,arguments)}function Du(){return(Du=(0,B.Z)(function*(w){const E=yield Rh(w.firebaseDependencies);E&&(yield kh(w.firebaseDependencies,E.token),yield Nh(w.firebaseDependencies));const b=yield w.swRegistration.pushManager.getSubscription();return!b||b.unsubscribe()})).apply(this,arguments)}function iI(w,E){return tc.apply(this,arguments)}function tc(){return(tc=(0,B.Z)(function*(w,E){try{const b=yield tI(w.firebaseDependencies,E),R=Object.assign(Object.assign({},E),{token:b,createTime:Date.now()});return yield Nt(w.firebaseDependencies,R),b}catch(b){throw yield um(w),b}})).apply(this,arguments)}function me(w,E){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,B.Z)(function*(w,E){const R={token:yield _a(w,E),createTime:Date.now(),subscriptionOptions:E};return yield Nt(w,R),R.token})).apply(this,arguments)}function Oh(w,E){return nc.apply(this,arguments)}function nc(){return(nc=(0,B.Z)(function*(w,E){return(yield w.pushManager.getSubscription())||w.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Dh(E)})})).apply(this,arguments)}function Rn(w,E){return E.vapidKey===w.vapidKey&&E.endpoint===w.endpoint&&E.auth===w.auth&&E.p256dh===w.p256dh}function va(w){const E={from:w.from,collapseKey:w.collapse_key,messageId:w.fcmMessageId};return function qi(w,E){if(!E.notification)return;w.notification={};const b=E.notification.title;b&&(w.notification.title=b);const R=E.notification.body;R&&(w.notification.body=R);const V=E.notification.image;V&&(w.notification.image=V);const H=E.notification.icon;H&&(w.notification.icon=H)}(E,w),function ci(w,E){!E.data||(w.data=E.data)}(E,w),function Su(w,E){var b,R,V,H,ce;if(!(E.fcmOptions||null!==(b=E.notification)&&void 0!==b&&b.click_action))return;w.fcmOptions={};const xe=null!==(V=null===(R=E.fcmOptions)||void 0===R?void 0:R.link)&&void 0!==V?V:null===(H=E.notification)||void 0===H?void 0:H.click_action;xe&&(w.fcmOptions.link=xe);const it=null===(ce=E.fcmOptions)||void 0===ce?void 0:ce.analytics_label;it&&(w.fcmOptions.analyticsLabel=it)}(E,w),E}function Lh(w){return"object"==typeof w&&!!w&&Co in w}function sI(w,E){const b=[];for(let R=0;R<w.length;R++)b.push(w.charAt(R)),R<E.length&&b.push(E.charAt(R));return b.join("")}function lm(w){return xn.create("missing-app-config-values",{valueName:w})}sI("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),sI("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class cm{constructor(E,b,R){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const V=function oI(w){if(!w||!w.options)throw lm("App Configuration Object");if(!w.name)throw lm("App Name");const E=["projectId","apiKey","appId","messagingSenderId"],{options:b}=w;for(const R of E)if(!b[R])throw lm(R);return{appName:w.name,projectId:b.projectId,apiKey:b.apiKey,appId:b.appId,senderId:b.messagingSenderId}}(E);this.firebaseDependencies={app:E,appConfig:V,installations:b,analyticsProvider:R}}_delete(){return Promise.resolve()}}function cr(w){return xi.apply(this,arguments)}function xi(){return(xi=(0,B.Z)(function*(w){var E;try{w.swRegistration=yield navigator.serviceWorker.register(nm,{scope:Xw}),w.swRegistration.update().catch(()=>{})}catch(b){throw xn.create("failed-service-worker-registration",{browserErrorMessage:null===(E=b)||void 0===E?void 0:E.message})}})).apply(this,arguments)}function Fh(w,E){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,B.Z)(function*(w,E){if(!E&&!w.swRegistration&&(yield cr(w)),E||!w.swRegistration){if(!(E instanceof ServiceWorkerRegistration))throw xn.create("invalid-sw-registration");w.swRegistration=E}})).apply(this,arguments)}function Ki(w,E){return rc.apply(this,arguments)}function rc(){return(rc=(0,B.Z)(function*(w,E){E?w.vapidKey=E:w.vapidKey||(w.vapidKey=rm)})).apply(this,arguments)}function Vh(){return(Vh=(0,B.Z)(function*(w,E){if(!navigator)throw xn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw xn.create("permission-blocked");return yield Ki(w,E?.vapidKey),yield Fh(w,E?.serviceWorkerRegistration),rI(w)})).apply(this,arguments)}function aI(w,E,b){return Au.apply(this,arguments)}function Au(){return(Au=(0,B.Z)(function*(w,E,b){const R=Bh(E);(yield w.firebaseDependencies.analyticsProvider.get()).logEvent(R,{message_id:b[Co],message_name:b[bh],message_time:b[Jw],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Bh(w){switch(w){case js.NOTIFICATION_CLICKED:return"notification_open";case js.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ws(){return(Ws=(0,B.Z)(function*(w,E){const b=E.data;if(!b.isFirebaseMessaging)return;w.onMessageHandler&&b.messageType===js.PUSH_RECEIVED&&("function"==typeof w.onMessageHandler?w.onMessageHandler(va(b)):w.onMessageHandler.next(va(b)));const R=b.data;Lh(R)&&"1"===R[Rb]&&(yield aI(w,b.messageType,R))})).apply(this,arguments)}const So="@firebase/messaging",Ao=w=>{const E=new cm(w.getProvider("app").getImmediate(),w.getProvider("installations-internal").getImmediate(),w.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",b=>function $h(w,E){return Ws.apply(this,arguments)}(E,b)),E},jh=w=>{const E=w.getProvider("messaging").getImmediate();return{getToken:R=>function Uh(w,E){return Vh.apply(this,arguments)}(E,R)}};function oc(){return xu.apply(this,arguments)}function xu(){return(xu=(0,B.Z)(function*(){try{yield(0,Z.eu)()}catch{return!1}return typeof window<"u"&&(0,Z.hl)()&&(0,Z.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function sc(){(0,re._registerComponent)(new we.wA("messaging",Ao,"PUBLIC")),(0,re._registerComponent)(new we.wA("messaging-internal",jh,"PRIVATE")),(0,re.registerVersion)(So,"0.11.0"),(0,re.registerVersion)(So,"0.11.0","esm2017")}();const xo="analytics",lc="firebase_id",Nu="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",wa="https://www.googletagmanager.com/gtag/js",En=new oe.Yd("@firebase/analytics");function ku(w){return Promise.all(w.map(E=>E.catch(b=>b)))}function Ia(w,E){const b=document.createElement("script");b.src=`${wa}?l=${w}&id=${E}`,b.async=!0,document.head.appendChild(b)}function zs(w,E,b,R,V,H){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,B.Z)(function*(w,E,b,R,V,H){const ce=R[V];try{if(ce)yield E[ce];else{const it=(yield ku(b)).find(dt=>dt.measurementId===V);it&&(yield E[it.appId])}}catch(xe){En.error(xe)}w("config",V,H)})).apply(this,arguments)}function cc(w,E,b,R,V){return dc.apply(this,arguments)}function dc(){return(dc=(0,B.Z)(function*(w,E,b,R,V){try{let H=[];if(V&&V.send_to){let ce=V.send_to;Array.isArray(ce)||(ce=[ce]);const xe=yield ku(b);for(const it of ce){const dt=xe.find(st=>st.measurementId===it),It=dt&&E[dt.appId];if(!It){H=[];break}H.push(It)}}0===H.length&&(H=Object.values(E)),yield Promise.all(H),w("event",R,V||{})}catch(H){En.error(H)}})).apply(this,arguments)}function hm(w){const E=window.document.getElementsByTagName("script");for(const b of Object.values(E))if(b.src&&b.src.includes(wa)&&b.src.includes(w))return b;return null}const Jr=new Z.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),hc=new class zh{constructor(E={},b=1e3){this.throttleMetadata=E,this.intervalMillis=b}getThrottleMetadata(E){return this.throttleMetadata[E]}setThrottleMetadata(E,b){this.throttleMetadata[E]=b}deleteThrottleMetadata(E){delete this.throttleMetadata[E]}};function Mo(w){return new Headers({Accept:"application/json","x-goog-api-key":w})}function gm(w){return fc.apply(this,arguments)}function fc(){return(fc=(0,B.Z)(function*(w){var E;const{appId:b,apiKey:R}=w,V={method:"GET",headers:Mo(R)},H=Nu.replace("{app-id}",b),ce=yield fetch(H,V);if(200!==ce.status&&304!==ce.status){let xe="";try{const it=yield ce.json();null!==(E=it.error)&&void 0!==E&&E.message&&(xe=it.error.message)}catch{}throw Jr.create("config-fetch-failed",{httpStatus:ce.status,responseMessage:xe})}return ce.json()})).apply(this,arguments)}function qs(w){return qh.apply(this,arguments)}function qh(){return(qh=(0,B.Z)(function*(w,E=hc,b){const{appId:R,apiKey:V,measurementId:H}=w.options;if(!R)throw Jr.create("no-app-id");if(!V){if(H)return{measurementId:H,appId:R};throw Jr.create("no-api-key")}const ce=E.getThrottleMetadata(R)||{backoffCount:0,throttleEndTimeMillis:Date.now()},xe=new Kh;return setTimeout((0,B.Z)(function*(){xe.abort()}),void 0!==b?b:6e4),Ks({appId:R,apiKey:V,measurementId:H},ce,xe,E)})).apply(this,arguments)}function Ks(w,E,b){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,B.Z)(function*(w,{throttleEndTimeMillis:E,backoffCount:b},R,V=hc){var H,ce;const{appId:xe,measurementId:it}=w;try{yield Lu(R,E)}catch(dt){if(it)return En.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${it} provided in the "measurementId" field in the local Firebase config. [${null===(H=dt)||void 0===H?void 0:H.message}]`),{appId:xe,measurementId:it};throw dt}try{const dt=yield gm(w);return V.deleteThrottleMetadata(xe),dt}catch(dt){const It=dt;if(!mm(It)){if(V.deleteThrottleMetadata(xe),it)return En.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${it} provided in the "measurementId" field in the local Firebase config. [${It?.message}]`),{appId:xe,measurementId:it};throw dt}const st=503===Number(null===(ce=It?.customData)||void 0===ce?void 0:ce.httpStatus)?(0,Z.$s)(b,V.intervalMillis,30):(0,Z.$s)(b,V.intervalMillis),er={throttleEndTimeMillis:Date.now()+st,backoffCount:b+1};return V.setThrottleMetadata(xe,er),En.debug(`Calling attemptFetch again in ${st} millis`),Ks(w,er,R,V)}})).apply(this,arguments)}function Lu(w,E){return new Promise((b,R)=>{const V=Math.max(E-Date.now(),0),H=setTimeout(b,V);w.addEventListener(()=>{clearTimeout(H),R(Jr.create("fetch-throttle",{throttleEndTimeMillis:E}))})})}function mm(w){if(!(w instanceof Z.ZR&&w.customData))return!1;const E=Number(w.customData.httpStatus);return 429===E||500===E||503===E||504===E}class Kh{constructor(){this.listeners=[]}addEventListener(E){this.listeners.push(E)}abort(){this.listeners.forEach(E=>E())}}let Ta,gc;function Br(){return(Br=(0,B.Z)(function*(w,E,b,R,V){if(V&&V.global)w("event",b,R);else{const H=yield E;w("event",b,Object.assign(Object.assign({},R),{send_to:H}))}})).apply(this,arguments)}function Qh(w){gc=w}function Bu(w){Ta=w}function Is(){return ko.apply(this,arguments)}function ko(){return(ko=(0,B.Z)(function*(){var w;if(!(0,Z.hl)())return En.warn(Jr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Z.eu)()}catch(E){return En.warn(Jr.create("indexeddb-unavailable",{errorInfo:null===(w=E)||void 0===w?void 0:w.toString()}).message),!1}return!0})).apply(this,arguments)}function ba(){return(ba=(0,B.Z)(function*(w,E,b,R,V,H,ce){var xe;const it=qs(w);it.then(gr=>{b[gr.measurementId]=gr.appId,w.options.measurementId&&gr.measurementId!==w.options.measurementId&&En.warn(`The measurement ID in the local Firebase config (${w.options.measurementId}) does not match the measurement ID fetched from the server (${gr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(gr=>En.error(gr)),E.push(it);const dt=Is().then(gr=>{if(gr)return R.getId()}),[It,st]=yield Promise.all([it,dt]);hm(H)||Ia(H,It.measurementId),gc&&(V("consent","default",gc),Qh(void 0)),V("js",new Date);const er=null!==(xe=ce?.config)&&void 0!==xe?xe:{};return er.origin="firebase",er.update=!0,null!=st&&(er[lc]=st),V("config",It.measurementId,er),Ta&&(V("set",Ta),Bu(void 0)),It.measurementId})).apply(this,arguments)}class mc{constructor(E){this.app=E}_delete(){return delete Qi[this.app.options.appId],Promise.resolve()}}let Qi={},Po=[];const vm={};let wm,Zi,$u="dataLayer",ju=!1;function Da(w,E,b){!function Oo(){const w=[];if((0,Z.ru)()&&w.push("This is a browser extension environment."),(0,Z.zI)()||w.push("Cookies are not available."),w.length>0){const E=w.map((R,V)=>`(${V+1}) ${R}`).join(" "),b=Jr.create("invalid-analytics-context",{errorInfo:E});En.warn(b.message)}}();const R=w.options.appId;if(!R)throw Jr.create("no-app-id");if(!w.options.apiKey){if(!w.options.measurementId)throw Jr.create("no-api-key");En.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${w.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Qi[R])throw Jr.create("already-exists",{id:R});if(!ju){!function Wh(w){let E=[];Array.isArray(window[w])?E=window[w]:window[w]=E}($u);const{wrappedGtag:H,gtagCore:ce}=function Pu(w,E,b,R,V){let H=function(...ce){window[R].push(arguments)};return window[V]&&"function"==typeof window[V]&&(H=window[V]),window[V]=function Ro(w,E,b,R){function H(){return(H=(0,B.Z)(function*(ce,xe,it){try{"event"===ce?yield cc(w,E,b,xe,it):"config"===ce?yield zs(w,E,b,R,xe,it):"consent"===ce?w("consent","update",it):w("set",xe)}catch(dt){En.error(dt)}})).apply(this,arguments)}return function V(ce,xe,it){return H.apply(this,arguments)}}(H,w,E,b),{gtagCore:H,wrappedGtag:window[V]}}(Qi,Po,vm,$u,"gtag");Zi=H,wm=ce,ju=!0}return Qi[R]=function Ca(w,E,b,R,V,H,ce){return ba.apply(this,arguments)}(w,Po,vm,E,wm,$u,b),new mc(w)}function Sa(){return Im.apply(this,arguments)}function Im(){return(Im=(0,B.Z)(function*(){if((0,Z.ru)()||!(0,Z.zI)()||!(0,Z.hl)())return!1;try{return yield(0,Z.eu)()}catch{return!1}})).apply(this,arguments)}const tt="@firebase/analytics";!function dr(){(0,re._registerComponent)(new we.wA(xo,(E,{options:b})=>Da(E.getProvider("app").getImmediate(),E.getProvider("installations-internal").getImmediate(),b),"PUBLIC")),(0,re._registerComponent)(new we.wA("analytics-internal",function w(E){try{const b=E.getProvider(xo).getImmediate();return{logEvent:(R,V,H)=>function _n(w,E,b,R){w=(0,Z.m9)(w),function Yh(w,E,b,R,V){return Br.apply(this,arguments)}(Zi,Qi[w.app.options.appId],E,b,R).catch(V=>En.error(V))}(b,R,V,H)}}catch(b){throw Jr.create("interop-component-reg-failed",{reason:b})}},"PRIVATE")),(0,re.registerVersion)(tt,"0.8.4"),(0,re.registerVersion)(tt,"0.8.4","esm2017")}();var lI=M(4408),on=M(640);const Aa=new class wc extends on.v{}(class vc extends lI.o{constructor(E,b){super(E,b),this.scheduler=E,this.work=b}schedule(E,b=0){return b>0?super.schedule(E,b):(this.delay=b,this.state=E,this.scheduler.flush(this),this)}execute(E,b){return b>0||this.closed?super.execute(E,b):this._execute(E,b)}requestAsyncId(E,b,R=0){return null!=R&&R>0||null==R&&this.delay>0?super.requestAsyncId(E,b,R):(E.flush(this),0)}});var Em=M(4986),Ar=M(9751),Xi=M(8505),Zs=M(5363),kt=M(9468);const xa=new v.GfV("7.4.1"),Gu="__angularfire_symbol__analyticsIsSupportedValue",Ic="__angularfire_symbol__analyticsIsSupported",Ec="__angularfire_symbol__remoteConfigIsSupportedValue",hr="__angularfire_symbol__remoteConfigIsSupported",Xh="__angularfire_symbol__messagingIsSupportedValue",Ra="__angularfire_symbol__messagingIsSupported";function Wu(w,E,b){if(E){if(1===E.length)return E[0];const H=E.filter(ce=>ce.app===b);if(1===H.length)return H[0]}return b.container.getProvider(w).getImmediate({optional:!0})}globalThis[Ic]||(globalThis[Ic]=Sa().then(w=>globalThis[Gu]=w).catch(()=>globalThis[Gu]=!1)),globalThis[Ra]||(globalThis[Ra]=oc().then(w=>globalThis[Xh]=w).catch(()=>globalThis[Xh]=!1)),globalThis[hr]||(globalThis[hr]=Zw().then(w=>globalThis[Ec]=w).catch(()=>globalThis[Ec]=!1));const Cc=(w,E)=>{const b=E?[E]:(0,K.C6)(),R=[];return b.forEach(V=>{V.container.getProvider(w).instances.forEach(ce=>{R.includes(ce)||R.push(ce)})}),R};function Xs(){}class Jh{constructor(E,b=Aa){this.zone=E,this.delegate=b}now(){return this.delegate.now()}schedule(E,b,R){const V=this.zone;return this.delegate.schedule(function(ce){V.runGuarded(()=>{E.apply(this,[ce])})},b,R)}}class ef{constructor(E){this.zone=E,this.task=null}call(E,b){const R=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Xs,{},Xs,Xs)),b.pipe((0,Xi.b)({next:R,complete:R,error:R})).subscribe(E).add(R)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ma=(()=>{class w{constructor(b){this.ngZone=b,this.outsideAngular=b.runOutsideAngular(()=>new Jh(Zone.current)),this.insideAngular=b.run(()=>new Jh(Zone.current,Em.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return w.\u0275fac=function(b){return new(b||w)(v.LFG(v.R0b))},w.\u0275prov=v.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();function $r(){const w=globalThis.\u0275AngularFireScheduler;if(!w)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return w}function zu(w){return $r().ngZone.runOutsideAngular(()=>w())}function ln(w){return $r().ngZone.run(()=>w())}function tf(w){return w.pipe((0,Zs.Q)($r().outsideAngular))}function pr(w){return $r(),function Es(w){return function(b){return(b=b.lift(new ef(w.ngZone))).pipe((0,kt.R)(w.outsideAngular),(0,Zs.Q)(w.insideAngular))}}($r())(w)}const Tm=(w,E)=>function(){const R=arguments;return E&&setTimeout(()=>{"scheduled"===E.state&&E.invoke()},10),ln(()=>w.apply(void 0,R))},Ts=(w,E)=>function(){let b;const R=arguments;for(let H=0;H<arguments.length;H++)"function"==typeof R[H]&&(E&&(b||(b=ln(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Xs,{},Xs,Xs)))),R[H]=Tm(R[H],b));const V=zu(()=>w.apply(this,R));if(!E){if(V instanceof Ar.y){const H=$r();return V.pipe((0,kt.R)(H.outsideAngular),(0,Zs.Q)(H.insideAngular))}return ln(()=>V)}return V instanceof Ar.y?V.pipe(pr):V instanceof Promise?ln(()=>new Promise((H,ce)=>V.then(xe=>ln(()=>H(xe)),xe=>ln(()=>ce(xe))))):"function"==typeof V&&b?function(){return setTimeout(()=>{b&&"scheduled"===b.state&&b.invoke()},10),V.apply(this,arguments)}:ln(()=>V)}},2090:(Je,ve,M)=>{M.d(ve,{$s:()=>Ge,BH:()=>Qt,DV:()=>Ir,GJ:()=>In,L:()=>_e,LL:()=>$t,P0:()=>Se,Pz:()=>Dt,Sg:()=>vt,UG:()=>$e,UI:()=>yo,US:()=>we,Wl:()=>wn,Yr:()=>Ce,ZB:()=>F,ZR:()=>dn,aH:()=>rt,b$:()=>Ee,cI:()=>vn,dS:()=>rn,eu:()=>de,g5:()=>B,gK:()=>Fn,gQ:()=>Zn,h$:()=>oe,hl:()=>Oe,hu:()=>K,jU:()=>Ne,m9:()=>Bt,ne:()=>Hi,p$:()=>U,q4:()=>De,r3:()=>_o,ru:()=>ke,tV:()=>ue,uI:()=>le,ug:()=>ur,vZ:()=>un,w1:()=>Ie,w9:()=>pa,xO:()=>_s,xb:()=>Ci,z$:()=>Me,zI:()=>q});const K=function(P,N){if(!P)throw B(N)},B=function(P){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+P)},re=function(P){const N=[];let $=0;for(let he=0;he<P.length;he++){let Y=P.charCodeAt(he);Y<128?N[$++]=Y:Y<2048?(N[$++]=Y>>6|192,N[$++]=63&Y|128):55296==(64512&Y)&&he+1<P.length&&56320==(64512&P.charCodeAt(he+1))?(Y=65536+((1023&Y)<<10)+(1023&P.charCodeAt(++he)),N[$++]=Y>>18|240,N[$++]=Y>>12&63|128,N[$++]=Y>>6&63|128,N[$++]=63&Y|128):(N[$++]=Y>>12|224,N[$++]=Y>>6&63|128,N[$++]=63&Y|128)}return N},we={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(P,N){if(!Array.isArray(P))throw Error("encodeByteArray takes an array as a parameter");this.init_();const $=N?this.byteToCharMapWebSafe_:this.byteToCharMap_,he=[];for(let Y=0;Y<P.length;Y+=3){const We=P[Y],wt=Y+1<P.length,zt=wt?P[Y+1]:0,Vr=Y+2<P.length,Sn=Vr?P[Y+2]:0;let St=(15&zt)<<2|Sn>>6,An=63&Sn;Vr||(An=64,wt||(St=64)),he.push($[We>>2],$[(3&We)<<4|zt>>4],$[St],$[An])}return he.join("")},encodeString(P,N){return this.HAS_NATIVE_SUPPORT&&!N?btoa(P):this.encodeByteArray(re(P),N)},decodeString(P,N){return this.HAS_NATIVE_SUPPORT&&!N?atob(P):function(P){const N=[];let $=0,he=0;for(;$<P.length;){const Y=P[$++];if(Y<128)N[he++]=String.fromCharCode(Y);else if(Y>191&&Y<224){const We=P[$++];N[he++]=String.fromCharCode((31&Y)<<6|63&We)}else if(Y>239&&Y<365){const Vr=((7&Y)<<18|(63&P[$++])<<12|(63&P[$++])<<6|63&P[$++])-65536;N[he++]=String.fromCharCode(55296+(Vr>>10)),N[he++]=String.fromCharCode(56320+(1023&Vr))}else{const We=P[$++],wt=P[$++];N[he++]=String.fromCharCode((15&Y)<<12|(63&We)<<6|63&wt)}}return N.join("")}(this.decodeStringToByteArray(P,N))},decodeStringToByteArray(P,N){this.init_();const $=N?this.charToByteMapWebSafe_:this.charToByteMap_,he=[];for(let Y=0;Y<P.length;){const We=$[P.charAt(Y++)],zt=Y<P.length?$[P.charAt(Y)]:0;++Y;const Sn=Y<P.length?$[P.charAt(Y)]:64;++Y;const Mt=Y<P.length?$[P.charAt(Y)]:64;if(++Y,null==We||null==zt||null==Sn||null==Mt)throw Error();he.push(We<<2|zt>>4),64!==Sn&&(he.push(zt<<4&240|Sn>>2),64!==Mt&&he.push(Sn<<6&192|Mt))}return he},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let P=0;P<this.ENCODED_VALS.length;P++)this.byteToCharMap_[P]=this.ENCODED_VALS.charAt(P),this.charToByteMap_[this.byteToCharMap_[P]]=P,this.byteToCharMapWebSafe_[P]=this.ENCODED_VALS_WEBSAFE.charAt(P),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[P]]=P,P>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(P)]=P,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(P)]=P)}}},oe=function(P){const N=re(P);return we.encodeByteArray(N,!0)},_e=function(P){return oe(P).replace(/\./g,"")},ue=function(P){try{return we.decodeString(P,!0)}catch(N){console.error("base64Decode failed: ",N)}return null};function U(P){return F(void 0,P)}function F(P,N){if(!(N instanceof Object))return N;switch(N.constructor){case Date:return new Date(N.getTime());case Object:void 0===P&&(P={});break;case Array:P=[];break;default:return N}for(const $ in N)!N.hasOwnProperty($)||!ie($)||(P[$]=F(P[$],N[$]));return P}function ie(P){return"__proto__"!==P}function Me(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function le(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Me())}function $e(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ne(){return"object"==typeof self&&self.self===self}function ke(){const P="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof P&&void 0!==P.id}function Ee(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ie(){const P=Me();return P.indexOf("MSIE ")>=0||P.indexOf("Trident/")>=0}function Ce(){return!1}function Oe(){return"object"==typeof indexedDB}function de(){return new Promise((P,N)=>{try{let $=!0;const he="validate-browser-context-for-indexeddb-analytics-module",Y=self.indexedDB.open(he);Y.onsuccess=()=>{Y.result.close(),$||self.indexedDB.deleteDatabase(he),P(!0)},Y.onupgradeneeded=()=>{$=!1},Y.onerror=()=>{var We;N((null===(We=Y.error)||void 0===We?void 0:We.message)||"")}}catch($){N($)}})}function q(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const z=()=>{try{return function pe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const P=process.env.__FIREBASE_DEFAULTS__;return P?JSON.parse(P):void 0})()||(()=>{if(typeof document>"u")return;let P;try{P=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const N=P&&ue(P[1]);return N&&JSON.parse(N)})()}catch(P){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${P}`)}},De=P=>{var N,$;return null===($=null===(N=z())||void 0===N?void 0:N.emulatorHosts)||void 0===$?void 0:$[P]},Se=P=>{const N=De(P);if(!N)return;const $=N.lastIndexOf(":");if($<=0||$+1===N.length)throw new Error(`Invalid host ${N} with no separate hostname and port!`);const he=parseInt(N.substring($+1),10);return"["===N[0]?[N.substring(1,$-1),he]:[N.substring(0,$),he]},rt=()=>{var P;return null===(P=z())||void 0===P?void 0:P.config},Dt=P=>{var N;return null===(N=z())||void 0===N?void 0:N[`_${P}`]};class Qt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((N,$)=>{this.resolve=N,this.reject=$})}wrapCallback(N){return($,he)=>{$?this.reject($):this.resolve(he),"function"==typeof N&&(this.promise.catch(()=>{}),1===N.length?N($):N($,he))}}}function vt(P,N){if(P.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const he=N||"demo-project",Y=P.iat||0,We=P.sub||P.user_id;if(!We)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const wt=Object.assign({iss:`https://securetoken.google.com/${he}`,aud:he,iat:Y,exp:Y+3600,auth_time:Y,sub:We,user_id:We,firebase:{sign_in_provider:"custom",identities:{}}},P);return[_e(JSON.stringify({alg:"none",type:"JWT"})),_e(JSON.stringify(wt)),""].join(".")}class dn extends Error{constructor(N,$,he){super($),this.code=N,this.customData=he,this.name="FirebaseError",Object.setPrototypeOf(this,dn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$t.prototype.create)}}class $t{constructor(N,$,he){this.service=N,this.serviceName=$,this.errors=he}create(N,...$){const he=$[0]||{},Y=`${this.service}/${N}`,We=this.errors[N],wt=We?function sr(P,N){return P.replace(or,($,he)=>{const Y=N[he];return null!=Y?String(Y):`<${he}?>`})}(We,he):"Error";return new dn(Y,`${this.serviceName}: ${wt} (${Y}).`,he)}}const or=/\{\$([^}]+)}/g;function vn(P){return JSON.parse(P)}function wn(P){return JSON.stringify(P)}const Ot=function(P){let N={},$={},he={},Y="";try{const We=P.split(".");N=vn(ue(We[0])||""),$=vn(ue(We[1])||""),Y=We[2],he=$.d||{},delete $.d}catch{}return{header:N,claims:$,data:he,signature:Y}},pa=function(P){const $=Ot(P).claims;return!!$&&"object"==typeof $&&$.hasOwnProperty("iat")},In=function(P){const N=Ot(P).claims;return"object"==typeof N&&!0===N.admin};function _o(P,N){return Object.prototype.hasOwnProperty.call(P,N)}function Ir(P,N){if(Object.prototype.hasOwnProperty.call(P,N))return P[N]}function Ci(P){for(const N in P)if(Object.prototype.hasOwnProperty.call(P,N))return!1;return!0}function yo(P,N,$){const he={};for(const Y in P)Object.prototype.hasOwnProperty.call(P,Y)&&(he[Y]=N.call($,P[Y],Y,P));return he}function un(P,N){if(P===N)return!0;const $=Object.keys(P),he=Object.keys(N);for(const Y of $){if(!he.includes(Y))return!1;const We=P[Y],wt=N[Y];if(Ur(We)&&Ur(wt)){if(!un(We,wt))return!1}else if(We!==wt)return!1}for(const Y of he)if(!$.includes(Y))return!1;return!0}function Ur(P){return null!==P&&"object"==typeof P}function _s(P){const N=[];for(const[$,he]of Object.entries(P))Array.isArray(he)?he.forEach(Y=>{N.push(encodeURIComponent($)+"="+encodeURIComponent(Y))}):N.push(encodeURIComponent($)+"="+encodeURIComponent(he));return N.length?"&"+N.join("&"):""}class Zn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let N=1;N<this.blockSize;++N)this.pad_[N]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(N,$){$||($=0);const he=this.W_;if("string"==typeof N)for(let Mt=0;Mt<16;Mt++)he[Mt]=N.charCodeAt($)<<24|N.charCodeAt($+1)<<16|N.charCodeAt($+2)<<8|N.charCodeAt($+3),$+=4;else for(let Mt=0;Mt<16;Mt++)he[Mt]=N[$]<<24|N[$+1]<<16|N[$+2]<<8|N[$+3],$+=4;for(let Mt=16;Mt<80;Mt++){const St=he[Mt-3]^he[Mt-8]^he[Mt-14]^he[Mt-16];he[Mt]=4294967295&(St<<1|St>>>31)}let Sn,Er,Y=this.chain_[0],We=this.chain_[1],wt=this.chain_[2],zt=this.chain_[3],Vr=this.chain_[4];for(let Mt=0;Mt<80;Mt++){Mt<40?Mt<20?(Sn=zt^We&(wt^zt),Er=1518500249):(Sn=We^wt^zt,Er=1859775393):Mt<60?(Sn=We&wt|zt&(We|wt),Er=2400959708):(Sn=We^wt^zt,Er=3395469782);const St=(Y<<5|Y>>>27)+Sn+Vr+Er+he[Mt]&4294967295;Vr=zt,zt=wt,wt=4294967295&(We<<30|We>>>2),We=Y,Y=St}this.chain_[0]=this.chain_[0]+Y&4294967295,this.chain_[1]=this.chain_[1]+We&4294967295,this.chain_[2]=this.chain_[2]+wt&4294967295,this.chain_[3]=this.chain_[3]+zt&4294967295,this.chain_[4]=this.chain_[4]+Vr&4294967295}update(N,$){if(null==N)return;void 0===$&&($=N.length);const he=$-this.blockSize;let Y=0;const We=this.buf_;let wt=this.inbuf_;for(;Y<$;){if(0===wt)for(;Y<=he;)this.compress_(N,Y),Y+=this.blockSize;if("string"==typeof N){for(;Y<$;)if(We[wt]=N.charCodeAt(Y),++wt,++Y,wt===this.blockSize){this.compress_(We),wt=0;break}}else for(;Y<$;)if(We[wt]=N[Y],++wt,++Y,wt===this.blockSize){this.compress_(We),wt=0;break}}this.inbuf_=wt,this.total_+=$}digest(){const N=[];let $=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Y=this.blockSize-1;Y>=56;Y--)this.buf_[Y]=255&$,$/=256;this.compress_(this.buf_);let he=0;for(let Y=0;Y<5;Y++)for(let We=24;We>=0;We-=8)N[he]=this.chain_[Y]>>We&255,++he;return N}}function Hi(P,N){const $=new Be(P,N);return $.subscribe.bind($)}class Be{constructor(N,$){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=$,this.task.then(()=>{N(this)}).catch(he=>{this.error(he)})}next(N){this.forEachObserver($=>{$.next(N)})}error(N){this.forEachObserver($=>{$.error(N)}),this.close(N)}complete(){this.forEachObserver(N=>{N.complete()}),this.close()}subscribe(N,$,he){let Y;if(void 0===N&&void 0===$&&void 0===he)throw new Error("Missing Observer.");Y=function lt(P,N){if("object"!=typeof P||null===P)return!1;for(const $ of N)if($ in P&&"function"==typeof P[$])return!0;return!1}(N,["next","error","complete"])?N:{next:N,error:$,complete:he},void 0===Y.next&&(Y.next=gn),void 0===Y.error&&(Y.error=gn),void 0===Y.complete&&(Y.complete=gn);const We=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Y.error(this.finalError):Y.complete()}catch{}}),this.observers.push(Y),We}unsubscribeOne(N){void 0===this.observers||void 0===this.observers[N]||(delete this.observers[N],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(N){if(!this.finalized)for(let $=0;$<this.observers.length;$++)this.sendOne($,N)}sendOne(N,$){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[N])try{$(this.observers[N])}catch(he){typeof console<"u"&&console.error&&console.error(he)}})}close(N){this.finalized||(this.finalized=!0,void 0!==N&&(this.finalError=N),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gn(){}function Fn(P,N){return`${P} failed: ${N} argument `}const rn=function(P){const N=[];let $=0;for(let he=0;he<P.length;he++){let Y=P.charCodeAt(he);if(Y>=55296&&Y<=56319){const We=Y-55296;he++,K(he<P.length,"Surrogate pair missing trail surrogate."),Y=65536+(We<<10)+(P.charCodeAt(he)-56320)}Y<128?N[$++]=Y:Y<2048?(N[$++]=Y>>6|192,N[$++]=63&Y|128):Y<65536?(N[$++]=Y>>12|224,N[$++]=Y>>6&63|128,N[$++]=63&Y|128):(N[$++]=Y>>18|240,N[$++]=Y>>12&63|128,N[$++]=Y>>6&63|128,N[$++]=63&Y|128)}return N},ur=function(P){let N=0;for(let $=0;$<P.length;$++){const he=P.charCodeAt($);he<128?N++:he<2048?N+=2:he>=55296&&he<=56319?(N+=4,$++):N+=3}return N};function Ge(P,N=1e3,$=2){const he=N*Math.pow($,P),Y=Math.round(.5*he*(Math.random()-.5)*2);return Math.min(144e5,he+Y)}function Bt(P){return P&&P._delegate?P._delegate:P}},522:(Je,ve,M)=>{var v=M(8256);let K=null;function B(){return K}const oe=new v.OlP("DocumentToken");let _e=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=v.Yz7({token:n,factory:function(){return function ue(){return(0,v.LFG)(F)}()},providedIn:"platform"}),n})();const U=new v.OlP("Location Initialized");let F=(()=>{class n extends _e{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return B().getBaseHref(this._doc)}onPopState(t){const r=B().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=B().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){ie()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){ie()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(oe))},n.\u0275prov=v.Yz7({token:n,factory:function(){return function Me(){return new F((0,v.LFG)(oe))}()},providedIn:"platform"}),n})();function ie(){return!!window.history.pushState}function le(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function $e(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ne(n){return n&&"?"!==n[0]?"?"+n:n}let ke=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=v.Yz7({token:n,factory:function(){return(0,v.f3M)(ze)},providedIn:"root"}),n})();const Ee=new v.OlP("appBaseHref");let ze=(()=>{class n extends ke{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,v.f3M)(oe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return le(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ne(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+Ne(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+Ne(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(_e),v.LFG(Ee,8))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ie=(()=>{class n extends ke{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=le(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+Ne(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+Ne(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(_e),v.LFG(Ee,8))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})(),Ae=(()=>{class n{constructor(t){this._subject=new v.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=$e(Oe(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ne(r))}normalize(t){return n.stripTrailingSlash(function X(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Oe(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ne(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ne(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Ne,n.joinWithSlash=le,n.stripTrailingSlash=$e,n.\u0275fac=function(t){return new(t||n)(v.LFG(ke))},n.\u0275prov=v.Yz7({token:n,factory:function(){return function Ce(){return new Ae((0,v.LFG)(ke))}()},providedIn:"root"}),n})();function Oe(n){return n.replace(/\/index.html$/,"")}let bo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=v.oAB({type:n}),n.\u0275inj=v.cJS({}),n})();let sm=(()=>{class n{}return n.\u0275prov=(0,v.Yz7)({token:n,providedIn:"root",factory:()=>new Xr((0,v.LFG)(oe),window)}),n})();class Xr{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Jl(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Si(this.window.history)||Si(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Si(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ws extends class $h extends class we{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function Z(n){K||(K=n)}(new Ws)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ic(){return So=So||document.querySelector("base"),So?So.getAttribute("href"):null}();return null==t?null:function jh(n){Ao=Ao||document.createElement("a"),Ao.setAttribute("href",n);const e=Ao.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){So=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Io(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let Ao,So=null;const sc=new v.OlP("TRANSITION_ID"),xu=[{provide:v.ip1,useFactory:function oc(n,e,t){return()=>{t.get(v.CZH).donePromise.then(()=>{const r=B(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[sc,oe,v.zs3],multi:!0}];let uc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();const Ru=new v.OlP("EventManagerPlugins");let Wn=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const l=i[a];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(Ru),v.LFG(v.R0b))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();class ws{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=B().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Jt=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})(),Mu=(()=>{class n extends Jt{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const l=this._doc.createElement("style");l.textContent=a,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(dm),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(dm))}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(oe))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();function dm(n){B().remove(n)}const xo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},lc=/%COMP%/g;function Ia(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Ia(n,i,t):(i=i.replace(lc,n),t.push(i))}return t}function Wh(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Yi=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new cc(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case v.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new hm(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case v.ifc.ShadowDom:return new fm(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Ia(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(Wn),v.LFG(Mu),v.LFG(v.AFp))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();class cc{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(xo[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Pu(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Pu(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=xo[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=xo[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(v.JOm.DashCase|v.JOm.Important)?e.style.setProperty(t,r,i&v.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&v.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Wh(r)):this.eventManager.addEventListener(e,t,Wh(r))}}function Pu(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class hm extends cc{constructor(e,t,r,i){super(e),this.component=r;const a=Ia(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function En(n){return"_ngcontent-%COMP%".replace(lc,n)}(i+"-"+r.id),this.hostAttr=function ku(n){return"_nghost-%COMP%".replace(lc,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class fm extends cc{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Ia(i.id,i.styles,[]);for(let l=0;l<a.length;l++){const d=document.createElement("style");d.textContent=a[l],this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Jr=(()=>{class n extends ws{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(oe))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();const pm=["alt","control","meta","shift"],Ou={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},zh={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let hc=(()=>{class n extends ws{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>B().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="",d=r.indexOf("code");if(d>-1&&(r.splice(d,1),l="code."),pm.forEach(m=>{const I=r.indexOf(m);I>-1&&(r.splice(I,1),l+=m+".")}),l+=a,0!=r.length||0===a.length)return null;const p={};return p.domEventName=i,p.fullKey=l,p}static matchEventFullKeyCode(t,r){let i=Ou[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),pm.forEach(l=>{l!==i&&(0,zh[l])(t)&&(a+=l+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(oe))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();const Kh=(0,v.eFA)(v._c5,"browser",[{provide:v.Lbi,useValue:"browser"},{provide:v.g9A,useValue:function Ks(){Ws.makeCurrent()},multi:!0},{provide:oe,useFactory:function Lu(){return(0,v.RDi)(document),document},deps:[]}]),Ta=new v.OlP(""),Yh=[{provide:v.rWj,useClass:class ac{addToWindow(e){v.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},v.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),v.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),v.dqk.frameworkStabilizers||(v.dqk.frameworkStabilizers=[]),v.dqk.frameworkStabilizers.push(r=>{const i=v.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const d=function(p){l=l||p,a--,0==a&&r(l)};i.forEach(function(p){p.whenStable(d)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?B().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:v.lri,useClass:v.dDg,deps:[v.R0b,v.eoX,v.rWj]},{provide:v.dDg,useClass:v.dDg,deps:[v.R0b,v.eoX,v.rWj]}],Br=[{provide:v.zSh,useValue:"root"},{provide:v.qLn,useFactory:function Ea(){return new v.qLn},deps:[]},{provide:Ru,useClass:Jr,multi:!0,deps:[oe,v.R0b,v.Lbi]},{provide:Ru,useClass:hc,multi:!0,deps:[oe]},{provide:Yi,useClass:Yi,deps:[Wn,Mu,v.AFp]},{provide:v.FYo,useExisting:Yi},{provide:Jt,useExisting:Mu},{provide:Mu,useClass:Mu,deps:[oe]},{provide:Wn,useClass:Wn,deps:[Ru,v.R0b]},{provide:class Rh{},useClass:uc,deps:[]},[]];let _m=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:v.AFp,useValue:t.appId},{provide:sc,useExisting:v.AFp},xu]}}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(Ta,12))},n.\u0275mod=v.oAB({type:n}),n.\u0275inj=v.cJS({providers:[...Br,...Yh],imports:[bo,v.hGG]}),n})(),Ys=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(oe))},n.\u0275prov=v.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Uu(){return new Ys((0,v.LFG)(oe))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var _n=M(8996),yc=M(7669);function tt(...n){const e=(0,yc.yG)(n);return(0,_n.D)(n,e)}var Qs=M(7579);class dr extends Qs.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const vc=(0,M(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var on=M(9751);const{isArray:wc}=Array,{getPrototypeOf:Aa,prototype:kb,keys:Em}=Object;var Zs=M(4671),kt=M(4004);const{isArray:xa}=Array;var hr=M(5403),Xh=M(9672);function Ra(...n){const e=(0,yc.yG)(n),t=(0,yc.jO)(n),{args:r,keys:i}=function Ar(n){if(1===n.length){const e=n[0];if(wc(e))return{args:e,keys:null};if(function Xi(n){return n&&"object"==typeof n&&Aa(n)===kb}(e)){const t=Em(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,_n.D)([],e);const a=new on.y(function fr(n,e,t=Zs.y){return r=>{Tc(e,()=>{const{length:i}=n,a=new Array(i);let l=i,d=i;for(let p=0;p<i;p++)Tc(e,()=>{const m=(0,_n.D)(n[p],e);let I=!1;m.subscribe((0,hr.x)(r,T=>{a[p]=T,I||(I=!0,d--),d||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>function Ec(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,l):Zs.y));return t?a.pipe(function Ic(n){return(0,kt.U)(e=>function Gu(n,e){return xa(e)?n(...e):n(e)}(n,e))}(t)):a}function Tc(n,e,t){n?(0,Xh.f)(t,n,e):e()}var Ji=M(8189);function Wu(...n){return function Pb(){return(0,Ji.J)(1)}()((0,_n.D)(n,(0,yc.yG)(n)))}var Cc=M(8421);function Xs(n){return new on.y(e=>{(0,Cc.Xf)(n()).subscribe(e)})}var Jh=M(9635),ef=M(576);function Ma(n,e){const t=(0,ef.m)(n)?n:()=>n,r=i=>i.error(t());return new on.y(e?i=>e.schedule(r,0,i):r)}var $r=M(515),zu=M(727),ln=M(4482);function tf(){return(0,ln.e)((n,e)=>{let t=null;n._refCount++;const r=(0,hr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Na extends on.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,ln.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new zu.w0;const t=this.getSubject();e.add(this.source.subscribe((0,hr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=zu.w0.EMPTY)}return e}refCount(){return tf()(this)}}function pr(n,e){return(0,ln.e)((t,r)=>{let i=null,a=0,l=!1;const d=()=>l&&!i&&r.complete();t.subscribe((0,hr.x)(r,p=>{i?.unsubscribe();let m=0;const I=a++;(0,Cc.Xf)(n(p,I)).subscribe(i=(0,hr.x)(r,T=>r.next(e?e(p,T,I,m++):T),()=>{i=null,d()}))},()=>{l=!0,d()}))})}function Es(n){return n<=0?()=>$r.E:(0,ln.e)((e,t)=>{let r=0;e.subscribe((0,hr.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Ts(n,e){return(0,ln.e)((t,r)=>{let i=0;t.subscribe((0,hr.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var w=M(5577);function E(n){return(0,ln.e)((e,t)=>{let r=!1;e.subscribe((0,hr.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function b(n=R){return(0,ln.e)((e,t)=>{let r=!1;e.subscribe((0,hr.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function R(){return new vc}function V(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ts((i,a)=>n(i,a,r)):Zs.y,Es(1),t?E(e):b(()=>new vc))}function H(n,e){return(0,ef.m)(e)?(0,w.z)(n,e,1):(0,w.z)(n,1)}var ce=M(8505);function xe(n){return(0,ln.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,hr.x)(t,void 0,void 0,l=>{a=(0,Cc.Xf)(n(l,xe(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function it(n,e,t,r,i){return(a,l)=>{let d=t,p=e,m=0;a.subscribe((0,hr.x)(l,I=>{const T=m++;p=d?n(p,I,T):(d=!0,I),r&&l.next(p)},i&&(()=>{d&&l.next(p),l.complete()})))}}function dt(n,e){return(0,ln.e)(it(n,e,arguments.length>=2,!0))}function It(n){return n<=0?()=>$r.E:(0,ln.e)((e,t)=>{let r=[];e.subscribe((0,hr.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function st(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ts((i,a)=>n(i,a,r)):Zs.y,It(1),t?E(e):b(()=>new vc))}function Ri(n){return(0,ln.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const gt="primary",xr=Symbol("RouteTitle");class Cm{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function es(n){return new Cm(n)}function ts(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],d=n[a];if(l.startsWith(":"))i[l.substring(1)]=d;else if(l!==d.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function tr(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!bc(n[i],e[i]))return!1;return!0}function bc(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function cI(n){return Array.prototype.concat.apply([],n)}function ka(n){return n.length>0?n[n.length-1]:null}function mr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Pa(n){return(0,v.CqO)(n)?n:(0,v.QGY)(n)?(0,_n.D)(Promise.resolve(n)):tt(n)}const $k={exact:function Dc(n,e,t){if(!Fo(n.segments,e.segments)||!Dm(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Dc(n.children[r],e.children[r],t))return!1;return!0},subset:pI},dI={exact:function Lb(n,e){return tr(n,e)},subset:function fI(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>bc(n[t],e[t]))},ignored:()=>!0};function hI(n,e,t){return $k[t.paths](n.root,e.root,t.matrixParams)&&dI[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function pI(n,e,t){return bm(n,e,e.segments,t)}function bm(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Fo(i,t)||e.hasChildren()||!Dm(i,t,r))}if(n.segments.length===t.length){if(!Fo(n.segments,t)||!Dm(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!pI(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(Fo(n.segments,i)&&Dm(n.segments,i,r)&&n.children[gt])&&bm(n.children[gt],e,a,r)}}function Dm(n,e,t){return e.every((r,i)=>dI[t](n[i].parameters,r.parameters))}class Lo{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=es(this.queryParams)),this._queryParamMap}toString(){return Ub.serialize(this)}}class Ut{constructor(e,t){this.segments=e,this.children=t,this.parent=null,mr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return uf(this)}}class Oa{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=es(this.parameters)),this._parameterMap}toString(){return mI(this)}}function Fo(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let af=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=v.Yz7({token:n,factory:function(){return new Uo},providedIn:"root"}),n})();class Uo{parse(e){const t=new Hk(e);return new Lo(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${lf(e.root,!0)}`,r=function Bb(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${qu(t)}=${qu(i)}`).join("&"):`${qu(t)}=${qu(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function gI(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Ub=new Uo;function uf(n){return n.segments.map(e=>mI(e)).join("/")}function lf(n,e){if(!n.hasChildren())return uf(n);if(e){const t=n.children[gt]?lf(n.children[gt],!1):"",r=[];return mr(n.children,(i,a)=>{a!==gt&&r.push(`${a}:${lf(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function sf(n,e){let t=[];return mr(n.children,(r,i)=>{i===gt&&(t=t.concat(e(r,i)))}),mr(n.children,(r,i)=>{i!==gt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===gt?[lf(n.children[gt],!1)]:[`${i}:${lf(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[gt]?`${uf(n)}/${t[0]}`:`${uf(n)}/(${t.join("//")})`}}function Sc(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function qu(n){return Sc(n).replace(/%3B/gi,";")}function cf(n){return Sc(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ac(n){return decodeURIComponent(n)}function Sm(n){return Ac(n.replace(/\+/g,"%20"))}function mI(n){return`${cf(n.path)}${function Vb(n){return Object.keys(n).map(e=>`;${cf(e)}=${cf(n[e])}`).join("")}(n.parameters)}`}const $b=/^[^\/()?;=#]+/;function df(n){const e=n.match($b);return e?e[0]:""}const Vo=/^[^=?&#]+/,jb=/^[^&#]+/;class Hk{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ut([],{}):new Ut([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[gt]=new Ut(e,t)),r}parseSegment(){const e=df(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new v.vHH(4009,!1);return this.capture(e),new Oa(Ac(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=df(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=df(this.remaining);i&&(r=i,this.capture(r))}e[Ac(t)]=Ac(r)}parseQueryParam(e){const t=function xc(n){const e=n.match(Vo);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function jk(n){const e=n.match(jb);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=Sm(t),a=Sm(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=df(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new v.vHH(4010,!1);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=gt);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[gt]:new Ut([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new v.vHH(4011,!1)}}function _I(n){return n.segments.length>0?new Ut([],{[gt]:n}):n}function Am(n){const e={};for(const r of Object.keys(n.children)){const a=Am(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function Gk(n){if(1===n.numberOfChildren&&n.children[gt]){const e=n.children[gt];return new Ut(n.segments.concat(e.segments),e.children)}return n}(new Ut(n.segments,e))}function Bo(n){return n instanceof Lo}function Rm(n,e,t,r,i){if(0===t.length)return La(e.root,e.root,e.root,r,i);const a=function Wb(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Nm(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const d={};return mr(a.outlets,(p,m)=>{d[m]="string"==typeof p?p.split("/"):p}),[...i,{outlets:d}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((d,p)=>{0==p&&"."===d||(0==p&&""===d?t=!0:".."===d?e++:""!=d&&i.push(d))}),i):[...i,a]},[]);return new Nm(t,e,r)}(t);return a.toRoot()?La(e.root,e.root,new Ut([],{}),r,i):function l(p){const m=function km(n,e,t,r){if(n.isAbsolute)return new Rc(e.root,!0,0);if(-1===r)return new Rc(t,t===e.root,0);return function hf(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new v.vHH(4005,!1);i=r.segments.length}return new Rc(r,!1,i-a)}(t,r+(di(n.commands[0])?0:1),n.numberOfDoubleDots)}(a,e,n.snapshot?._urlSegment,p),I=m.processChildren?Ku(m.segmentGroup,m.index,a.commands):yI(m.segmentGroup,m.index,a.commands);return La(e.root,m.segmentGroup,I,r,i)}(n.snapshot?._lastPathIndex)}function di(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Js(n){return"object"==typeof n&&null!=n&&n.outlets}function La(n,e,t,r,i){let l,a={};r&&mr(r,(p,m)=>{a[m]=Array.isArray(p)?p.map(I=>`${I}`):`${p}`}),l=n===e?t:Mm(n,e,t);const d=_I(Am(l));return new Lo(d,a,i)}function Mm(n,e,t){const r={};return mr(n.children,(i,a)=>{r[a]=i===e?t:Mm(i,e,t)}),new Ut(n.segments,r)}class Nm{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&di(r[0]))throw new v.vHH(4003,!1);const i=r.find(Js);if(i&&i!==ka(r))throw new v.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Rc{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function yI(n,e,t){if(n||(n=new Ut([],{})),0===n.segments.length&&n.hasChildren())return Ku(n,e,t);const r=function zb(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],d=t[r];if(Js(d))break;const p=`${d}`,m=r<t.length-1?t[r+1]:null;if(i>0&&void 0===p)break;if(p&&m&&"object"==typeof m&&void 0===m.outlets){if(!Om(p,m,l))return a;r+=2}else{if(!Om(p,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new Ut(n.segments.slice(0,r.pathIndex),{});return a.children[gt]=new Ut(n.segments.slice(r.pathIndex),n.children),Ku(a,0,i)}return r.match&&0===i.length?new Ut(n.segments,{}):r.match&&!n.hasChildren()?Pm(n,e,t):r.match?Ku(n,0,i):Pm(n,e,t)}function Ku(n,e,t){if(0===t.length)return new Ut(n.segments,{});{const r=function qk(n){return Js(n[0])?n[0].outlets:{[gt]:n}}(t),i={};return mr(r,(a,l)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[l]=yI(n.children[l],e,a))}),mr(n.children,(a,l)=>{void 0===r[l]&&(i[l]=a)}),new Ut(n.segments,i)}}function Pm(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(Js(a)){const p=qb(a.outlets);return new Ut(r,p)}if(0===i&&di(t[0])){r.push(new Oa(n.segments[e].path,vI(t[0]))),i++;continue}const l=Js(a)?a.outlets[gt]:`${a}`,d=i<t.length-1?t[i+1]:null;l&&d&&di(d)?(r.push(new Oa(l,vI(d))),i+=2):(r.push(new Oa(l,{})),i++)}return new Ut(r,{})}function qb(n){const e={};return mr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Pm(new Ut([],{}),0,t))}),e}function vI(n){const e={};return mr(n,(t,r)=>e[r]=`${t}`),e}function Om(n,e,t){return n==t.path&&tr(e,t.parameters)}class Ni{constructor(e,t){this.id=e,this.url=t}}class Lm extends Ni{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class eo extends Ni{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ff extends Ni{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Mn extends Ni{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Kb extends Ni{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yb extends Ni{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fm extends Ni{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class wI extends Ni{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qb extends Ni{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zb{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Xb{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Jb{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class eD{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Kk{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Yk{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Yu{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Vm{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=pf(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=pf(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=gf(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return gf(e,this._root).map(t=>t.value)}}function pf(n,e){if(n===e.value)return e;for(const t of e.children){const r=pf(n,t);if(r)return r}return null}function gf(n,e){if(n===e.value)return[e];for(const t of e.children){const r=gf(n,t);if(r.length)return r.unshift(e),r}return[]}class to{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Fa(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Bm extends Vm{constructor(e,t){super(e),this.snapshot=t,$m(this,e)}toString(){return this.snapshot.toString()}}function mf(n,e){const t=function Qk(n,e){const l=new Mc([],{},{},"",{},gt,e,null,n.root,-1,{});return new $o("",new to(l,[]))}(n,e),r=new dr([new Oa("",{})]),i=new dr({}),a=new dr({}),l=new dr({}),d=new dr(""),p=new Ua(r,i,l,d,a,gt,e,t.root);return p.snapshot=t.root,new Bm(new to(p,[]),t)}class Ua{constructor(e,t,r,i,a,l,d,p){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=d,this.title=this.data?.pipe((0,kt.U)(m=>m[xr]))??tt(void 0),this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,kt.U)(e=>es(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,kt.U)(e=>es(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function _f(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function II(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Mc{constructor(e,t,r,i,a,l,d,p,m,I,T,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=d,this.title=this.data?.[xr],this.routeConfig=p,this._urlSegment=m,this._lastPathIndex=I,this._correctedLastPathIndex=S??I,this._resolve=T}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=es(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=es(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class $o extends Vm{constructor(e,t){super(t),this.url=e,$m(this,t)}toString(){return yf(this._root)}}function $m(n,e){e.value._routerState=n,e.children.forEach(t=>$m(n,t))}function yf(n){const e=n.children.length>0?` { ${n.children.map(yf).join(", ")} } `:"";return`${n.value}${e}`}function Qu(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,tr(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),tr(e.params,t.params)||n.params.next(t.params),function Mi(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!tr(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),tr(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function jm(n,e){const t=tr(n.params,e.params)&&function Fb(n,e){return Fo(n,e)&&n.every((t,r)=>tr(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||jm(n.parent,e.parent))}function jo(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Va(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return jo(n,r,i);return jo(n,r)})}(n,e,t);return new to(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(d=>jo(n,d)),l}}const r=function EI(n){return new Ua(new dr(n.url),new dr(n.params),new dr(n.queryParams),new dr(n.fragment),new dr(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>jo(n,a));return new to(r,i)}}const Nc="ngNavigationCancelingError";function TI(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Bo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=CI(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function CI(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Nc]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Gm(n){return Ba(n)&&Bo(n.url)}function Ba(n){return n&&n[Nc]}class tD{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new kc,this.attachRef=null}}let kc=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new tD,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const vf=!1;let bI=(()=>{class n{constructor(t,r,i,a,l){this.parentContexts=t,this.location=r,this.changeDetector=a,this.environmentInjector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new v.vpe,this.deactivateEvents=new v.vpe,this.attachEvents=new v.vpe,this.detachEvents=new v.vpe,this.name=i||gt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new v.vHH(4012,vf);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new v.vHH(4012,vf);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new v.vHH(4012,vf);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new v.vHH(4013,vf);this._activatedRoute=t;const i=this.location,l=t._futureSnapshot.component,d=this.parentContexts.getOrCreateContext(this.name).children,p=new Wm(t,d,i.injector);if(r&&function nD(n){return!!n.resolveComponentFactory}(r)){const m=r.resolveComponentFactory(l);this.activated=i.createComponent(m,i.length,p)}else this.activated=i.createComponent(l,{index:i.length,injector:p,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(v.Y36(kc),v.Y36(v.s_b),v.$8M("name"),v.Y36(v.sBO),v.Y36(v.lqb))},n.\u0275dir=v.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class Wm{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ua?this.route:e===kc?this.childContexts:this.parent.get(e,t)}}let wf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=v.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[v.jDz],decls:1,vars:0,template:function(t,r){1&t&&v._UZ(0,"router-outlet")},dependencies:[bI],encapsulation:2}),n})();function DI(n,e){return n.providers&&!n._injector&&(n._injector=(0,v.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function SI(n){const e=n.children&&n.children.map(SI),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==gt&&(t.component=wf),t}function hi(n){return n.outlet||gt}function AI(n,e){const t=n.filter(r=>hi(r)===e);return t.push(...n.filter(r=>hi(r)!==e)),t}function Oc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class xI{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Qu(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Fa(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),mr(i,(a,l)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Fa(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),d=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:d})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Fa(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Fa(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new Yk(a.value.snapshot))}),e.children.length&&this.forwardEvent(new eD(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(Qu(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const d=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(d.contexts),l.attachRef=d.componentRef,l.route=d.route.value,l.outlet&&l.outlet.attach(d.componentRef,d.route.value),Qu(d.route.value),this.activateChildRoutes(e,null,l.children)}else{const d=Oc(i.snapshot),p=d?.get(v._Vd)??null;l.attachRef=null,l.route=i,l.resolver=p,l.injector=d,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class qm{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Xu{constructor(e,t){this.component=e,this.route=t}}function oD(n,e,t){const r=n._root;return Ef(r,e?e._root:null,t,[r.value])}function Ho(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,v.Z0I)(n)?e.get(n):n:r}function Ef(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=Fa(e);return n.children.forEach(l=>{(function Xk(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,d=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const p=function Km(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Fo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Fo(n.url,e.url)||!tr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!jm(n,e)||!tr(n.queryParams,e.queryParams);default:return!jm(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);p?i.canActivateChecks.push(new qm(r)):(a.data=l.data,a._resolvedData=l._resolvedData),Ef(n,e,a.component?d?d.children:null:t,r,i),p&&d&&d.outlet&&d.outlet.isActivated&&i.canDeactivateChecks.push(new Xu(d.outlet.component,l))}else l&&Tf(e,d,i),i.canActivateChecks.push(new qm(r)),Ef(n,null,a.component?d?d.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),mr(a,(l,d)=>Tf(l,t.getContext(d),i)),i}function Tf(n,e,t){const r=Fa(n),i=n.value;mr(r,(a,l)=>{Tf(a,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new Xu(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Cf(n){return"function"==typeof n}function bf(n){return n instanceof vc||"EmptyError"===n?.name}const Ju=Symbol("INITIAL_VALUE");function el(){return pr(n=>Ra(n.map(e=>e.pipe(Es(1),function Tm(...n){const e=(0,yc.yG)(n);return(0,ln.e)((t,r)=>{(e?Wu(n,t,e):Wu(n,t)).subscribe(r)})}(Ju)))).pipe((0,kt.U)(e=>{for(const t of e)if(!0!==t){if(t===Ju)return Ju;if(!1===t||t instanceof Lo)return t}return!0}),Ts(e=>e!==Ju),Es(1)))}function kI(n){return(0,Jh.z)((0,ce.b)(e=>{if(Bo(e))throw TI(0,e)}),(0,kt.U)(e=>!0===e))}const Xm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function PI(n,e,t,r,i){const a=Jm(n,e,t);return a.matched?function Zm(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?tt(i.map(l=>{const d=Ho(l,n);return Pa(function Ym(n){return n&&Cf(n.canMatch)}(d)?d.canMatch(e,t):n.runInContext(()=>d(e,t)))})).pipe(el(),kI()):tt(!0)}(r=DI(e,r),e,t).pipe((0,kt.U)(l=>!0===l?a:{...Xm})):tt(a)}function Jm(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Xm}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||ts)(t,n,e);if(!i)return{...Xm};const a={};mr(i.posParams,(d,p)=>{a[p]=d.path});const l=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function Fc(n,e,t,r,i="corrected"){if(t.length>0&&function jr(n,e,t){return t.some(r=>Uc(n,e,r)&&hi(r)!==gt)}(n,t,r)){const l=new Ut(e,function _D(n,e,t,r){const i={};i[gt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&hi(a)!==gt){const l=new Ut([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[hi(a)]=l}return i}(n,e,r,new Ut(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function e_(n,e,t){return t.some(r=>Uc(n,e,r))}(n,t,r)){const l=new Ut(n.segments,function mD(n,e,t,r,i,a){const l={};for(const d of r)if(Uc(n,t,d)&&!i[hi(d)]){const p=new Ut([],{});p._sourceSegment=n,p._segmentIndexShift="legacy"===a?n.segments.length:e.length,l[hi(d)]=p}return{...i,...l}}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const a=new Ut(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function Uc(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Df(n,e,t,r){return!!(hi(n)===r||r!==gt&&Uc(e,t,n))&&("**"===n.path||Jm(e,n,t).matched)}function _r(n,e,t){return 0===e.length&&!n.children[t]}const Go=!1;class Vc{constructor(e){this.segmentGroup=e||null}}class OI{constructor(e){this.urlTree=e}}function Bc(n){return Ma(new Vc(n))}function t_(n){return Ma(new OI(n))}class FI{constructor(e,t,r,i,a){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0}apply(){const e=Fc(this.urlTree.root,[],[],this.config).segmentGroup,t=new Ut(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,gt).pipe((0,kt.U)(a=>this.createUrlTree(Am(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(xe(a=>{if(a instanceof OI)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof Vc?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,gt).pipe((0,kt.U)(i=>this.createUrlTree(Am(i),e.queryParams,e.fragment))).pipe(xe(i=>{throw i instanceof Vc?this.noMatchError(i):i}))}noMatchError(e){return new v.vHH(4002,Go)}createUrlTree(e,t,r){const i=_I(e);return new Lo(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,kt.U)(a=>new Ut([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,_n.D)(i).pipe(H(a=>{const l=r.children[a],d=AI(t,a);return this.expandSegmentGroup(e,d,l,a).pipe((0,kt.U)(p=>({segment:p,outlet:a})))}),dt((a,l)=>(a[l.outlet]=l.segment,a),{}),st())}expandSegment(e,t,r,i,a,l){return(0,_n.D)(r).pipe(H(d=>this.expandSegmentAgainstRoute(e,t,r,d,i,a,l).pipe(xe(m=>{if(m instanceof Vc)return tt(null);throw m}))),V(d=>!!d),xe((d,p)=>{if(bf(d))return _r(t,i,a)?tt(new Ut([],{})):Bc(t);throw d}))}expandSegmentAgainstRoute(e,t,r,i,a,l,d){return Df(i,t,a,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,l):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l):Bc(t):Bc(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?t_(a):this.lineralizeSegments(r,a).pipe((0,w.z)(l=>{const d=new Ut(l,{});return this.expandSegment(e,d,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:d,consumedSegments:p,remainingSegments:m,positionalParamSegments:I}=Jm(t,i,a);if(!d)return Bc(t);const T=this.applyRedirectCommands(p,i.redirectTo,I);return i.redirectTo.startsWith("/")?t_(T):this.lineralizeSegments(i,T).pipe((0,w.z)(S=>this.expandSegment(e,t,r,S.concat(m),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){return"**"===r.path?(e=DI(r,e),r.loadChildren?(r._loadedRoutes?tt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,kt.U)(d=>(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,new Ut(i,{})))):tt(new Ut(i,{}))):PI(t,r,i,e).pipe(pr(({matched:l,consumedSegments:d,remainingSegments:p})=>l?this.getChildConfig(e=r._injector??e,r,i).pipe((0,w.z)(I=>{const T=I.injector??e,S=I.routes,{segmentGroup:x,slicedSegments:O}=Fc(t,d,p,S),ne=new Ut(x.segments,x.children);if(0===O.length&&ne.hasChildren())return this.expandChildren(T,S,ne).pipe((0,kt.U)(Qe=>new Ut(d,Qe)));if(0===S.length&&0===O.length)return tt(new Ut(d,{}));const se=hi(r)===a;return this.expandSegment(T,ne,S,O,se?gt:a,!0).pipe((0,kt.U)(Xe=>new Ut(d.concat(Xe.segments),Xe.children)))})):Bc(t)))}getChildConfig(e,t,r){return t.children?tt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?tt({routes:t._loadedRoutes,injector:t._loadedInjector}):function gD(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?tt(!0):tt(i.map(l=>{const d=Ho(l,n);return Pa(function eP(n){return n&&Cf(n.canLoad)}(d)?d.canLoad(e,t):n.runInContext(()=>d(e,t)))})).pipe(el(),kI())}(e,t,r).pipe((0,w.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,ce.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function LI(n){return Ma(CI(Go,3))}())):tt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return tt(r);if(i.numberOfChildren>1||!i.children[gt])return Ma(new v.vHH(4e3,Go));i=i.children[gt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new Lo(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return mr(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const d=i.substring(1);r[a]=t[d]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return mr(t.children,(d,p)=>{l[p]=this.createSegmentGroup(e,d,r,i)}),new Ut(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new v.vHH(4001,Go);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class ID{}class tl{constructor(e,t,r,i,a,l,d,p){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=a,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=d,this.urlSerializer=p}recognize(){const e=Fc(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,gt).pipe((0,kt.U)(t=>{if(null===t)return null;const r=new Mc([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},gt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new to(r,t),a=new $o(this.url,i);return this.inheritParamsAndData(a._root),a}))}inheritParamsAndData(e){const t=e.value,r=_f(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,_n.D)(Object.keys(r.children)).pipe(H(i=>{const a=r.children[i],l=AI(t,i);return this.processSegmentGroup(e,l,a,i)}),dt((i,a)=>i&&a?(i.push(...a),i):null),function er(n,e=!1){return(0,ln.e)((t,r)=>{let i=0;t.subscribe((0,hr.x)(r,a=>{const l=n(a,i++);(l||e)&&r.next(a),!l&&r.complete()}))})}(i=>null!==i),E(null),st(),(0,kt.U)(i=>{if(null===i)return null;const a=DD(i);return function no(n){n.sort((e,t)=>e.value.outlet===gt?-1:t.value.outlet===gt?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}))}processSegment(e,t,r,i,a){return(0,_n.D)(t).pipe(H(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,i,a)),V(l=>!!l),xe(l=>{if(bf(l))return _r(r,i,a)?tt([]):tt(null);throw l}))}processSegmentAgainstRoute(e,t,r,i,a){if(t.redirectTo||!Df(t,r,i,a))return tt(null);let l;if("**"===t.path){const d=i.length>0?ka(i).parameters:{},p=SD(r)+i.length;l=tt({snapshot:new Mc(i,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Af(t),hi(t),t.component??t._loadedComponent??null,t,n_(r),p,xf(t),p),consumedSegments:[],remainingSegments:[]})}else l=PI(r,t,i,e).pipe((0,kt.U)(({matched:d,consumedSegments:p,remainingSegments:m,parameters:I})=>{if(!d)return null;const T=SD(r)+p.length;return{snapshot:new Mc(p,I,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Af(t),hi(t),t.component??t._loadedComponent??null,t,n_(r),T,xf(t),T),consumedSegments:p,remainingSegments:m}}));return l.pipe(pr(d=>{if(null===d)return tt(null);const{snapshot:p,consumedSegments:m,remainingSegments:I}=d;e=t._injector??e;const T=t._loadedInjector??e,S=function CD(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:x,slicedSegments:O}=Fc(r,m,I,S.filter(se=>void 0===se.redirectTo),this.relativeLinkResolution);if(0===O.length&&x.hasChildren())return this.processChildren(T,S,x).pipe((0,kt.U)(se=>null===se?null:[new to(p,se)]));if(0===S.length&&0===O.length)return tt([new to(p,[])]);const ne=hi(t)===a;return this.processSegment(T,S,x,O,ne?gt:a).pipe((0,kt.U)(se=>null===se?null:[new to(p,se)]))}))}}function bD(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function DD(n){const e=[],t=new Set;for(const r of n){if(!bD(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=DD(r.children);e.push(new to(r.value,i))}return e.filter(r=>!t.has(r))}function n_(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function SD(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Af(n){return n.data||{}}function xf(n){return n.resolve||{}}function Rf(n){return"string"==typeof n.title||null===n.title}function jc(n){return pr(e=>{const t=n(e);return t?(0,_n.D)(t).pipe((0,kt.U)(()=>e)):tt(e)})}let r_=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===gt);return r}getResolvedTitleForRoute(t){return t.data[xr]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=v.Yz7({token:n,factory:function(){return(0,v.f3M)(ND)},providedIn:"root"}),n})(),ND=(()=>{class n extends r_{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(Ys))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class i_{}class kD extends class VI{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Mf=new v.OlP("",{providedIn:"root",factory:()=>({})}),o_=new v.OlP("ROUTES");let a_=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return tt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Pa(t.loadComponent()).pipe((0,ce.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),Ri(()=>{this.componentLoaders.delete(t)})),i=new Na(r,()=>new Qs.x).pipe(tf());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return tt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,kt.U)(d=>{this.onLoadEndListener&&this.onLoadEndListener(r);let p,m,I=!1;Array.isArray(d)?m=d:(p=d.create(t).injector,m=cI(p.get(o_,[],v.XFs.Self|v.XFs.Optional)));return{routes:m.map(SI),injector:p}}),Ri(()=>{this.childrenLoaders.delete(r)})),l=new Na(a,()=>new Qs.x).pipe(tf());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return Pa(t()).pipe((0,w.z)(r=>r instanceof v.YKP||Array.isArray(r)?tt(r):(0,_n.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(v.zs3),v.LFG(v.Sil))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class PD{}class OD{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function u_(n){throw n}function $I(n,e,t){return e.parse("/")}const l_={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},LD={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function c_(){const n=(0,v.f3M)(af),e=(0,v.f3M)(kc),t=(0,v.f3M)(Ae),r=(0,v.f3M)(v.zs3),i=(0,v.f3M)(v.Sil),a=(0,v.f3M)(o_,{optional:!0})??[],l=(0,v.f3M)(Mf,{optional:!0})??{},d=(0,v.f3M)(ND),p=(0,v.f3M)(r_,{optional:!0}),m=(0,v.f3M)(PD,{optional:!0}),I=(0,v.f3M)(i_,{optional:!0}),T=new nr(null,n,e,t,r,i,cI(a));return m&&(T.urlHandlingStrategy=m),I&&(T.routeReuseStrategy=I),T.titleStrategy=p??d,function FD(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,T),T}let nr=(()=>{class n{constructor(t,r,i,a,l,d,p){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=p,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Qs.x,this.errorHandler=u_,this.malformedUriErrorHandler=$I,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>tt(void 0),this.urlHandlingStrategy=new OD,this.routeReuseStrategy=new kD,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=l.get(a_),this.configLoader.onLoadEndListener=S=>this.triggerEvent(new Xb(S)),this.configLoader.onLoadStartListener=S=>this.triggerEvent(new Zb(S)),this.ngModule=l.get(v.h0i),this.console=l.get(v.c2e);const T=l.get(v.R0b);this.isNgZoneEnabled=T instanceof v.R0b&&v.R0b.isInAngularZone(),this.resetConfig(p),this.currentUrlTree=function Ob(){return new Lo(new Ut([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=mf(this.currentUrlTree,this.rootComponentType),this.transitions=new dr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Ts(i=>0!==i.id),(0,kt.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),pr(i=>{let a=!1,l=!1;return tt(i).pipe((0,ce.b)(d=>{this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),pr(d=>{const p=this.browserUrlTree.toString(),m=!this.navigated||d.extractedUrl.toString()!==p||p!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||m)&&this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return d_(d.source)&&(this.browserUrlTree=d.extractedUrl),tt(d).pipe(pr(T=>{const S=this.transitions.getValue();return r.next(new Lm(T.id,this.serializeUrl(T.extractedUrl),T.source,T.restoredState)),S!==this.transitions.getValue()?$r.E:Promise.resolve(T)}),function wD(n,e,t,r){return pr(i=>function vD(n,e,t,r,i){return new FI(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,kt.U)(a=>({...i,urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,ce.b)(T=>{this.currentNavigation={...this.currentNavigation,finalUrl:T.urlAfterRedirects},i.urlAfterRedirects=T.urlAfterRedirects}),function AD(n,e,t,r,i,a){return(0,w.z)(l=>function TD(n,e,t,r,i,a,l="emptyOnly",d="legacy"){return new tl(n,e,t,r,i,l,d,a).recognize().pipe(pr(p=>null===p?function ED(n){return new on.y(e=>e.error(n))}(new ID):tt(p)))}(n,e,t,l.urlAfterRedirects,r.serialize(l.urlAfterRedirects),r,i,a).pipe((0,kt.U)(d=>({...l,targetSnapshot:d}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ce.b)(T=>{if(i.targetSnapshot=T.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!T.extras.skipLocationChange){const x=this.urlHandlingStrategy.merge(T.urlAfterRedirects,T.rawUrl);this.setBrowserUrl(x,T)}this.browserUrlTree=T.urlAfterRedirects}const S=new Kb(T.id,this.serializeUrl(T.extractedUrl),this.serializeUrl(T.urlAfterRedirects),T.targetSnapshot);r.next(S)}));if(m&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:S,extractedUrl:x,source:O,restoredState:ne,extras:se}=d,Ke=new Lm(S,this.serializeUrl(x),O,ne);r.next(Ke);const Xe=mf(x,this.rootComponentType).snapshot;return tt(i={...d,targetSnapshot:Xe,urlAfterRedirects:x,extras:{...se,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=d.rawUrl,d.resolve(null),$r.E}),(0,ce.b)(d=>{const p=new Yb(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(p)}),(0,kt.U)(d=>i={...d,guards:oD(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),function Qm(n,e){return(0,w.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?tt({...t,guardsResult:!0}):function Lc(n,e,t,r){return(0,_n.D)(n).pipe((0,w.z)(i=>function pD(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?tt(a.map(d=>{const p=Oc(e)??i,m=Ho(d,p);return Pa(function RI(n){return n&&Cf(n.canDeactivate)}(m)?m.canDeactivate(n,e,t,r):p.runInContext(()=>m(n,e,t,r))).pipe(V())})).pipe(el()):tt(!0)}(i.component,i.route,t,e,r)),V(i=>!0!==i,!0))}(l,r,i,n).pipe((0,w.z)(d=>d&&function Jk(n){return"boolean"==typeof n}(d)?function cD(n,e,t,r){return(0,_n.D)(e).pipe(H(i=>Wu(function hD(n,e){return null!==n&&e&&e(new Jb(n)),tt(!0)}(i.route.parent,r),function dD(n,e){return null!==n&&e&&e(new Kk(n)),tt(!0)}(i.route,r),function fD(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function aD(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>Xs(()=>tt(l.guards.map(p=>{const m=Oc(l.node)??t,I=Ho(p,m);return Pa(function uD(n){return n&&Cf(n.canActivateChild)}(I)?I.canActivateChild(r,n):m.runInContext(()=>I(r,n))).pipe(V())})).pipe(el())));return tt(a).pipe(el())}(n,i.path,t),function NI(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return tt(!0);const i=r.map(a=>Xs(()=>{const l=Oc(e)??t,d=Ho(a,l);return Pa(function tP(n){return n&&Cf(n.canActivate)}(d)?d.canActivate(e,n):l.runInContext(()=>d(e,n))).pipe(V())}));return tt(i).pipe(el())}(n,i.route,t))),V(i=>!0!==i,!0))}(r,a,n,e):tt(d)),(0,kt.U)(d=>({...t,guardsResult:d})))})}(this.ngModule.injector,d=>this.triggerEvent(d)),(0,ce.b)(d=>{if(i.guardsResult=d.guardsResult,Bo(d.guardsResult))throw TI(0,d.guardsResult);const p=new Fm(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.triggerEvent(p)}),Ts(d=>!!d.guardsResult||(this.restoreHistory(d),this.cancelNavigationTransition(d,"",3),!1)),jc(d=>{if(d.guards.canActivateChecks.length)return tt(d).pipe((0,ce.b)(p=>{const m=new wI(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(m)}),pr(p=>{let m=!1;return tt(p).pipe(function UI(n,e){return(0,w.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return tt(t);let a=0;return(0,_n.D)(i).pipe(H(l=>function xD(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!Rf(i)&&(a[xr]=i.title),function $c(n,e,t,r){const i=function RD(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return tt({});const a={};return(0,_n.D)(i).pipe((0,w.z)(l=>function MD(n,e,t,r){const i=Oc(e)??r,a=Ho(n,i);return Pa(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[l],e,t,r).pipe(V(),(0,ce.b)(d=>{a[l]=d}))),It(1),function gr(n){return(0,kt.U)(()=>n)}(a),xe(l=>bf(l)?$r.E:Ma(l)))}(a,n,e,r).pipe((0,kt.U)(l=>(n._resolvedData=l,n.data=_f(n,t).resolve,i&&Rf(i)&&(n.data[xr]=i.title),null)))}(l.route,r,n,e)),(0,ce.b)(()=>a++),It(1),(0,w.z)(l=>a===i.length?tt(t):$r.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,ce.b)({next:()=>m=!0,complete:()=>{m||(this.restoreHistory(p),this.cancelNavigationTransition(p,"",2))}}))}),(0,ce.b)(p=>{const m=new Qb(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(m)}))}),jc(d=>{const p=m=>{const I=[];m.routeConfig?.loadComponent&&!m.routeConfig._loadedComponent&&I.push(this.configLoader.loadComponent(m.routeConfig).pipe((0,ce.b)(T=>{m.component=T}),(0,kt.U)(()=>{})));for(const T of m.children)I.push(...p(T));return I};return Ra(p(d.targetSnapshot.root)).pipe(E(),Es(1))}),jc(()=>this.afterPreactivation()),(0,kt.U)(d=>{const p=function Hm(n,e,t){const r=jo(n,e._root,t?t._root:void 0);return new Bm(r,e)}(this.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return i={...d,targetRouterState:p}}),(0,ce.b)(d=>{this.currentUrlTree=d.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),this.routerState=d.targetRouterState,"deferred"===this.urlUpdateStrategy&&(d.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,d),this.browserUrlTree=d.urlAfterRedirects)}),((n,e,t)=>(0,kt.U)(r=>(new xI(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,d=>this.triggerEvent(d)),(0,ce.b)({next(){a=!0},complete(){a=!0}}),Ri(()=>{a||l||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),xe(d=>{if(l=!0,Ba(d)){Gm(d)||(this.navigated=!0,this.restoreHistory(i,!0));const p=new ff(i.id,this.serializeUrl(i.extractedUrl),d.message,d.cancellationCode);if(r.next(p),Gm(d)){const m=this.urlHandlingStrategy.merge(d.url,this.rawUrlTree),I={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||d_(i.source)};this.scheduleNavigation(m,"imperative",null,I,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const p=new Mn(i.id,this.serializeUrl(i.extractedUrl),d,i.targetSnapshot??void 0);r.next(p);try{i.resolve(this.errorHandler(d))}catch(m){i.reject(m)}}return $r.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},a=t.state?.navigationId?t.state:null;if(a){const d={...a};delete d.navigationId,delete d.\u0275routerPageId,0!==Object.keys(d).length&&(i.state=d)}const l=this.parseUrl(t.url);this.scheduleNavigation(l,r,a,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(SI),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:d,preserveFragment:p}=r,m=i||this.routerState.root,I=p?this.currentUrlTree.fragment:l;let T=null;switch(d){case"merge":T={...this.currentUrlTree.queryParams,...a};break;case"preserve":T=this.currentUrlTree.queryParams;break;default:T=a||null}return null!==T&&(T=this.removeEmptyProps(T)),Rm(m,this.currentUrlTree,t,T,I??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Bo(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function $a(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new v.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...l_}:!1===r?{...LD}:r,Bo(t))return hI(this.currentUrlTree,t,i);const a=this.parseUrl(t);return hI(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new eo(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,l){if(this.disposed)return Promise.resolve(!1);let d,p,m;l?(d=l.resolve,p=l.reject,m=l.promise):m=new Promise((S,x)=>{d=S,p=x});const I=++this.navigationId;let T;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),T=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):T=0,this.setTransition({id:I,targetPageId:T,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:d,reject:p,promise:m,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),m.catch(S=>Promise.reject(S))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const a=new ff(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(a),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){v.$Z()},n.\u0275prov=v.Yz7({token:n,factory:function(){return c_()},providedIn:"root"}),n})();function d_(n){return"imperative"!==n}class jI{}let HI=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(Ts(t=>t instanceof eo),H(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,v.MMx)(a.providers,t,`Route: ${a.path}`));const l=a._injector??t,d=a._loadedInjector??l;a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent?i.push(this.preloadConfig(l,a)):(a.children||a._loadedRoutes)&&i.push(this.processRoutes(d,a.children??a._loadedRoutes))}return(0,_n.D)(i).pipe((0,Ji.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):tt(null);const a=i.pipe((0,w.z)(l=>null===l?tt(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,_n.D)([a,l]).pipe((0,Ji.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(nr),v.LFG(v.Sil),v.LFG(v.lqb),v.LFG(jI),v.LFG(a_))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Wc=new v.OlP("");let f_=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Lm?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof eo&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Yu&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Yu(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){v.$Z()},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})();function Wo(n,e){return{\u0275kind:n,\u0275providers:e}}function Pf(n){return[{provide:o_,multi:!0,useValue:n}]}function nl(){const n=(0,v.f3M)(v.zs3);return e=>{const t=n.get(v.z2F);if(e!==t.components[0])return;const r=n.get(nr),i=n.get(WI);1===n.get(Of)&&r.initialNavigation(),n.get(Lf,null,v.XFs.Optional)?.setUpPreloading(),n.get(Wc,null,v.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const WI=new v.OlP("",{factory:()=>new Qs.x}),Of=new v.OlP("",{providedIn:"root",factory:()=>1});const Lf=new v.OlP("");function qI(n){return Wo(0,[{provide:Lf,useExisting:HI},{provide:jI,useExisting:n}])}const m_=new v.OlP("ROUTER_FORROOT_GUARD"),jD=[Ae,{provide:af,useClass:Uo},{provide:nr,useFactory:c_},kc,{provide:Ua,useFactory:function g_(n){return n.routerState.root},deps:[nr]},a_];function HD(){return new v.PXZ("Router",nr)}let ki=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[jD,[],Pf(t),{provide:m_,useFactory:zD,deps:[[nr,new v.FiY,new v.tp0]]},{provide:Mf,useValue:r||{}},r?.useHash?{provide:ke,useClass:Ie}:{provide:ke,useClass:ze},{provide:Wc,useFactory:()=>{const n=(0,v.f3M)(nr),e=(0,v.f3M)(sm),t=(0,v.f3M)(Mf);return t.scrollOffset&&e.setOffset(t.scrollOffset),new f_(n,e,t)}},r?.preloadingStrategy?qI(r.preloadingStrategy).\u0275providers:[],{provide:v.PXZ,multi:!0,useFactory:HD},r?.initialNavigation?qD(r):[],[{provide:YI,useFactory:nl},{provide:v.tb,multi:!0,useExisting:YI}]]}}static forChild(t){return{ngModule:n,providers:[Pf(t)]}}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(m_,8))},n.\u0275mod=v.oAB({type:n}),n.\u0275inj=v.cJS({imports:[wf]}),n})();function zD(n){return"guarded"}function qD(n){return["disabled"===n.initialNavigation?Wo(3,[{provide:v.ip1,multi:!0,useFactory:()=>{const e=(0,v.f3M)(nr);return()=>{e.setUpLocationChangeListener()}}},{provide:Of,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Wo(2,[{provide:Of,useValue:0},{provide:v.ip1,multi:!0,deps:[v.zs3],useFactory:e=>{const t=e.get(U,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(a=>{const l=e.get(nr),d=e.get(WI);(function i(a){e.get(nr).events.pipe(Ts(d=>d instanceof eo||d instanceof ff||d instanceof Mn),(0,kt.U)(d=>d instanceof eo||d instanceof ff&&(0===d.code||1===d.code)&&null),Ts(d=>null!==d),Es(1)).subscribe(()=>{a()})})(()=>{a(!0),r=!0}),l.afterPreactivation=()=>(a(!0),r||d.closed?tt(void 0):d),l.initialNavigation()}))}}]).\u0275providers:[]]}const YI=new v.OlP(""),KD=[];let YD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=v.oAB({type:n}),n.\u0275inj=v.cJS({imports:[ki.forRoot(KD),ki]}),n})();var Ve=M(5813),ro=M(5867);class zo{constructor(e){return e}}class qc{constructor(){return(0,ro.C6)()}}const Ff=new v.OlP("angularfire2._apps"),ZD={provide:zo,useFactory:function QD(n){return n&&1===n.length?n[0]:new zo((0,ro.Mq)())},deps:[[new v.FiY,Ff]]},ZI={provide:qc,deps:[[new v.FiY,Ff]]};function XD(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new zo(r)}}let JD=(()=>{class n{constructor(t){(0,ro.KN)("angularfire",Ve.q4.full,"core"),(0,ro.KN)("angularfire",Ve.q4.full,"app"),(0,ro.KN)("angular",v.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(v.Lbi))},n.\u0275mod=v.oAB({type:n}),n.\u0275inj=v.cJS({providers:[ZD,ZI]}),n})();function aP(n,...e){return{ngModule:JD,providers:[{provide:Ff,useFactory:XD(n),multi:!0,deps:[v.R0b,v.zs3,Ve.HU,...e]}]}}const nS=(0,Ve.u3)(ro.ZF,!0);var fe=M(5861),Kt=M(9681),Ha=M(4859),k=M(2090),Cs=M(1877);const eE=new Map,tE={activated:!1,tokenObservers:[]},il={initialized:!1,enabled:!1};function yr(n){return eE.get(n)||Object.assign({},tE)}function Ga(){return il}class oS{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,fe.Z)(function*(){t.stop();try{t.pending=new k.BH,yield function sE(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new k.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Rr=new k.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Uf(n){if(!yr(n).activated)throw Rr.create("use-before-activation",{appName:n.name})}function y_(n,e){return aE.apply(this,arguments)}function aE(){return(aE=(0,fe.Z)(function*({url:n,body:e},t){var r,i;const a={"Content-Type":"application/json"},l=t.getImmediate({optional:!0});if(l){const x=yield l.getHeartbeatsHeader();x&&(a["X-Firebase-Client"]=x)}const d={method:"POST",body:JSON.stringify(e),headers:a};let p,m;try{p=yield fetch(n,d)}catch(x){throw Rr.create("fetch-network-error",{originalErrorMessage:null===(r=x)||void 0===r?void 0:r.message})}if(200!==p.status)throw Rr.create("fetch-status-error",{httpStatus:p.status});try{m=yield p.json()}catch(x){throw Rr.create("fetch-parse-error",{originalErrorMessage:null===(i=x)||void 0===i?void 0:i.message})}const I=m.ttl.match(/^([\d.]+)(s)$/);if(!I||!I[2]||isNaN(Number(I[1])))throw Rr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const T=1e3*Number(I[1]),S=Date.now();return{token:m.token,expireTimeMillis:S+T,issuedAtTimeMillis:S}})).apply(this,arguments)}function lE(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const al="firebase-app-check-store";let ul=null;function bs(){return ul||(ul=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var a;e(Rr.create("storage-open",{originalErrorMessage:null===(a=i.target.error)||void 0===a?void 0:a.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(al,{keyPath:"compositeKey"})}}catch(r){e(Rr.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),ul)}function hE(){return(hE=(0,fe.Z)(function*(n,e){const r=(yield bs()).transaction(al,"readwrite"),a=r.objectStore(al).put({compositeKey:n,value:e});return new Promise((l,d)=>{a.onsuccess=p=>{l()},r.onerror=p=>{var m;d(Rr.create("storage-set",{originalErrorMessage:null===(m=p.target.error)||void 0===m?void 0:m.message}))}})})).apply(this,arguments)}const Wa=new Cs.Yd("@firebase/app-check");function T_(n,e){return(0,k.hl)()?function dE(n,e){return function I_(n,e){return hE.apply(this,arguments)}(function Bf(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Wa.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function pE(){return Ga().enabled}function b_(){return gE.apply(this,arguments)}function gE(){return(gE=(0,fe.Z)(function*(){const n=Ga();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const cP={error:"UNKNOWN_ERROR"};function mE(n){return k.US.encodeString(JSON.stringify(n),!1)}function Qc(n){return D_.apply(this,arguments)}function D_(){return(D_=(0,fe.Z)(function*(n,e=!1){const t=n.app;Uf(t);const r=yr(t);let a,i=r.token;if(i&&!Xc(i)&&(r.token=void 0,i=void 0),!i){const p=yield r.cachedTokenPromise;p&&(Xc(p)?i=p:yield T_(t,void 0))}if(!e&&i&&Xc(i))return{token:i.token};let d,l=!1;if(pE()){r.exchangeTokenPromise||(r.exchangeTokenPromise=y_(lE(t,yield b_()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const p=yield r.exchangeTokenPromise;return yield T_(t,p),r.token=p,{token:p.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield yr(t).exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?Wa.warn(p.message):Wa.error(p),a=p}return i?a?d=Xc(i)?{token:i.token,internalError:a}:hS(a):(d={token:i.token},r.token=i,yield T_(t,i)):d=hS(a),l&&dS(t,d),d})).apply(this,arguments)}function _E(n,e){const t=yr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function cS(n){const{app:e}=n,t=yr(e);let r=t.tokenRefresher;r||(r=function dP(n){const{app:e}=n;return new oS((0,fe.Z)(function*(){let r;if(r=yr(e).token?yield Qc(n,!0):yield Qc(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=yr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function dS(n,e){const t=yr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function Xc(n){return n.expireTimeMillis-Date.now()>0}function hS(n){return{token:mE(cP),error:n}}class hP{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=yr(this.app);for(const t of e)_E(this.app,t.next);return Promise.resolve()}}const Hf="app-check-internal";!function bE(){(0,Kt._registerComponent)(new Ha.wA("app-check",n=>function fP(n,e){return new hP(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Hf).initialize()})),(0,Kt._registerComponent)(new Ha.wA(Hf,n=>function pP(n){return{getToken:e=>Qc(n,e),addTokenListener:e=>function Zc(n,e,t,r){const{app:i}=n,a=yr(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&Xc(a.token)){const d=a.token;Promise.resolve().then(()=>{t({token:d.token}),cS(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>cS(n))}(n,"INTERNAL",e),removeTokenListener:e=>_E(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Kt.registerVersion)("@firebase/app-check","0.5.17")}();class Wf{constructor(){return(0,Ve.vb)("app-check")}}typeof window<"u"&&window;var AE=M(655);const Ss=function k_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},qf=new k.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),xE=new Cs.Yd("@firebase/auth");function P_(n,...e){xE.logLevel<=Cs.in.ERROR&&xE.error(`Auth (${Kt.SDK_VERSION}): ${n}`,...e)}function Hr(n,...e){throw td(n,...e)}function As(n,...e){return td(n,...e)}function RE(n,e,t){const r=Object.assign(Object.assign({},Ss()),{[e]:t});return new k.LL("auth","Firebase",r).create(e,{appName:n.name})}function td(n,...e){if("string"!=typeof n){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return qf.create(n,...e)}function Pe(n,e,...t){if(!n)throw td(e,...t)}function xs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw P_(e),new Error(e)}function is(n,e){n||xs(e)}const Kf=new Map;function Pi(n){is(n instanceof Function,"Expected a class definition");let e=Kf.get(n);return e?(is(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Kf.set(n,e),e)}function Yf(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.href)||""}function L_(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}class qa{constructor(e,t){this.shortDelay=e,this.longDelay=t,is(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,k.uI)()||(0,k.b$)()}get(){return function ME(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function Qf(){return"http:"===L_()||"https:"===L_()}()||(0,k.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ss(n,e){is(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class nd{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void xs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void xs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void xs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Zf={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},rd=new qa(3e4,6e4);function zn(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Bn(n,e,t,r){return Xf.apply(this,arguments)}function Xf(){return(Xf=(0,fe.Z)(function*(n,e,t,r,i={}){return kE(n,i,(0,fe.Z)(function*(){let a={},l={};r&&("GET"===e?l=r:a={body:JSON.stringify(r)});const d=(0,k.xO)(Object.assign({key:n.config.apiKey},l)).slice(1),p=yield n._getAdditionalHeaders();return p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode),nd.fetch()(CS(n,n.config.apiHost,t,d),Object.assign({method:e,headers:p,referrerPolicy:"no-referrer"},a))}))})).apply(this,arguments)}function kE(n,e,t){return F_.apply(this,arguments)}function F_(){return(F_=(0,fe.Z)(function*(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},Zf),e);try{const i=new bS(n),a=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();const l=yield a.json();if("needConfirmation"in l)throw Jf(n,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const d=a.ok?l.errorMessage:l.error.message,[p,m]=d.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===p)throw Jf(n,"credential-already-in-use",l);if("EMAIL_EXISTS"===p)throw Jf(n,"email-already-in-use",l);if("USER_DISABLED"===p)throw Jf(n,"user-disabled",l);const I=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw RE(n,I,m);Hr(n,I)}}catch(i){if(i instanceof k.ZR)throw i;Hr(n,"network-request-failed")}})).apply(this,arguments)}function pi(n,e,t,r){return U_.apply(this,arguments)}function U_(){return(U_=(0,fe.Z)(function*(n,e,t,r,i={}){const a=yield Bn(n,e,t,r,i);return"mfaPendingCredential"in a&&Hr(n,"multi-factor-auth-required",{_serverResponse:a}),a})).apply(this,arguments)}function CS(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?ss(n.config,i):`${n.config.apiScheme}://${i}`}class bS{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(As(this.auth,"network-request-failed")),rd.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Jf(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=As(n,e,r);return i.customData._tokenResponse=t,i}function V_(){return(V_=(0,fe.Z)(function*(n,e){return Bn(n,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function PE(n,e){return B_.apply(this,arguments)}function B_(){return(B_=(0,fe.Z)(function*(n,e){return Bn(n,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function Ka(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function $_(){return($_=(0,fe.Z)(function*(n,e=!1){const t=(0,k.m9)(n),r=yield t.getIdToken(e),i=tp(r);Pe(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a="object"==typeof i.firebase?i.firebase:void 0,l=a?.sign_in_provider;return{claims:i,token:r,authTime:Ka(j_(i.auth_time)),issuedAtTime:Ka(j_(i.iat)),expirationTime:Ka(j_(i.exp)),signInProvider:l||null,signInSecondFactor:a?.sign_in_second_factor||null}})).apply(this,arguments)}function j_(n){return 1e3*Number(n)}function tp(n){var e;const[t,r,i]=n.split(".");if(void 0===t||void 0===r||void 0===i)return P_("JWT malformed, contained fewer than 3 sections"),null;try{const a=(0,k.tV)(r);return a?JSON.parse(a):(P_("Failed to decode base64 JWT payload"),null)}catch(a){return P_("Caught error parsing JWT payload as JSON",null===(e=a)||void 0===e?void 0:e.toString()),null}}function Oi(n,e){return io.apply(this,arguments)}function io(){return(io=(0,fe.Z)(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(r){throw r instanceof k.ZR&&RP(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})).apply(this,arguments)}function RP({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}class id{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout((0,fe.Z)(function*(){yield t.iteration()}),r)}iteration(){var e=this;return(0,fe.Z)(function*(){var t;try{yield e.user.getIdToken(!0)}catch(r){return void("auth/network-request-failed"===(null===(t=r)||void 0===t?void 0:t.code)&&e.schedule(!0))}e.schedule()})()}}class OE{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ka(this.lastLoginAt),this.creationTime=Ka(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function sd(n){return od.apply(this,arguments)}function od(){return(od=(0,fe.Z)(function*(n){var e;const t=n.auth,r=yield n.getIdToken(),i=yield Oi(n,PE(t,{idToken:r}));Pe(i?.users.length,t,"internal-error");const a=i.users[0];n._notifyReloadListener(a);const l=null!==(e=a.providerUserInfo)&&void 0!==e&&e.length?Mr(a.providerUserInfo):[],d=ad(n.providerData,l),I=!!n.isAnonymous&&!(n.email&&a.passwordHash||d?.length),T={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new OE(a.createdAt,a.lastLoginAt),isAnonymous:I};Object.assign(n,T)})).apply(this,arguments)}function Li(){return(Li=(0,fe.Z)(function*(n){const e=(0,k.m9)(n);yield sd(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function ad(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Mr(n){return n.map(e=>{var{providerId:t}=e,r=(0,AE._T)(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function hl(){return(hl=(0,fe.Z)(function*(n,e){const t=yield kE(n,{},(0,fe.Z)(function*(){const r=(0,k.xO)({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,l=CS(n,i,"/v1/token",`key=${a}`),d=yield n._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",nd.fetch()(l,{method:"POST",headers:d,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})).apply(this,arguments)}class Nr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function xS(n){const e=tp(n);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var r=this;return(0,fe.Z)(function*(){return Pe(!r.accessToken||r.refreshToken,e,"user-token-expired"),t||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var r=this;return(0,fe.Z)(function*(){const{accessToken:i,refreshToken:a,expiresIn:l}=yield function Ya(n,e){return hl.apply(this,arguments)}(e,t);r.updateTokensAndExpiration(i,a,Number(l))})()}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,l=new Nr;return r&&(Pe("string"==typeof r,"internal-error",{appName:e}),l.refreshToken=r),i&&(Pe("string"==typeof i,"internal-error",{appName:e}),l.accessToken=i),a&&(Pe("number"==typeof a,"internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Nr,this.toJSON())}_performRefresh(){return xs("not implemented")}}function Rs(n,e){Pe("string"==typeof n||typeof n>"u","internal-error",{appName:e})}class Fi{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,a=(0,AE._T)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new id(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new OE(a.createdAt||void 0,a.lastLoginAt||void 0)}getIdToken(e){var t=this;return(0,fe.Z)(function*(){const r=yield Oi(t,t.stsTokenManager.getToken(t.auth,e));return Pe(r,t.auth,"internal-error"),t.accessToken!==r&&(t.accessToken=r,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),r})()}getIdTokenResult(e){return function AS(n){return $_.apply(this,arguments)}(this,e)}reload(){return function RS(n){return Li.apply(this,arguments)}(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new Fi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var r=this;return(0,fe.Z)(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield sd(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return(0,fe.Z)(function*(){const t=yield e.getIdToken();return yield Oi(e,function DS(n,e){return V_.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,a,l,d,p,m,I;const T=null!==(r=t.displayName)&&void 0!==r?r:void 0,S=null!==(i=t.email)&&void 0!==i?i:void 0,x=null!==(a=t.phoneNumber)&&void 0!==a?a:void 0,O=null!==(l=t.photoURL)&&void 0!==l?l:void 0,ne=null!==(d=t.tenantId)&&void 0!==d?d:void 0,se=null!==(p=t._redirectEventId)&&void 0!==p?p:void 0,Ke=null!==(m=t.createdAt)&&void 0!==m?m:void 0,Xe=null!==(I=t.lastLoginAt)&&void 0!==I?I:void 0,{uid:Qe,emailVerified:Ct,isAnonymous:Lt,providerData:Pt,stsTokenManager:Dn}=t;Pe(Qe&&Dn,e,"internal-error");const gs=Nr.fromJSON(this.name,Dn);Pe("string"==typeof Qe,e,"internal-error"),Rs(T,e.name),Rs(S,e.name),Pe("boolean"==typeof Ct,e,"internal-error"),Pe("boolean"==typeof Lt,e,"internal-error"),Rs(x,e.name),Rs(O,e.name),Rs(ne,e.name),Rs(se,e.name),Rs(Ke,e.name),Rs(Xe,e.name);const wh=new Fi({uid:Qe,auth:e,email:S,emailVerified:Ct,displayName:T,isAnonymous:Lt,photoURL:O,phoneNumber:x,tenantId:ne,stsTokenManager:gs,createdAt:Ke,lastLoginAt:Xe});return Pt&&Array.isArray(Pt)&&(wh.providerData=Pt.map(zq=>Object.assign({},zq))),se&&(wh._redirectEventId=se),wh}static _fromIdTokenResponse(e,t,r=!1){return(0,fe.Z)(function*(){const i=new Nr;i.updateFromServerResponse(t);const a=new Fi({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield sd(a),a})()}}const Qa=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,fe.Z)(function*(){return!0})()}_set(t,r){var i=this;return(0,fe.Z)(function*(){i.storage[t]=r})()}_get(t){var r=this;return(0,fe.Z)(function*(){const i=r.storage[t];return void 0===i?null:i})()}_remove(t){var r=this;return(0,fe.Z)(function*(){delete r.storage[t]})()}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})();function so(n,e,t){return`firebase:${n}:${e}:${t}`}class os{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=so(this.userKey,i.apiKey,a),this.fullPersistenceKey=so("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return(0,fe.Z)(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?Fi._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return(0,fe.Z)(function*(){if(t.persistence===e)return;const r=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,r?t.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return(0,fe.Z)(function*(){if(!t.length)return new os(Pi(Qa),e,r);const i=(yield Promise.all(t.map(function(){var m=(0,fe.Z)(function*(I){if(yield I._isAvailable())return I});return function(I){return m.apply(this,arguments)}}()))).filter(m=>m);let a=i[0]||Pi(Qa);const l=so(r,e.config.apiKey,e.name);let d=null;for(const m of t)try{const I=yield m._get(l);if(I){const T=Fi._fromJSON(e,I);m!==a&&(d=T),a=m;break}}catch{}const p=i.filter(m=>m._shouldAllowMigration);return a._shouldAllowMigration&&p.length?(a=p[0],d&&(yield a._set(l,d.toJSON())),yield Promise.all(t.map(function(){var m=(0,fe.Z)(function*(I){if(I!==a)try{yield I._remove(l)}catch{}});return function(I){return m.apply(this,arguments)}}())),new os(a,e,r)):new os(a,e,r)})()}}function Za(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(H_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Xa(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(W_(e))return"Blackberry";if(z_(e))return"Webos";if(Ko(e))return"Safari";if((e.includes("chrome/")||Ja(e))&&!e.includes("edge/"))return"Chrome";if(G_(e))return"Android";{const r=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function Xa(n=(0,k.z$)()){return/firefox\//i.test(n)}function Ko(n=(0,k.z$)()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ja(n=(0,k.z$)()){return/crios\//i.test(n)}function H_(n=(0,k.z$)()){return/iemobile/i.test(n)}function G_(n=(0,k.z$)()){return/android/i.test(n)}function W_(n=(0,k.z$)()){return/blackberry/i.test(n)}function z_(n=(0,k.z$)()){return/webos/i.test(n)}function ld(n=(0,k.z$)()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function q_(n=(0,k.z$)()){return ld(n)||G_(n)||z_(n)||W_(n)||/windows phone/i.test(n)||H_(n)}function UE(n,e=[]){let t;switch(n){case"Browser":t=Za((0,k.z$)());break;case"Worker":t=`${Za((0,k.z$)())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Kt.SDK_VERSION}/${r}`}class kS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((l,d)=>{try{l(e(a))}catch(p){d(p)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return(0,fe.Z)(function*(){var r;if(t.auth.currentUser===e)return;const i=[];try{for(const a of t.queue)yield a(e),a.onAbort&&i.push(a.onAbort)}catch(a){i.reverse();for(const l of i)try{l()}catch{}throw t.auth._errorFactory.create("login-blocked",{originalMessage:null===(r=a)||void 0===r?void 0:r.message})}})()}}class PS{constructor(e,t,r){this.app=e,this.heartbeatServiceProvider=t,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new K_(this),this.idTokenSubscription=new K_(this),this.beforeStateQueue=new kS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qf,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){var r=this;return t&&(this._popupRedirectResolver=Pi(t)),this._initializationPromise=this.queue((0,fe.Z)(function*(){var i,a;if(!r._deleted&&(r.persistenceManager=yield os.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(t),r.lastNotifiedUid=(null===(a=r.currentUser)||void 0===a?void 0:a.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return(0,fe.Z)(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUser(e){var t=this;return(0,fe.Z)(function*(){var r;const i=yield t.assertedPersistence.getCurrentUser();let a=i,l=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const d=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,p=a?._redirectEventId,m=yield t.tryRedirectSignIn(e);(!d||d===p)&&m?.user&&(a=m.user,l=!0)}if(!a)return t.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{yield t.beforeStateQueue.runMiddleware(a)}catch(d){a=i,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(d))}return a?t.reloadAndSetCurrentUserOrClear(a):t.directlySetCurrentUser(null)}return Pe(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===a._redirectEventId?t.directlySetCurrentUser(a):t.reloadAndSetCurrentUserOrClear(a)})()}tryRedirectSignIn(e){var t=this;return(0,fe.Z)(function*(){let r=null;try{r=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch{yield t._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var t=this;return(0,fe.Z)(function*(){var r;try{yield sd(e)}catch(i){if("auth/network-request-failed"!==(null===(r=i)||void 0===r?void 0:r.code))return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function NE(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return(0,fe.Z)(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return(0,fe.Z)(function*(){const r=e?(0,k.m9)(e):null;return r&&Pe(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))})()}_updateCurrentUser(e,t=!1){var r=this;return(0,fe.Z)(function*(){if(!r._deleted)return e&&Pe(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),t||(yield r.beforeStateQueue.runMiddleware(e)),r.queue((0,fe.Z)(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return(0,fe.Z)(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var t=this;return this.queue((0,fe.Z)(function*(){yield t.assertedPersistence.setPersistence(Pi(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new k.LL("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var r=this;return(0,fe.Z)(function*(){const i=yield r.getOrInitRedirectPersistenceManager(t);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return(0,fe.Z)(function*(){if(!t.redirectPersistenceManager){const r=e&&Pi(e)||t._popupRedirectResolver;Pe(r,t,"argument-error"),t.redirectPersistenceManager=yield os.create(t,[Pi(r._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return(0,fe.Z)(function*(){var r,i;return t._isInitialized&&(yield t.queue((0,fe.Z)(function*(){}))),(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return(0,fe.Z)(function*(){if(e===t.currentUser)return t.queue((0,fe.Z)(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a="function"==typeof t?t:t.next.bind(t),l=this._isInitialized?Promise.resolve():this._initializationPromise;return Pe(l,this,"internal-error"),l.then(()=>a(this.currentUser)),"function"==typeof t?e.addObserver(t,r,i):e.addObserver(t)}directlySetCurrentUser(e){var t=this;return(0,fe.Z)(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=UE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return(0,fe.Z)(function*(){var t;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();return i&&(r["X-Firebase-Client"]=i),r})()}}function ei(n){return(0,k.m9)(n)}class K_{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,k.ne)(t=>this.observer=t)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function VE(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function cd(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function Ms(n,e){return cp.apply(this,arguments)}function cp(){return(cp=(0,fe.Z)(function*(n,e){return pi(n,"POST","/v1/accounts:signInWithIdp",zn(n,e))})).apply(this,arguments)}class Yo{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class KE extends Yo{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class mi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return(0,fe.Z)(function*(){const a=yield Fi._fromIdTokenResponse(e,r,i),l=ay(r);return new mi({user:a,providerId:l,_tokenResponse:r,operationType:t})})()}static _forOperation(e,t,r){return(0,fe.Z)(function*(){yield e._updateTokensIfNecessary(r,!0);const i=ay(r);return new mi({user:e,providerId:i,_tokenResponse:r,operationType:t})})()}}function ay(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class fp extends k.ZR{constructor(e,t,r,i){var a;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,fp.prototype),this.customData={appName:e.name,tenantId:null!==(a=e.tenantId)&&void 0!==a?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new fp(e,t,r,i)}}function QE(n,e,t,r){return("reauthenticate"===e?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw"auth/multi-factor-auth-required"===a.code?fp._fromErrorAndOperation(n,a,e,r):a})}function mp(n,e){return cy.apply(this,arguments)}function cy(){return(cy=(0,fe.Z)(function*(n,e,t=!1){const r=yield Oi(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return mi._forOperation(n,"link",r)})).apply(this,arguments)}function dy(){return(dy=(0,fe.Z)(function*(n,e,t=!1){var r;const{auth:i}=n,a="reauthenticate";try{const l=yield Oi(n,QE(i,a,e,n),t);Pe(l.idToken,i,"internal-error");const d=tp(l.idToken);Pe(d,i,"internal-error");const{sub:p}=d;return Pe(n.uid===p,i,"user-mismatch"),mi._forOperation(n,a,l)}catch(l){throw"auth/user-not-found"===(null===(r=l)||void 0===r?void 0:r.code)&&Hr(i,"user-mismatch"),l}})).apply(this,arguments)}function yp(){return(yp=(0,fe.Z)(function*(n,e,t=!1){const r="signIn",i=yield QE(n,r,e),a=yield mi._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(a.user)),a})).apply(this,arguments)}const tu="__sak";class Dy{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(tu,"1"),this.storage.removeItem(tu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const wd=(()=>{class n extends Dy{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function s0(){const n=(0,k.z$)();return Ko(n)||ld(n)}()&&function NS(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=q_(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),a=this.localCache[r];i!==a&&t(r,a,i)}}onStorageEvent(t,r=!1){if(!t.key)return void this.forAllChangedKeys((d,p,m)=>{this.notifyListeners(d,m)});const i=t.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const d=this.storage.getItem(i);if(t.newValue!==d)null!==t.newValue?this.storage.setItem(i,t.newValue):this.storage.removeItem(i);else if(this.localCache[i]===t.newValue&&!r)return}const a=()=>{const d=this.storage.getItem(i);!r&&this.localCache[i]===d||this.notifyListeners(i,d)},l=this.storage.getItem(i);!function FE(){return(0,k.w1)()&&10===document.documentMode}()||l===t.newValue||t.newValue===t.oldValue?a():setTimeout(a,10)}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const a of Array.from(i))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(t,r){var i=()=>super._set,a=this;return(0,fe.Z)(function*(){yield i().call(a,t,r),a.localCache[t]=JSON.stringify(r)})()}_get(t){var r=()=>super._get,i=this;return(0,fe.Z)(function*(){const a=yield r().call(i,t);return i.localCache[t]=JSON.stringify(a),a})()}_remove(t){var r=()=>super._remove,i=this;return(0,fe.Z)(function*(){yield r().call(i,t),delete i.localCache[t]})()}}return n.type="LOCAL",n})(),a0=(()=>{class n extends Dy{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})();let u0=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(a=>a.isListeningto(t));if(r)return r;const i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){var r=this;return(0,fe.Z)(function*(){const i=t,{eventId:a,eventType:l,data:d}=i.data,p=r.handlersMap[l];if(!p?.size)return;i.ports[0].postMessage({status:"ack",eventId:a,eventType:l});const m=Array.from(p).map(function(){var T=(0,fe.Z)(function*(S){return S(i.origin,d)});return function(S){return T.apply(this,arguments)}}()),I=yield function uA(n){return Promise.all(n.map(function(){var e=(0,fe.Z)(function*(t){try{return{fulfilled:!0,value:yield t}}catch(r){return{fulfilled:!1,reason:r}}});return function(t){return e.apply(this,arguments)}}()))}(m);i.ports[0].postMessage({status:"done",eventId:a,eventType:l,response:I})})()}_subscribe(t,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||0===this.handlersMap[t].size)&&delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return n.receivers=[],n})();function Op(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(10*Math.random());return n+t}class l0{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){var i=this;return(0,fe.Z)(function*(){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,d;return new Promise((p,m)=>{const I=Op("",20);a.port1.start();const T=setTimeout(()=>{m(new Error("unsupported_event"))},r);d={messageChannel:a,onMessage(S){const x=S;if(x.data.eventId===I)switch(x.data.status){case"ack":clearTimeout(T),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),p(x.data.response);break;default:clearTimeout(T),clearTimeout(l),m(new Error("invalid_response"))}}},i.handlers.add(d),a.port1.addEventListener("message",d.onMessage),i.target.postMessage({eventType:e,eventId:I,data:t},[a.port2])}).finally(()=>{d&&i.removeMessageHandler(d)})})()}}function qn(){return window}function Sy(){return typeof qn().WorkerGlobalScope<"u"&&"function"==typeof qn().importScripts}function d0(){return(d0=(0,fe.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const cA="firebaseLocalStorageDb",nu="firebaseLocalStorage",f0="fbase_key";class Id{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ed(n,e){return n.transaction([nu],e?"readwrite":"readonly").objectStore(nu)}function Ay(){const n=indexedDB.open(cA,1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(nu,{keyPath:f0})}catch(i){t(i)}}),n.addEventListener("success",(0,fe.Z)(function*(){const r=n.result;r.objectStoreNames.contains(nu)?e(r):(r.close(),yield function Td(){const n=indexedDB.deleteDatabase(cA);return new Id(n).toPromise()}(),e(yield Ay()))}))})}function p0(n,e,t){return xy.apply(this,arguments)}function xy(){return(xy=(0,fe.Z)(function*(n,e,t){const r=Ed(n,!0).put({[f0]:e,value:t});return new Id(r).toPromise()})).apply(this,arguments)}function Ry(){return(Ry=(0,fe.Z)(function*(n,e){const t=Ed(n,!1).get(e),r=yield new Id(t).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function My(n,e){const t=Ed(n,!0).delete(e);return new Id(t).toPromise()}const pA=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var t=this;return(0,fe.Z)(function*(){return t.db||(t.db=yield Ay()),t.db})()}_withRetries(t){var r=this;return(0,fe.Z)(function*(){let i=0;for(;;)try{const a=yield r._openDb();return yield t(a)}catch(a){if(i++>3)throw a;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var t=this;return(0,fe.Z)(function*(){return Sy()?t.initializeReceiver():t.initializeSender()})()}initializeReceiver(){var t=this;return(0,fe.Z)(function*(){t.receiver=u0._getInstance(function qP(){return Sy()?self:null}()),t.receiver._subscribe("keyChanged",function(){var r=(0,fe.Z)(function*(i,a){return{keyProcessed:(yield t._poll()).includes(a.key)}});return function(i,a){return r.apply(this,arguments)}}()),t.receiver._subscribe("ping",function(){var r=(0,fe.Z)(function*(i,a){return["keyChanged"]});return function(i,a){return r.apply(this,arguments)}}())})()}initializeSender(){var t=this;return(0,fe.Z)(function*(){var r,i;if(t.activeServiceWorker=yield function lA(){return d0.apply(this,arguments)}(),!t.activeServiceWorker)return;t.sender=new l0(t.activeServiceWorker);const a=yield t.sender._send("ping",{},800);!a||(null===(r=a[0])||void 0===r?void 0:r.fulfilled)&&(null===(i=a[0])||void 0===i?void 0:i.value.includes("keyChanged"))&&(t.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(t){var r=this;return(0,fe.Z)(function*(){if(r.sender&&r.activeServiceWorker&&function zP(){var n;return(null===(n=navigator?.serviceWorker)||void 0===n?void 0:n.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:t},r.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,fe.Z)(function*(){try{if(!indexedDB)return!1;const t=yield Ay();return yield p0(t,tu,"1"),yield My(t,tu),!0}catch{}return!1})()}_withPendingWrite(t){var r=this;return(0,fe.Z)(function*(){r.pendingWrites++;try{yield t()}finally{r.pendingWrites--}})()}_set(t,r){var i=this;return(0,fe.Z)(function*(){return i._withPendingWrite((0,fe.Z)(function*(){return yield i._withRetries(a=>p0(a,t,r)),i.localCache[t]=r,i.notifyServiceWorker(t)}))})()}_get(t){var r=this;return(0,fe.Z)(function*(){const i=yield r._withRetries(a=>function dA(n,e){return Ry.apply(this,arguments)}(a,t));return r.localCache[t]=i,i})()}_remove(t){var r=this;return(0,fe.Z)(function*(){return r._withPendingWrite((0,fe.Z)(function*(){return yield r._withRetries(i=>My(i,t)),delete r.localCache[t],r.notifyServiceWorker(t)}))})()}_poll(){var t=this;return(0,fe.Z)(function*(){const r=yield t._withRetries(l=>{const d=Ed(l,!1).getAll();return new Id(d).toPromise()});if(!r)return[];if(0!==t.pendingWrites)return[];const i=[],a=new Set;for(const{fbase_key:l,value:d}of r)a.add(l),JSON.stringify(t.localCache[l])!==JSON.stringify(d)&&(t.notifyListeners(l,d),i.push(l));for(const l of Object.keys(t.localCache))t.localCache[l]&&!a.has(l)&&(t.notifyListeners(l,null),i.push(l));return i})()}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const a of Array.from(i))a(r)}startPolling(){var t=this;this.stopPolling(),this.pollTimer=setInterval((0,fe.Z)(function*(){return t._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return n.type="LOCAL",n})();function Fp(n){return`__${n}${Math.floor(1e6*Math.random())}`}function ao(n,e){return e?Pi(e):(Pe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}Fp("rcb"),new qa(3e4,6e4);class Uy extends class OS{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return xs("not implemented")}_getIdTokenResponse(e){return xs("not implemented")}_linkToIdToken(e,t){return xs("not implemented")}_getReauthenticationResolver(e){return xs("not implemented")}}{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ms(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ms(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ms(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function xA(n){return function hy(n,e){return yp.apply(this,arguments)}(n.auth,new Uy(n),n.bypassAuthState)}function Vy(n){const{auth:e,user:t}=n;return Pe(t,e,"internal-error"),function _d(n,e){return dy.apply(this,arguments)}(t,new Uy(n),n.bypassAuthState)}function RA(n){return By.apply(this,arguments)}function By(){return(By=(0,fe.Z)(function*(n){const{auth:e,user:t}=n;return Pe(t,e,"internal-error"),mp(t,new Uy(n),n.bypassAuthState)})).apply(this,arguments)}new qa(2e3,1e4);const ru=new Map;class b0 extends class ml{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=(0,fe.Z)(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(a){e.reject(a)}});return function(r,i){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return(0,fe.Z)(function*(){const{urlResponse:r,sessionId:i,postBody:a,tenantId:l,error:d,type:p}=e;if(d)return void t.reject(d);const m={auth:t.auth,requestUri:r,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(p)(m))}catch(I){t.reject(I)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return xA;case"linkViaPopup":case"linkViaRedirect":return RA;case"reauthViaPopup":case"reauthViaRedirect":return Vy;default:Hr(this.auth,"internal-error")}}resolve(e){is(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){is(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,t=this;return(0,fe.Z)(function*(){let r=ru.get(t.auth._key());if(!r){try{const a=(yield function D0(n,e){return Vp.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;r=()=>Promise.resolve(a)}catch(i){r=()=>Promise.reject(i)}ru.set(t.auth._key(),r)}return t.bypassAuthState||ru.set(t.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,r=this;return(0,fe.Z)(function*(){if("signInViaRedirect"===e.type)return t().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,t().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return(0,fe.Z)(function*(){})()}cleanUp(){}}function Vp(){return(Vp=(0,fe.Z)(function*(n,e){const t=Hy(e),r=S0(n);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(t));return yield r._remove(t),i})).apply(this,arguments)}function kA(n,e){ru.set(n._key(),e)}function S0(n){return Pi(n._redirectPersistence)}function Hy(n){return so("pendingRedirect",n.config.apiKey,n.name)}function R0(n,e){return qy.apply(this,arguments)}function qy(){return(qy=(0,fe.Z)(function*(n,e,t=!1){const r=ei(n),i=ao(r,e),l=yield new b0(r,i,t).execute();return l&&!t&&(delete l.user._redirectEventId,yield r._persistUserIfCurrent(l.user),yield r._setRedirectUser(null,e)),l})).apply(this,arguments)}class LA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function k0(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _l(n);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!_l(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";t.onError(As(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(N0(e))}saveEventToCache(e){this.cachedEventUids.add(N0(e)),this.lastProcessedEventTime=Date.now()}}function N0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function _l({type:n,error:e}){return"unknown"===n&&"auth/no-auth-event"===e?.code}function P0(n){return $p.apply(this,arguments)}function $p(){return($p=(0,fe.Z)(function*(n,e={}){return Bn(n,"GET","/v1/projects",e)})).apply(this,arguments)}const O0=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,L0=/^https?/;function Yy(){return(Yy=(0,fe.Z)(function*(n){if(n.config.emulator)return;const{authorizedDomains:e}=yield P0(n);for(const t of e)try{if(rO(t))return}catch{}Hr(n,"unauthorized-domain")})).apply(this,arguments)}function rO(n){const e=Yf(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return""===l.hostname&&""===r?"chrome-extension:"===t&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===t&&l.hostname===r}if(!L0.test(t))return!1;if(O0.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const UA=new qa(3e4,6e4);function F0(){const n=qn().___jsl;if(n?.H)for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}let jp=null;function BA(n){return jp=jp||function VA(n){return new Promise((e,t)=>{var r,i,a;function l(){F0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{F0(),t(As(n,"network-request-failed"))},timeout:UA.get()})}if(null!==(i=null===(r=qn().gapi)||void 0===r?void 0:r.iframes)&&void 0!==i&&i.Iframe)e(gapi.iframes.getContext());else{if(null===(a=qn().gapi)||void 0===a||!a.load){const d=Fp("iframefcb");return qn()[d]=()=>{gapi.load?l():t(As(n,"network-request-failed"))},function y0(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=As("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",function _0(){var n,e;return null!==(e=null===(n=document.getElementsByTagName("head"))||void 0===n?void 0:n[0])&&void 0!==e?e:document}().appendChild(r)})}(`https://apis.google.com/js/api.js?onload=${d}`).catch(p=>t(p))}l()}}).catch(e=>{throw jp=null,e})}(n),jp}const xd=new qa(5e3,15e3),Ns={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Zy(n){const e=n.config;Pe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?ss(e,"emulator/auth/iframe"):`https://${n.config.authDomain}/__/auth/iframe`,r={apiKey:e.apiKey,appName:n.name,v:Kt.SDK_VERSION},i=jA.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${(0,k.xO)(r).slice(1)}`}function Xy(){return Xy=(0,fe.Z)(function*(n){const e=yield BA(n),t=qn().gapi;return Pe(t,n,"internal-error"),e.open({where:document.body,url:Zy(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ns,dontclear:!0},r=>new Promise(function(){var i=(0,fe.Z)(function*(a,l){yield r.restyle({setHideOnLeave:!1});const d=As(n,"network-request-failed"),p=qn().setTimeout(()=>{l(d)},xd.get());function m(){qn().clearTimeout(p),a(r)}r.ping(m).then(m,()=>{l(d)})});return function(a,l){return i.apply(this,arguments)}}()))}),Xy.apply(this,arguments)}const HA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class U0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function j0(n,e,t,r,i,a){Pe(n.config.authDomain,n,"auth-domain-config-required"),Pe(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Kt.SDK_VERSION,eventId:i};if(e instanceof Yo){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",(0,k.xb)(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries(a||{}))l[p]=m}if(e instanceof KE){const p=e.getScopes().filter(m=>""!==m);p.length>0&&(l.scopes=p.join(","))}n.tenantId&&(l.tid=n.tenantId);const d=l;for(const p of Object.keys(d))void 0===d[p]&&delete d[p];return`${function zA({config:n}){return n.emulator?ss(n,"emulator/auth/handler"):`https://${n.authDomain}/__/auth/handler`}(n)}?${(0,k.xO)(d).slice(1)}`}const H0="webStorageSupport",tv=class ev{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=a0,this._completeRedirectFn=R0,this._overrideRedirectResult=kA}_openPopup(e,t,r,i){var a=this;return(0,fe.Z)(function*(){var l;is(null===(l=a.eventManagers[e._key()])||void 0===l?void 0:l.manager,"_initialize() not called before _openPopup()");const d=j0(e,t,r,Yf(),i);return function V0(n,e,t,r=500,i=600){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const p=Object.assign(Object.assign({},HA),{width:r.toString(),height:i.toString(),top:a,left:l}),m=(0,k.z$)().toLowerCase();t&&(d=Ja(m)?"_blank":t),Xa(m)&&(e=e||"http://localhost",p.scrollbars="yes");const I=Object.entries(p).reduce((S,[x,O])=>`${S}${x}=${O},`,"");if(function LE(n=(0,k.z$)()){var e;return ld(n)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(m)&&"_self"!==d)return function B0(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}(e||"",d),new U0(null);const T=window.open(e||"",d,I);Pe(T,n,"popup-blocked");try{T.focus()}catch{}return new U0(T)}(e,d,Op())})()}_openRedirect(e,t,r,i){var a=this;return(0,fe.Z)(function*(){return yield a._originValidation(e),function c0(n){qn().location.href=n}(j0(e,t,r,Yf(),i)),new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(is(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){var t=this;return(0,fe.Z)(function*(){const r=yield function Rd(n){return Xy.apply(this,arguments)}(e),i=new LA(e);return r.register("authEvent",a=>(Pe(a?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:i},t.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(H0,{type:H0},i=>{var a;const l=null===(a=i?.[0])||void 0===a?void 0:a[H0];void 0!==l&&t(!!l),Hr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function FA(n){return Yy.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return q_()||Ko()||ld()}};var W0="@firebase/auth",z0="0.20.11";class KA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return(0,fe.Z)(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{var i;e((null===(i=r)||void 0===i?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);!t||(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const K0=(0,k.Pz)("authIdTokenMaxAge")||300;let Y0=null;const Q0=n=>function(){var e=(0,fe.Z)(function*(t){const r=t&&(yield t.getIdTokenResult()),i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>K0)return;const a=r?.token;Y0!==a&&(Y0=a,yield fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))});return function(t){return e.apply(this,arguments)}}();function Z0(n=(0,Kt.getApp)()){const e=(0,Kt._getProvider)(n,"auth");if(e.isInitialized())return e.getImmediate();const t=function AP(n,e){const t=(0,Kt._getProvider)(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if((0,k.vZ)(a,e??{}))return i;Hr(i,"already-initialized")}return t.initialize({options:e})}(n,{popupRedirectResolver:tv,persistence:[pA,wd,a0]}),r=(0,k.Pz)("authTokenSyncURL");if(r){const a=Q0(r);(function Tn(n,e,t){(0,k.m9)(n).beforeAuthStateChanged(e,t)})(t,a,()=>a(t.currentUser)),function Mp(n,e,t,r){(0,k.m9)(n).onIdTokenChanged(e,t,r)}(t,l=>a(l))}const i=(0,k.q4)("auth");return i&&function Y_(n,e,t){const r=ei(n);Pe(r._canInitEmulator,r,"emulator-config-failed"),Pe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!t?.disableWarnings,a=VE(e),{host:l,port:d}=function np(n){const e=VE(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:cd(r.substr(a.length+1))}}{const[a,l]=r.split(":");return{host:a,port:cd(l)}}}(e);r.config.emulator={url:`${a}//${l}${null===d?"":`:${d}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:l,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function Q_(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",n):n())}()}(t,`http://${i}`),t}!function q0(n){(0,Kt._registerComponent)(new Ha.wA("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),{apiKey:a,authDomain:l}=r.options;return((d,p)=>{Pe(a&&!a.includes(":"),"invalid-api-key",{appName:d.name}),Pe(!l?.includes(":"),"argument-error",{appName:d.name});const m={apiKey:a,authDomain:l,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:UE(n)},I=new PS(d,p,m);return function O_(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Pi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}(I,t),I})(r,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),(0,Kt._registerComponent)(new Ha.wA("auth-internal",e=>{const t=ei(e.getProvider("auth").getImmediate());return new KA(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Kt.registerVersion)(W0,z0,function YA(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(n)),(0,Kt.registerVersion)(W0,z0,"esm2017")}("Browser");class zp{constructor(e){return e}}class qp{constructor(){return(0,Ve.vb)("auth")}}const Kp=new v.OlP("angularfire2.auth-instances");function Gr(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new zp(r)}}const yl={provide:qp,deps:[[new v.FiY,Kp]]},ZA={provide:zp,useFactory:function QA(n,e){const t=(0,Ve.JM)("auth",n,e);return t&&new zp(t)},deps:[[new v.FiY,Kp],zo]};let XA=(()=>{class n{constructor(){(0,ro.KN)("angularfire",Ve.q4.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=v.oAB({type:n}),n.\u0275inj=v.cJS({providers:[ZA,yl]}),n})();function sO(n,...e){return{ngModule:XA,providers:[{provide:Kp,useFactory:Gr(n),multi:!0,deps:[v.R0b,v.zs3,Ve.HU,qc,[new v.FiY,Wf],...e]}]}}const tT=(0,Ve.u3)(Z0,!0),mx="@firebase/database",Nd="0.13.10";let iT="";class Qp{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,k.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,k.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class oT{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,k.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const iv=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Qp(e)}}catch{}return new oT},vl=iv("localStorage"),kd=iv("sessionStorage"),iu=new Cs.Yd("@firebase/database"),aT=function(){let n=1;return function(){return n++}}(),sv=function(n){const e=(0,k.dS)(n),t=new k.gQ;t.update(e);const r=t.digest();return k.US.encodeByteArray(r)},Zp=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Zp.apply(null,r):e+="object"==typeof r?(0,k.Wl)(r):r,e+=" "}return e};let wl=null,uT=!0;const kn=function(...n){if(!0===uT&&(uT=!1,null===wl&&!0===kd.get("logging_enabled")&&function(n,e){(0,k.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(iu.logLevel=Cs.in.VERBOSE,wl=iu.log.bind(iu),e&&kd.set("logging_enabled",!0)):"function"==typeof n?wl=n:(wl=null,kd.remove("logging_enabled"))}(!0)),wl){const e=Zp.apply(null,n);wl(e)}},Pd=function(n){return function(...e){kn(n,...e)}},cT=function(...n){const e="FIREBASE INTERNAL ERROR: "+Zp(...n);iu.error(e)},uo=function(...n){const e=`FIREBASE FATAL ERROR: ${Zp(...n)}`;throw iu.error(e),new Error(e)},Wr=function(...n){const e="FIREBASE WARNING: "+Zp(...n);iu.warn(e)},Xp=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Xo="[MIN_NAME]",ks="[MAX_NAME]",Jo=function(n,e){if(n===e)return 0;if(n===Xo||e===ks)return-1;if(e===Xo||n===ks)return 1;{const t=Ld(n),r=Ld(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},dT=function(n,e){return n===e?0:n<e?-1:1},Jp=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,k.Wl)(e))},_i=function(n){if("object"!=typeof n||null===n)return(0,k.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,k.Wl)(e[r]),t+=":",t+=_i(n[e[r]]);return t+="}",t},hT=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function $n(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const fT=function(n){(0,k.hu)(!Xp(n),"Invalid JSON number");const r=1023;let i,a,l,d,p;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=d+r,l=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const m=[];for(p=52;p;p-=1)m.push(l%2?1:0),l=Math.floor(l/2);for(p=11;p;p-=1)m.push(a%2?1:0),a=Math.floor(a/2);m.push(i?1:0),m.reverse();const I=m.join("");let T="";for(p=0;p<64;p+=8){let S=parseInt(I.substr(p,8),2).toString(16);1===S.length&&(S="0"+S),T+=S}return T.toLowerCase()},wx=new RegExp("^-?(0*)\\d{1,10}$"),Ld=function(n){if(wx.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},su=function(n){try{n()}catch(e){setTimeout(()=>{throw Wr("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Il=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class gT{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Wr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Ex{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(kn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Wr(e)}}let El=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const Ps=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,_T="websocket",yT="long_polling";class lv{constructor(e,t,r,i,a=!1,l="",d=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=vl.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&vl.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Cx(n,e,t){let r;if((0,k.hu)("string"==typeof e,"typeof type must == string"),(0,k.hu)("object"==typeof t,"typeof params must == object"),e===_T)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==yT)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function vT(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return $n(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class wT{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,k.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,k.p$)(this.counters_)}}const cv={},rg={};function IT(n){const e=n.toString();return cv[e]||(cv[e]=new wT),cv[e]}class ET{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&su(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class ea{constructor(e,t,r,i,a,l,d){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Pd(e),this.stats_=IT(t),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),Cx(t,yT,p))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new ET(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,k.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new xT((...a)=>{const[l,d,p,m,I]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=d,this.password=p;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,d]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,d)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Ps.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ea.forceAllow_=!0}static forceDisallow(){ea.forceDisallow_=!0}static isAvailable(){return!((0,k.Yr)()||!ea.forceAllow_&&(ea.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,k.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,k.h$)(t),i=hT(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,k.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,k.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class xT{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,k.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=aT(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=xT.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(d){kn("frame writing exception"),d.stack&&kn(d.stack),kn(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||kn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,k.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{kn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let pv=null;typeof MozWebSocket<"u"?pv=MozWebSocket:typeof WebSocket<"u"&&(pv=WebSocket);let Vd=(()=>{class n{constructor(t,r,i,a,l,d,p){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Pd(this.connId),this.stats_=IT(r),this.connURL=n.connectionURL_(r,d,p,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,l){const d={v:"5"};return!(0,k.Yr)()&&typeof location<"u"&&location.hostname&&Ps.test(location.hostname)&&(d.r="f"),r&&(d.s=r),i&&(d.ls=i),a&&(d.ac=a),l&&(d.p=l),Cx(t,_T,d)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,vl.set("previous_websocket_failure",!0);try{let i;if((0,k.Yr)()){i={headers:{"User-Agent":`Firebase/5/${iT}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,d=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;d&&(i.proxy={origin:d})}this.mySock=new pv(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==pv&&!n.forceDisallow_}static previouslyFailed(){return vl.isInMemoryStorage||!0===vl.get("previous_websocket_failure")}markConnectionHealthy(){vl.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,k.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,k.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,k.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=hT(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),RT=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[ea,Vd]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Vd&&Vd.isAvailable();let i=r&&!Vd.previouslyFailed();if(t.webSocketOnly&&(r||Wr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Vd];else{const a=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class Lx{constructor(e,t,r,i,a,l,d,p,m,I){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=d,this.onDisconnect_=p,this.onKill_=m,this.lastSessionId=I,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Pd("c:"+this.id+":"),this.transportManager_=new RT(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Il(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Jp("t",e),r=Jp("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Jp("t",e),r=Jp("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Jp("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?cT("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):cT("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Wr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Il(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Il(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(vl.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Fx{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class _v{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,k.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,k.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class ug extends _v{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,k.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new ug}getInitialEvent(e){return(0,k.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class qt{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function jt(){return new qt("")}function xt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function ho(n){return n.pieces_.length-n.pieceNum_}function tn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new qt(n.pieces_,e)}function yv(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function ou(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function Ux(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new qt(e,0)}function cn(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof qt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new qt(t,0)}function At(n){return n.pieceNum_>=n.pieces_.length}function zr(n,e){const t=xt(n),r=xt(e);if(null===t)return e;if(t===r)return zr(tn(n),tn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function OT(n,e){if(ho(n)!==ho(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function as(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(ho(n)>ho(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class Bx{constructor(e,t){this.errorPrefix_=t,this.parts_=ou(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,k.ug)(this.parts_[r]);Hx(this)}}function Hx(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Tl(n))}function Tl(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class LT extends _v{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new LT}getInitialEvent(e){return(0,k.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const lg=1e3;let o,Cl=(()=>{class n extends Fx{constructor(t,r,i,a,l,d,p,m){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=d,this.appCheckTokenProvider_=p,this.authOverride_=m,this.id=n.nextPersistentConnectionId_++,this.log_=Pd("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=lg,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,m&&!(0,k.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");LT.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&ug.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,k.Wl)(l)),(0,k.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new k.BH,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:d=>{const p=d.d;"ok"===d.s?r.resolve(p):r.reject(p)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,d=t._path.toString();this.log_("Listen called for "+d+" "+l),this.listens.has(d)||this.listens.set(d,new Map),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,k.hu)(!this.listens.get(d).has(l),"listen() called twice for same path/queryId.");const p={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(d).set(l,p),this.connected_&&this.sendListen_(p)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,p=>{const m=p.d,I=p.s;n.warnOnListenWarnings_(m,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",p),"ok"!==I&&this.removeListen_(i,a),t.onComplete&&t.onComplete(I,m))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,k.r3)(t,"w")){const i=(0,k.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();Wr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,k.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,k.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,d=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,d=>{a&&setTimeout(()=>{a(d.s,d.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const d={p:r,d:i};void 0!==l&&(d.h=l),this.outstandingPuts_.push({action:t,request:d,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,k.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):cT("Unrecognized action received from server: "+(0,k.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,k.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=lg,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=lg,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=lg),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,fe.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,d=t.lastSessionId;let p=!1,m=null;const I=function(){m?m.close():(p=!0,a())};t.realtime_={close:I,sendRequest:function(x){(0,k.hu)(m,"sendRequest call when we're not connected not allowed."),m.sendRequest(x)}};const S=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[x,O]=yield Promise.all([t.authTokenProvider_.getToken(S),t.appCheckTokenProvider_.getToken(S)]);p?kn("getToken() completed but was canceled"):(kn("getToken() completed. Creating connection."),t.authToken_=x&&x.accessToken,t.appCheckToken_=O&&O.token,m=new Lx(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,ne=>{Wr(ne+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},d))}catch(x){t.log_("Failed to get token: "+x),p||(t.repoInfo_.nodeAdmin&&Wr(x),I())}}})()}interrupt(t){kn("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){kn("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,k.xb)(this.interruptReasons_)&&(this.reconnectDelay_=lg,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>_i(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new qt(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){kn("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){kn("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,k.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+iT.replace(/\./g,"-")]=1,(0,k.uI)()?t["framework.cordova"]=1:(0,k.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=ug.getInstance().currentlyOnline();return(0,k.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Vt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Vt(e,t)}}class s{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Vt(Xo,e),i=new Vt(Xo,t);return 0!==this.compare(r,i)}minPost(){return Vt.MIN}}class u extends s{static get __EMPTY_NODE(){return o}static set __EMPTY_NODE(e){o=e}compare(e,t){return Jo(e.name,t.name)}isDefinedOn(e){throw(0,k.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Vt.MIN}maxPost(){return new Vt(ks,o)}makePost(e,t){return(0,k.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Vt(e,o)}toString(){return".key"}}const c=new u;class h{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let D,f=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??_.EMPTY_NODE,this.right=l??_.EMPTY_NODE}copy(t,r,i,a,l){return new n(t??this.key,r??this.value,i??this.color,a??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return _.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return _.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class _{constructor(e,t=_.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new _(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,f.BLACK,null,null))}remove(e){return new _(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,f.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new h(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new h(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new h(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new h(this.root_,null,this.comparator_,!0,e)}}function y(n,e){return Jo(n.name,e.name)}function C(n,e){return Jo(n,e)}_.EMPTY_NODE=new class g{copy(e,t,r,i,a){return this}insert(e,t,r){return new f(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const L=function(n){return"number"==typeof n?"number:"+fT(n):"string:"+n},G=function(n){if(n.isLeafNode()){const e=n.val();(0,k.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,k.r3)(e,".sv"),"Priority must be a string or number.")}else(0,k.hu)(n===D||n.isEmpty(),"priority of unexpected type.");(0,k.hu)(n===D||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let ae,Re,He,ye=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,k.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),G(this.priorityNode_)}static set __childrenNodeConstructor(t){ae=t}static get __childrenNodeConstructor(){return ae}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return At(t)?this:".priority"===xt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=xt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,k.hu)(".priority"!==i||1===ho(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(tn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+L(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?fT(this.value_):this.value_,this.lazyHash_=sv(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,k.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,k.hu)(a>=0,"Unknown leaf type: "+r),(0,k.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const nt=new class ut extends s{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?Jo(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Vt.MIN}maxPost(){return new Vt(ks,new ye("[PRIORITY-POST]",He))}makePost(e,t){const r=Re(e);return new Vt(t,new ye("[PRIORITY-POST]",r))}toString(){return".priority"}},hn=Math.log(2);class au{constructor(e){this.count=parseInt(Math.log(e+1)/hn,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const bl=function(n,e,t,r){n.sort(e);const i=function(p,m){const I=m-p;let T,S;if(0===I)return null;if(1===I)return T=n[p],S=t?t(T):T,new f(S,T.node,f.BLACK,null,null);{const x=parseInt(I/2,10)+p,O=i(p,x),ne=i(x+1,m);return T=n[x],S=t?t(T):T,new f(S,T.node,f.BLACK,O,ne)}},d=function(p){let m=null,I=null,T=n.length;const S=function(O,ne){const se=T-O,Ke=T;T-=O;const Xe=i(se+1,Ke),Qe=n[se],Ct=t?t(Qe):Qe;x(new f(Ct,Qe.node,ne,null,Xe))},x=function(O){m?(m.left=O,m=O):(I=O,m=O)};for(let O=0;O<p.count;++O){const ne=p.nextBitIsOne(),se=Math.pow(2,p.count-(O+1));ne?S(se,f.BLACK):(S(se,f.BLACK),S(se,f.RED))}return I}(new au(n.length));return new _(r||e,d)};let $d;const ta={};class us{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,k.hu)(ta&&nt,"ChildrenNode.ts has not been loaded"),$d=$d||new us({".priority":ta},{".priority":nt}),$d}get(e){const t=(0,k.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof _?t:null}hasIndex(e){return(0,k.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,k.hu)(e!==c,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(Vt.Wrap);let d,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();d=i?bl(r,e.getCompare()):ta;const p=e.toString(),m=Object.assign({},this.indexSet_);m[p]=e;const I=Object.assign({},this.indexes_);return I[p]=d,new us(I,m)}addToIndexes(e,t){const r=(0,k.UI)(this.indexes_,(i,a)=>{const l=(0,k.DV)(this.indexSet_,a);if((0,k.hu)(l,"Missing index implementation for "+a),i===ta){if(l.isDefinedOn(e.node)){const d=[],p=t.getIterator(Vt.Wrap);let m=p.getNext();for(;m;)m.name!==e.name&&d.push(m),m=p.getNext();return d.push(e),bl(d,l.getCompare())}return ta}{const d=t.get(e.name);let p=i;return d&&(p=p.remove(new Vt(e.name,d))),p.insert(e,e.node)}});return new us(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,k.UI)(this.indexes_,i=>{if(i===ta)return i;{const a=t.get(e.name);return a?i.remove(new Vt(e.name,a)):i}});return new us(r,this.indexSet_)}}let uu,yt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&G(this.priorityNode_),this.children_.isEmpty()&&(0,k.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return uu||(uu=new n(new _(C),null,us.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||uu}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?uu:r}}getChild(t){const r=xt(t);return null===r?this:this.getImmediateChild(r).getChild(tn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,k.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Vt(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const d=a.isEmpty()?uu:this.priorityNode_;return new n(a,d,l)}}updateChild(t,r){const i=xt(t);if(null===i)return r;{(0,k.hu)(".priority"!==xt(t)||1===ho(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(tn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(nt,(d,p)=>{r[d]=p.val(t),i++,l&&n.INTEGER_REGEXP_.test(d)?a=Math.max(a,Number(d)):l=!1}),!t&&l&&a<2*i){const d=[];for(const p in r)d[p]=r[p];return d}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+L(this.getPriority().val())+":"),this.forEachChild(nt,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":sv(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new Vt(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Vt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Vt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,Vt.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,Vt.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===lu?-1:0}withIndex(t){if(t===c||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===c||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(nt),a=r.getIterator(nt);let l=i.getNext(),d=a.getNext();for(;l&&d;){if(l.name!==d.name||!l.node.equals(d.node))return!1;l=i.getNext(),d=a.getNext()}return null===l&&null===d}return!1}return!1}}resolveIndex_(t){return t===c?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const lu=new class vv extends yt{constructor(){super(new _(C),yt.EMPTY_NODE,us.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return yt.EMPTY_NODE}isEmpty(){return!1}};function Pn(n,e=null){if(null===n)return yt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,k.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new ye(n,Pn(e));if(n instanceof Array){let t=yt.EMPTY_NODE;return $n(n,(r,i)=>{if((0,k.r3)(n,r)&&"."!==r.substring(0,1)){const a=Pn(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Pn(e))}{const t=[];let r=!1;if($n(n,(l,d)=>{if("."!==l.substring(0,1)){const p=Pn(d);p.isEmpty()||(r=r||!p.getPriority().isEmpty(),t.push(new Vt(l,p)))}}),0===t.length)return yt.EMPTY_NODE;const a=bl(t,y,l=>l.name,C);if(r){const l=bl(t,nt.getCompare());return new yt(a,Pn(e),new us({".priority":l},{".priority":nt}))}return new yt(a,Pn(e),us.Default)}}Object.defineProperties(Vt,{MIN:{value:new Vt(Xo,yt.EMPTY_NODE)},MAX:{value:new Vt(ks,lu)}}),u.__EMPTY_NODE=yt.EMPTY_NODE,ye.__childrenNodeConstructor=yt,function A(n){D=n}(lu),function ge(n){He=n}(lu),function Ye(n){Re=n}(Pn);class Wx extends s{constructor(e){super(),this.indexPath_=e,(0,k.hu)(!At(e)&&".priority"!==xt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?Jo(e.name,t.name):a}makePost(e,t){const r=Pn(e),i=yt.EMPTY_NODE.updateChild(this.indexPath_,r);return new Vt(t,i)}maxPost(){const e=yt.EMPTY_NODE.updateChild(this.indexPath_,lu);return new Vt(ks,e)}toString(){return ou(this.indexPath_,0).join("/")}}const zx=new class n2 extends s{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Jo(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Vt.MIN}maxPost(){return Vt.MAX}makePost(e,t){const r=Pn(e);return new Vt(t,r)}toString(){return".value"}};function PO(n){return{type:"value",snapshotNode:n}}function dg(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Iv(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Ev(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Kx{constructor(e){this.index_=e}updateChild(e,t,r,i,a,l){(0,k.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=e.getImmediateChild(t);return d.getChild(i).equals(r.getChild(i))&&d.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(Iv(t,d)):(0,k.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?l.trackChildChange(dg(t,r)):l.trackChildChange(Ev(t,r,d))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(nt,(i,a)=>{t.hasChild(i)||r.trackChildChange(Iv(i,a))}),t.isLeafNode()||t.forEachChild(nt,(i,a)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(a)||r.trackChildChange(Ev(i,a,l))}else r.trackChildChange(dg(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?yt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Tv{constructor(e){this.indexedFilter_=new Kx(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Tv.getStartPost_(e),this.endPost_=Tv.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,l){return this.matches(new Vt(t,r))||(r=yt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=yt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(yt.EMPTY_NODE);const a=this;return t.forEachChild(nt,(l,d)=>{a.matches(new Vt(l,d))||(i=i.updateImmediateChild(l,yt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class s2{constructor(e){this.rangedFilter_=new Tv(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,l){return this.rangedFilter_.matches(new Vt(t,r))||(r=yt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,l):this.fullLimitUpdateChild_(e,t,r,a,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=yt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=yt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const d=a.getNext();let p;if(p=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),d)<=0:this.index_.compare(d,this.rangedFilter_.getEndPost())<=0,!p)break;i=i.updateImmediateChild(d.name,d.node),l++}}else{let a,l,d,p;if(i=t.withIndex(this.index_),i=i.updatePriority(yt.EMPTY_NODE),this.reverse_){p=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();const T=this.index_.getCompare();d=(S,x)=>T(x,S)}else p=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),d=this.index_.getCompare();let m=0,I=!1;for(;p.hasNext();){const T=p.getNext();!I&&d(a,T)<=0&&(I=!0),I&&m<this.limit_&&d(T,l)<=0?m++:i=i.updateImmediateChild(T.name,yt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let l;if(this.reverse_){const T=this.index_.getCompare();l=(S,x)=>T(x,S)}else l=this.index_.getCompare();const d=e;(0,k.hu)(d.numChildren()===this.limit_,"");const p=new Vt(t,r),m=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),I=this.rangedFilter_.matches(p);if(d.hasChild(t)){const T=d.getImmediateChild(t);let S=i.getChildAfterChild(this.index_,m,this.reverse_);for(;null!=S&&(S.name===t||d.hasChild(S.name));)S=i.getChildAfterChild(this.index_,S,this.reverse_);const x=null==S?1:l(S,p);if(I&&!r.isEmpty()&&x>=0)return a?.trackChildChange(Ev(t,r,T)),d.updateImmediateChild(t,r);{a?.trackChildChange(Iv(t,T));const ne=d.updateImmediateChild(t,yt.EMPTY_NODE);return null!=S&&this.rangedFilter_.matches(S)?(a?.trackChildChange(dg(S.name,S.node)),ne.updateImmediateChild(S.name,S.node)):ne}}return r.isEmpty()?e:I&&l(m,p)>=0?(null!=a&&(a.trackChildChange(Iv(m.name,m.node)),a.trackChildChange(dg(t,r))),d.updateImmediateChild(t,r).updateImmediateChild(m.name,yt.EMPTY_NODE)):e}}class Yx{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=nt}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Xo}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ks}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,k.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===nt}copy(){const e=new Yx;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function OO(n){const e={};if(n.isDefault())return e;let t;return n.index_===nt?t="$priority":n.index_===zx?t="$value":n.index_===c?t="$key":((0,k.hu)(n.index_ instanceof Wx,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,k.Wl)(t),n.startSet_&&(e.startAt=(0,k.Wl)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,k.Wl)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,k.Wl)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,k.Wl)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function LO(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==nt&&(e.i=n.index_.toString()),e}class VT extends Fx{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Pd("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,k.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=VT.getListenId_(e,r),d={};this.listens_[l]=d;const p=OO(e._queryParams);this.restRequest_(a+".json",p,(m,I)=>{let T=I;if(404===m&&(T=null,m=null),null===m&&this.onDataUpdate_(a,T,!1,r),(0,k.DV)(this.listens_,l)===d){let S;S=m?401===m?"permission_denied":"rest_error:"+m:"ok",i(S,null)}})}unlisten(e,t){const r=VT.getListenId_(e,t);delete this.listens_[r]}get(e){const t=OO(e._queryParams),r=e._path.toString(),i=new k.BH;return this.restRequest_(r+".json",t,(a,l)=>{let d=l;404===a&&(d=null,a=null),null===a?(this.onDataUpdate_(r,d,!1,null),i.resolve(d)):i.reject(new Error(d))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,k.xO)(t);this.log_("Sending REST request for "+l);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(r&&4===d.readyState){this.log_("REST Response for "+l+" received. status:",d.status,"response:",d.responseText);let p=null;if(d.status>=200&&d.status<300){try{p=(0,k.cI)(d.responseText)}catch{Wr("Failed to parse JSON response for "+l+": "+d.responseText)}r(null,p)}else 401!==d.status&&404!==d.status&&Wr("Got unsuccessful REST response for "+l+" Status: "+d.status),r(d.status);r=null}},d.open("GET",l,!0),d.send()})}}class d2{constructor(){this.rootNode_=yt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function BT(){return{value:null,children:new Map}}function hg(n,e,t){if(At(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=xt(e);n.children.has(r)||n.children.set(r,BT()),hg(n.children.get(r),e=tn(e),t)}}function Jx(n,e,t){null!==n.value?t(e,n.value):function h2(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{Jx(i,new qt(e.toString()+"/"+r),t)})}class f2{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&$n(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class m2{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new f2(e);const r=1e4+2e4*Math.random();Il(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;$n(e,(i,a)=>{a>0&&(0,k.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),Il(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Os=(()=>{return(n=Os||(Os={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Os;var n})();function nR(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class $T{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Os.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(At(this.path)){if(null!=this.affectedTree.value)return(0,k.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new qt(e));return new $T(jt(),t,this.revert)}}return(0,k.hu)(xt(this.path)===e,"operationForChild called for unrelated child."),new $T(tn(this.path),this.affectedTree,this.revert)}}class Cv{constructor(e,t){this.source=e,this.path=t,this.type=Os.LISTEN_COMPLETE}operationForChild(e){return At(this.path)?new Cv(this.source,jt()):new Cv(this.source,tn(this.path))}}class jd{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Os.OVERWRITE}operationForChild(e){return At(this.path)?new jd(this.source,jt(),this.snap.getImmediateChild(e)):new jd(this.source,tn(this.path),this.snap)}}class fg{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Os.MERGE}operationForChild(e){if(At(this.path)){const t=this.children.subtree(new qt(e));return t.isEmpty()?null:t.value?new jd(this.source,jt(),t.value):new fg(this.source,jt(),t)}return(0,k.hu)(xt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new fg(this.source,tn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Dl{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(At(e))return this.isFullyInitialized()&&!this.filtered_;const t=xt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class _2{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function bv(n,e,t,r,i,a){const l=r.filter(d=>d.type===t);l.sort((d,p)=>function w2(n,e,t){if(null==e.childName||null==t.childName)throw(0,k.g5)("Should only compare child_ events.");const r=new Vt(e.childName,e.snapshotNode),i=new Vt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,d,p)),l.forEach(d=>{const p=function v2(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,d,a);i.forEach(m=>{m.respondsTo(d.type)&&e.push(m.createEvent(p,n.query_))})})}function jT(n,e){return{eventCache:n,serverCache:e}}function Dv(n,e,t,r){return jT(new Dl(e,t,r),n.serverCache)}function UO(n,e,t,r){return jT(n.eventCache,new Dl(e,t,r))}function HT(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Hd(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let rR;class fn{constructor(e,t=(()=>(rR||(rR=new _(dT)),rR))()){this.value=e,this.children=t}static fromObject(e){let t=new fn(null);return $n(e,(r,i)=>{t=t.set(new qt(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:jt(),value:this.value};if(At(e))return null;{const r=xt(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(tn(e),t);return null!=a?{path:cn(new qt(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(At(e))return this;{const t=xt(e),r=this.children.get(t);return null!==r?r.subtree(tn(e)):new fn(null)}}set(e,t){if(At(e))return new fn(t,this.children);{const r=xt(e),a=(this.children.get(r)||new fn(null)).set(tn(e),t),l=this.children.insert(r,a);return new fn(this.value,l)}}remove(e){if(At(e))return this.children.isEmpty()?new fn(null):new fn(null,this.children);{const t=xt(e),r=this.children.get(t);if(r){const i=r.remove(tn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new fn(null):new fn(this.value,a)}return this}}get(e){if(At(e))return this.value;{const t=xt(e),r=this.children.get(t);return r?r.get(tn(e)):null}}setTree(e,t){if(At(e))return t;{const r=xt(e),a=(this.children.get(r)||new fn(null)).setTree(tn(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new fn(this.value,l)}}fold(e){return this.fold_(jt(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(cn(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,jt(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(At(e))return null;{const a=xt(e),l=this.children.get(a);return l?l.findOnPath_(tn(e),cn(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,jt(),t)}foreachOnPath_(e,t,r){if(At(e))return this;{this.value&&r(t,this.value);const i=xt(e),a=this.children.get(i);return a?a.foreachOnPath_(tn(e),cn(t,i),r):new fn(null)}}foreach(e){this.foreach_(jt(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(cn(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class fo{constructor(e){this.writeTree_=e}static empty(){return new fo(new fn(null))}}function Sv(n,e,t){if(At(e))return new fo(new fn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=zr(i,e);return a=a.updateChild(l,t),new fo(n.writeTree_.set(i,a))}{const i=new fn(t),a=n.writeTree_.setTree(e,i);return new fo(a)}}}function iR(n,e,t){let r=n;return $n(t,(i,a)=>{r=Sv(r,cn(e,i),a)}),r}function VO(n,e){if(At(e))return fo.empty();{const t=n.writeTree_.setTree(e,new fn(null));return new fo(t)}}function sR(n,e){return null!=Gd(n,e)}function Gd(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(zr(t.path,e)):null}function BO(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(nt,(r,i)=>{e.push(new Vt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Vt(r,i.value))}),e}function Sl(n,e){if(At(e))return n;{const t=Gd(n,e);return new fo(null!=t?new fn(t):n.writeTree_.subtree(e))}}function oR(n){return n.writeTree_.isEmpty()}function pg(n,e){return $O(jt(),n.writeTree_,e)}function $O(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,k.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=$O(cn(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(cn(n,".priority"),r)),t}}function GT(n,e){return zO(e,n)}function D2(n,e){if(n.snap)return as(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&as(cn(n.path,t),e))return!0;return!1}function A2(n){return n.visible}function jO(n,e,t){let r=fo.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let d;if(a.snap)as(t,l)?(d=zr(t,l),r=Sv(r,d,a.snap)):as(l,t)&&(d=zr(l,t),r=Sv(r,jt(),a.snap.getChild(d)));else{if(!a.children)throw(0,k.g5)("WriteRecord should have .snap or .children");if(as(t,l))d=zr(t,l),r=iR(r,d,a.children);else if(as(l,t))if(d=zr(l,t),At(d))r=iR(r,jt(),a.children);else{const p=(0,k.DV)(a.children,xt(d));if(p){const m=p.getChild(tn(d));r=Sv(r,jt(),m)}}}}}return r}function HO(n,e,t,r,i){if(r||i){const a=Sl(n.visibleWrites,e);return!i&&oR(a)?t:i||null!=t||sR(a,jt())?pg(jO(n.allWrites,function(m){return(m.visible||i)&&(!r||!~r.indexOf(m.writeId))&&(as(m.path,e)||as(e,m.path))},e),t||yt.EMPTY_NODE):null}{const a=Gd(n.visibleWrites,e);if(null!=a)return a;{const l=Sl(n.visibleWrites,e);return oR(l)?t:null!=t||sR(l,jt())?pg(l,t||yt.EMPTY_NODE):null}}}function WT(n,e,t,r){return HO(n.writeTree,n.treePath,e,t,r)}function aR(n,e){return function x2(n,e,t){let r=yt.EMPTY_NODE;const i=Gd(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(nt,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=Sl(n.visibleWrites,e);return t.forEachChild(nt,(l,d)=>{const p=pg(Sl(a,new qt(l)),d);r=r.updateImmediateChild(l,p)}),BO(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return BO(Sl(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function GO(n,e,t,r){return function R2(n,e,t,r,i){(0,k.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=cn(e,t);if(sR(n.visibleWrites,a))return null;{const l=Sl(n.visibleWrites,a);return oR(l)?i.getChild(t):pg(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function zT(n,e){return function N2(n,e){return Gd(n.visibleWrites,e)}(n.writeTree,cn(n.treePath,e))}function uR(n,e,t){return function M2(n,e,t,r){const i=cn(e,t),a=Gd(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?pg(Sl(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function WO(n,e){return zO(cn(n.treePath,e),n.writeTree)}function zO(n,e){return{treePath:n,writeTree:e}}class L2{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,k.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,k.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,Ev(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,Iv(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,dg(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,k.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,Ev(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const qO=new class F2{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class lR{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Dl(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return uR(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Hd(this.viewCache_),a=function O2(n,e,t,r,i,a){return function k2(n,e,t,r,i,a,l){let d;const p=Sl(n.visibleWrites,e),m=Gd(p,jt());if(null!=m)d=m;else{if(null==t)return[];d=pg(p,t)}if(d=d.withIndex(l),d.isEmpty()||d.isLeafNode())return[];{const I=[],T=l.getCompare(),S=a?d.getReverseIteratorFrom(r,l):d.getIteratorFrom(r,l);let x=S.getNext();for(;x&&I.length<i;)0!==T(x,r)&&I.push(x),x=S.getNext();return I}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function KO(n,e,t,r,i,a){const l=e.eventCache;if(null!=zT(r,t))return e;{let d,p;if(At(t))if((0,k.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const m=Hd(e),T=aR(r,m instanceof yt?m:yt.EMPTY_NODE);d=n.filter.updateFullNode(e.eventCache.getNode(),T,a)}else{const m=WT(r,Hd(e));d=n.filter.updateFullNode(e.eventCache.getNode(),m,a)}else{const m=xt(t);if(".priority"===m){(0,k.hu)(1===ho(t),"Can't have a priority with additional path components");const I=l.getNode();p=e.serverCache.getNode();const T=GO(r,t,I,p);d=null!=T?n.filter.updatePriority(I,T):l.getNode()}else{const I=tn(t);let T;if(l.isCompleteForChild(m)){p=e.serverCache.getNode();const S=GO(r,t,l.getNode(),p);T=null!=S?l.getNode().getImmediateChild(m).updateChild(I,S):l.getNode().getImmediateChild(m)}else T=uR(r,m,e.serverCache);d=null!=T?n.filter.updateChild(l.getNode(),m,T,I,i,a):l.getNode()}}return Dv(e,d,l.isFullyInitialized()||At(t),n.filter.filtersNodes())}}function qT(n,e,t,r,i,a,l,d){const p=e.serverCache;let m;const I=l?n.filter:n.filter.getIndexedFilter();if(At(t))m=I.updateFullNode(p.getNode(),r,null);else if(I.filtersNodes()&&!p.isFiltered()){const x=p.getNode().updateChild(t,r);m=I.updateFullNode(p.getNode(),x,null)}else{const x=xt(t);if(!p.isCompleteForPath(t)&&ho(t)>1)return e;const O=tn(t),se=p.getNode().getImmediateChild(x).updateChild(O,r);m=".priority"===x?I.updatePriority(p.getNode(),se):I.updateChild(p.getNode(),x,se,O,qO,null)}const T=UO(e,m,p.isFullyInitialized()||At(t),I.filtersNodes());return KO(n,T,t,i,new lR(i,T,a),d)}function cR(n,e,t,r,i,a,l){const d=e.eventCache;let p,m;const I=new lR(i,e,a);if(At(t))m=n.filter.updateFullNode(e.eventCache.getNode(),r,l),p=Dv(e,m,!0,n.filter.filtersNodes());else{const T=xt(t);if(".priority"===T)m=n.filter.updatePriority(e.eventCache.getNode(),r),p=Dv(e,m,d.isFullyInitialized(),d.isFiltered());else{const S=tn(t),x=d.getNode().getImmediateChild(T);let O;if(At(S))O=r;else{const ne=I.getCompleteChild(T);O=null!=ne?".priority"===yv(S)&&ne.getChild(Ux(S)).isEmpty()?ne:ne.updateChild(S,r):yt.EMPTY_NODE}p=x.equals(O)?e:Dv(e,n.filter.updateChild(d.getNode(),T,O,S,I,l),d.isFullyInitialized(),n.filter.filtersNodes())}}return p}function YO(n,e){return n.eventCache.isCompleteForChild(e)}function QO(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function dR(n,e,t,r,i,a,l,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let m,p=e;m=At(t)?r:new fn(null).setTree(t,r);const I=e.serverCache.getNode();return m.children.inorderTraversal((T,S)=>{if(I.hasChild(T)){const O=QO(0,e.serverCache.getNode().getImmediateChild(T),S);p=qT(n,p,new qt(T),O,i,a,l,d)}}),m.children.inorderTraversal((T,S)=>{const x=!e.serverCache.isCompleteForChild(T)&&null===S.value;if(!I.hasChild(T)&&!x){const ne=QO(0,e.serverCache.getNode().getImmediateChild(T),S);p=qT(n,p,new qt(T),ne,i,a,l,d)}}),p}class z2{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Kx(r.getIndex()),a=function o2(n){return n.loadsAllData()?new Kx(n.getIndex()):n.hasLimit()?new s2(n):new Tv(n)}(r);this.processor_=function U2(n){return{filter:n}}(a);const l=t.serverCache,d=t.eventCache,p=i.updateFullNode(yt.EMPTY_NODE,l.getNode(),null),m=a.updateFullNode(yt.EMPTY_NODE,d.getNode(),null),I=new Dl(p,l.isFullyInitialized(),i.filtersNodes()),T=new Dl(m,d.isFullyInitialized(),a.filtersNodes());this.viewCache_=jT(T,I),this.eventGenerator_=new _2(this.query_)}get query(){return this.query_}}function Y2(n,e){const t=Hd(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!At(e)&&!t.getImmediateChild(xt(e)).isEmpty())?t.getChild(e):null}function ZO(n){return 0===n.eventRegistrations_.length}function XO(n,e,t){const r=[];if(t){(0,k.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const l=n.eventRegistrations_[a];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function JO(n,e,t,r){e.type===Os.MERGE&&null!==e.source.queryId&&((0,k.hu)(Hd(n.viewCache_),"We should always have a full cache before handling merges"),(0,k.hu)(HT(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function B2(n,e,t,r,i){const a=new L2;let l,d;if(t.type===Os.OVERWRITE){const m=t;m.source.fromUser?l=cR(n,e,m.path,m.snap,r,i,a):((0,k.hu)(m.source.fromServer,"Unknown source."),d=m.source.tagged||e.serverCache.isFiltered()&&!At(m.path),l=qT(n,e,m.path,m.snap,r,i,d,a))}else if(t.type===Os.MERGE){const m=t;m.source.fromUser?l=function j2(n,e,t,r,i,a,l){let d=e;return r.foreach((p,m)=>{const I=cn(t,p);YO(e,xt(I))&&(d=cR(n,d,I,m,i,a,l))}),r.foreach((p,m)=>{const I=cn(t,p);YO(e,xt(I))||(d=cR(n,d,I,m,i,a,l))}),d}(n,e,m.path,m.children,r,i,a):((0,k.hu)(m.source.fromServer,"Unknown source."),d=m.source.tagged||e.serverCache.isFiltered(),l=dR(n,e,m.path,m.children,r,i,d,a))}else if(t.type===Os.ACK_USER_WRITE){const m=t;l=m.revert?function W2(n,e,t,r,i,a){let l;if(null!=zT(r,t))return e;{const d=new lR(r,e,i),p=e.eventCache.getNode();let m;if(At(t)||".priority"===xt(t)){let I;if(e.serverCache.isFullyInitialized())I=WT(r,Hd(e));else{const T=e.serverCache.getNode();(0,k.hu)(T instanceof yt,"serverChildren would be complete if leaf node"),I=aR(r,T)}m=n.filter.updateFullNode(p,I,a)}else{const I=xt(t);let T=uR(r,I,e.serverCache);null==T&&e.serverCache.isCompleteForChild(I)&&(T=p.getImmediateChild(I)),m=null!=T?n.filter.updateChild(p,I,T,tn(t),d,a):e.eventCache.getNode().hasChild(I)?n.filter.updateChild(p,I,yt.EMPTY_NODE,tn(t),d,a):p,m.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=WT(r,Hd(e)),l.isLeafNode()&&(m=n.filter.updateFullNode(m,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=zT(r,jt()),Dv(e,m,l,n.filter.filtersNodes())}}(n,e,m.path,r,i,a):function H2(n,e,t,r,i,a,l){if(null!=zT(i,t))return e;const d=e.serverCache.isFiltered(),p=e.serverCache;if(null!=r.value){if(At(t)&&p.isFullyInitialized()||p.isCompleteForPath(t))return qT(n,e,t,p.getNode().getChild(t),i,a,d,l);if(At(t)){let m=new fn(null);return p.getNode().forEachChild(c,(I,T)=>{m=m.set(new qt(I),T)}),dR(n,e,t,m,i,a,d,l)}return e}{let m=new fn(null);return r.foreach((I,T)=>{const S=cn(t,I);p.isCompleteForPath(S)&&(m=m.set(I,p.getNode().getChild(S)))}),dR(n,e,t,m,i,a,d,l)}}(n,e,m.path,m.affectedTree,r,i,a)}else{if(t.type!==Os.LISTEN_COMPLETE)throw(0,k.g5)("Unknown operation type: "+t.type);l=function G2(n,e,t,r,i){const a=e.serverCache;return KO(n,UO(e,a.getNode(),a.isFullyInitialized()||At(t),a.isFiltered()),t,r,qO,i)}(n,e,t.path,r,a)}const p=a.getChanges();return function $2(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=HT(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(PO(HT(e)))}}(e,l,p),{viewCache:l,changes:p}}(n.processor_,i,e,t,r);return function V2(n,e){(0,k.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,k.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,k.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,e1(n,a.changes,a.viewCache.eventCache.getNode(),null)}function e1(n,e,t,r){return function y2(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function i2(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),bv(n,i,"child_removed",e,r,t),bv(n,i,"child_added",e,r,t),bv(n,i,"child_moved",a,r,t),bv(n,i,"child_changed",e,r,t),bv(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let KT,QT;class t1{constructor(){this.views=new Map}}function hR(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,k.hu)(null!=a,"SyncTree gave us an op for an invalid query."),JO(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(JO(l,e,t,r));return a}}function n1(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let d=WT(t,i?r:null),p=!1;d?p=!0:r instanceof yt?(d=aR(t,r),p=!1):(d=yt.EMPTY_NODE,p=!1);const m=jT(new Dl(d,p,!1),new Dl(r,i,!1));return new z2(e,m)}return l}function r1(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Al(n,e){let t=null;for(const r of n.views.values())t=t||Y2(r,e);return t}function i1(n,e){return e._queryParams.loadsAllData()?YT(n):n.views.get(e._queryIdentifier)}function s1(n,e){return null!=i1(n,e)}function xl(n){return null!=YT(n)}function YT(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let s$=1;class o1{constructor(e){this.listenProvider_=e,this.syncPointTree_=new fn(null),this.pendingWriteTree_=function P2(){return{visibleWrites:fo.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function fR(n,e,t,r,i){return function E2(n,e,t,r,i){(0,k.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Sv(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?gg(n,new jd({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Rl(n,e,t=!1){const r=function C2(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function b2(n,e){const t=n.allWrites.findIndex(d=>d.writeId===e);(0,k.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const d=n.allWrites[l];d.visible&&(l>=t&&D2(d,r.path)?i=!1:as(r.path,d.path)&&(a=!0)),l--}return!!i&&(a?(function S2(n){n.visibleWrites=jO(n.allWrites,A2,jt()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=VO(n.visibleWrites,r.path):$n(r.children,p=>{n.visibleWrites=VO(n.visibleWrites,cn(r.path,p))}),!0))}(n.pendingWriteTree_,e)){let a=new fn(null);return null!=r.snap?a=a.set(jt(),!0):$n(r.children,l=>{a=a.set(new qt(l),!0)}),gg(n,new $T(r.path,a,t))}return[]}function Av(n,e,t){return gg(n,new jd({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function ZT(n,e,t,r,i=!1){const a=e._path,l=n.syncPointTree_.get(a);let d=[];if(l&&("default"===e._queryIdentifier||s1(l,e))){const p=function n$(n,e,t,r){const i=e._queryIdentifier,a=[];let l=[];const d=xl(n);if("default"===i)for(const[p,m]of n.views.entries())l=l.concat(XO(m,t,r)),ZO(m)&&(n.views.delete(p),m.query._queryParams.loadsAllData()||a.push(m.query));else{const p=n.views.get(i);p&&(l=l.concat(XO(p,t,r)),ZO(p)&&(n.views.delete(i),p.query._queryParams.loadsAllData()||a.push(p.query)))}return d&&!xl(n)&&a.push(new(function J2(){return(0,k.hu)(KT,"Reference.ts has not been loaded"),KT}())(e._repo,e._path)),{removed:a,events:l}}(l,e,t,r);(function e$(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const m=p.removed;if(d=p.events,!i){const I=-1!==m.findIndex(S=>S._queryParams.loadsAllData()),T=n.syncPointTree_.findOnPath(a,(S,x)=>xl(x));if(I&&!T){const S=n.syncPointTree_.subtree(a);if(!S.isEmpty()){const x=function h$(n){return n.fold((e,t,r)=>{if(t&&xl(t))return[YT(t)];{let i=[];return t&&(i=r1(t)),$n(r,(a,l)=>{i=i.concat(l)}),i}})}(S);for(let O=0;O<x.length;++O){const ne=x[O],se=ne.query,Ke=c1(n,ne);n.listenProvider_.startListening(Rv(se),xv(n,se),Ke.hashFn,Ke.onComplete)}}}!T&&m.length>0&&!r&&(I?n.listenProvider_.stopListening(Rv(e),null):m.forEach(S=>{const x=n.queryToTagMap.get(JT(S));n.listenProvider_.stopListening(Rv(S),x)}))}!function f$(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=JT(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,m)}return d}function a1(n,e,t,r){const i=gR(n,r);if(null!=i){const a=mR(i),l=a.path,d=a.queryId,p=zr(l,e);return _R(n,l,new jd(nR(d),p,t))}return[]}function pR(n,e,t,r=!1){const i=e._path;let a=null,l=!1;n.syncPointTree_.foreachOnPath(i,(S,x)=>{const O=zr(S,i);a=a||Al(x,O),l=l||xl(x)});let p,d=n.syncPointTree_.get(i);d?(l=l||xl(d),a=a||Al(d,jt())):(d=new t1,n.syncPointTree_=n.syncPointTree_.set(i,d)),null!=a?p=!0:(p=!1,a=yt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((x,O)=>{const ne=Al(O,jt());ne&&(a=a.updateImmediateChild(x,ne))}));const m=s1(d,e);if(!m&&!e._queryParams.loadsAllData()){const S=JT(e);(0,k.hu)(!n.queryToTagMap.has(S),"View does not exist, but we have a tag");const x=function p$(){return s$++}();n.queryToTagMap.set(S,x),n.tagToQueryMap.set(x,S)}let T=function t$(n,e,t,r,i,a){const l=n1(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function Q2(n,e){n.eventRegistrations_.push(e)}(l,t),function Z2(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(nt,(a,l)=>{r.push(dg(a,l))}),t.isFullyInitialized()&&r.push(PO(t.getNode())),e1(n,r,t.getNode(),e)}(l,t)}(d,e,t,GT(n.pendingWriteTree_,i),a,p);if(!m&&!l&&!r){const S=i1(d,e);T=T.concat(function g$(n,e,t){const r=e._path,i=xv(n,e),a=c1(n,t),l=n.listenProvider_.startListening(Rv(e),i,a.hashFn,a.onComplete),d=n.syncPointTree_.subtree(r);if(i)(0,k.hu)(!xl(d.value),"If we're adding a query, it shouldn't be shadowed");else{const p=d.fold((m,I,T)=>{if(!At(m)&&I&&xl(I))return[YT(I).query];{let S=[];return I&&(S=S.concat(r1(I).map(x=>x.query))),$n(T,(x,O)=>{S=S.concat(O)}),S}});for(let m=0;m<p.length;++m){const I=p[m];n.listenProvider_.stopListening(Rv(I),xv(n,I))}}return l}(n,e,S))}return T}function XT(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,d)=>{const m=Al(d,zr(l,e));if(m)return m});return HO(i,e,a,t,!0)}function gg(n,e){return u1(e,n.syncPointTree_,null,GT(n.pendingWriteTree_,jt()))}function u1(n,e,t,r){if(At(n.path))return l1(n,e,t,r);{const i=e.get(jt());null==t&&null!=i&&(t=Al(i,jt()));let a=[];const l=xt(n.path),d=n.operationForChild(l),p=e.children.get(l);if(p&&d){const m=t?t.getImmediateChild(l):null,I=WO(r,l);a=a.concat(u1(d,p,m,I))}return i&&(a=a.concat(hR(i,n,r,t))),a}}function l1(n,e,t,r){const i=e.get(jt());null==t&&null!=i&&(t=Al(i,jt()));let a=[];return e.children.inorderTraversal((l,d)=>{const p=t?t.getImmediateChild(l):null,m=WO(r,l),I=n.operationForChild(l);I&&(a=a.concat(l1(I,d,p,m)))}),i&&(a=a.concat(hR(i,n,r,t))),a}function c1(n,e){const t=e.query,r=xv(n,t);return{hashFn:()=>(function q2(n){return n.viewCache_.serverCache.getNode()}(e)||yt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function l$(n,e,t){const r=gR(n,t);if(r){const i=mR(r),a=i.path,l=i.queryId,d=zr(a,e);return _R(n,a,new Cv(nR(l),d))}return[]}(n,t._path,r):function u$(n,e){return gg(n,new Cv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function ov(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return ZT(n,t,null,a)}}}}function xv(n,e){const t=JT(e);return n.queryToTagMap.get(t)}function JT(n){return n._path.toString()+"$"+n._queryIdentifier}function gR(n,e){return n.tagToQueryMap.get(e)}function mR(n){const e=n.indexOf("$");return(0,k.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new qt(n.substr(0,e))}}function _R(n,e,t){const r=n.syncPointTree_.get(e);return(0,k.hu)(r,"Missing sync point for query tag that we're tracking"),hR(r,t,GT(n.pendingWriteTree_,e),null)}function Rv(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function i$(){return(0,k.hu)(QT,"Reference.ts has not been loaded"),QT}())(n._repo,n._path):n}class yR{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new yR(t)}node(){return this.node_}}class vR{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=cn(this.path_,e);return new vR(this.syncTree_,t)}node(){return XT(this.syncTree_,this.path_)}}const d1=function(n,e,t){return n&&"object"==typeof n?((0,k.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?_$(n[".sv"],e,t):"object"==typeof n[".sv"]?y$(n[".sv"],e):void(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},_$=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,k.hu)(!1,"Unexpected server value: "+n)},y$=function(n,e,t){n.hasOwnProperty("increment")||(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,k.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,k.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},wR=function(n,e,t){return IR(n,new yR(e),t)};function IR(n,e,t){const r=n.getPriority().val(),i=d1(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,d=d1(l.getValue(),e,t);return d!==l.getValue()||i!==l.getPriority().val()?new ye(d,Pn(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new ye(i))),l.forEachChild(nt,(d,p)=>{const m=IR(p,e.getImmediateChild(d),t);m!==p&&(a=a.updateImmediateChild(d,m))}),a}}class ER{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function eC(n,e){let t=e instanceof qt?e:new qt(e),r=n,i=xt(t);for(;null!==i;){const a=(0,k.DV)(r.node.children,i)||{children:{},childCount:0};r=new ER(i,r,a),t=tn(t),i=xt(t)}return r}function Wd(n){return n.node.value}function TR(n,e){n.node.value=e,CR(n)}function f1(n){return n.node.childCount>0}function tC(n,e){$n(n.node.children,(t,r)=>{e(new ER(t,n,r))})}function p1(n,e,t,r){t&&!r&&e(n),tC(n,i=>{p1(i,e,!0,r)}),t&&r&&e(n)}function Mv(n){return new qt(null===n.parent?n.name:Mv(n.parent)+"/"+n.name)}function CR(n){null!==n.parent&&function I$(n,e,t){const r=function v$(n){return void 0===Wd(n)&&!f1(n)}(t),i=(0,k.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,CR(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,CR(n))}(n.parent,n.name,n)}const E$=/[\[\].#$\/\u0000-\u001F\u007F]/,T$=/[\[\].#$\u0000-\u001F\u007F]/,bR=10485760,nC=function(n){return"string"==typeof n&&0!==n.length&&!E$.test(n)},g1=function(n){return"string"==typeof n&&0!==n.length&&!T$.test(n)},kv=function(n,e,t){const r=t instanceof qt?new Bx(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Tl(r));if("function"==typeof e)throw new Error(n+"contains a function "+Tl(r)+" with contents = "+e.toString());if(Xp(e))throw new Error(n+"contains "+e.toString()+" "+Tl(r));if("string"==typeof e&&e.length>bR/3&&(0,k.ug)(e)>bR)throw new Error(n+"contains a string greater than "+bR+" utf8 bytes "+Tl(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if($n(e,(l,d)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!nC(l)))throw new Error(n+" contains an invalid key ("+l+") "+Tl(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function $x(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,k.ug)(e),Hx(n)})(r,l),kv(n,d,r),function jx(n){const e=n.parts_.pop();n.byteLength_-=(0,k.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+Tl(r)+" in addition to actual children.")}},SR=function(n,e,t,r){if(!(r&&void 0===t||g1(t)))throw new Error((0,k.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')};class S${constructor(){this.eventLists_=[],this.recursionDepth_=0}}function rC(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!OT(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function ls(n,e,t){rC(n,t),function v1(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(A$(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}(n,r=>as(r,e)||as(e,r))}function A$(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();wl&&kn("event: "+t.toString()),su(r)}}}class R${constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new S$,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=BT(),this.transactionQueueTree_=new ER,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function I1(n){const t=n.infoData_.getNode(new qt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Ov(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:I1(n)})}function E1(n,e,t,r,i){n.dataUpdateCount++;const a=new qt(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const p=(0,k.UI)(t,m=>Pn(m));l=function c$(n,e,t,r){const i=gR(n,r);if(i){const a=mR(i),l=a.path,d=a.queryId,p=zr(l,e),m=fn.fromObject(t);return _R(n,l,new fg(nR(d),p,m))}return[]}(n.serverSyncTree_,a,p,i)}else{const p=Pn(t);l=a1(n.serverSyncTree_,a,p,i)}else if(r){const p=(0,k.UI)(t,m=>Pn(m));l=function a$(n,e,t){const r=fn.fromObject(t);return gg(n,new fg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,p)}else{const p=Pn(t);l=Av(n.serverSyncTree_,a,p)}let d=a;l.length>0&&(d=_g(n,a)),ls(n.eventQueue_,d,l)}function T1(n,e){AR(n,"connected",e),!1===e&&function O$(n){mg(n,"onDisconnectEvents");const e=Ov(n),t=BT();Jx(n.onDisconnect_,jt(),(i,a)=>{const l=function(n,e,t,r){return IR(e,new vR(t,n),r)}(i,a,n.serverSyncTree_,e);hg(t,i,l)});let r=[];Jx(t,jt(),(i,a)=>{r=r.concat(Av(n.serverSyncTree_,i,a));const l=NR(n,i);_g(n,l)}),n.onDisconnect_=BT(),ls(n.eventQueue_,jt(),r)}(n)}function AR(n,e,t){const r=new qt("/.info/"+e),i=Pn(t);n.infoData_.updateSnapshot(r,i);const a=Av(n.infoSyncTree_,r,i);ls(n.eventQueue_,r,a)}function iC(n){return n.nextWriteId_++}function xR(n,e,t,r,i){mg(n,"set",{path:e.toString(),value:t,priority:r});const a=Ov(n),l=Pn(t,r),d=XT(n.serverSyncTree_,e),p=wR(l,d,a),m=iC(n),I=fR(n.serverSyncTree_,e,p,m,!0);rC(n.eventQueue_,I),n.server_.put(e.toString(),l.val(!0),(S,x)=>{const O="ok"===S;O||Wr("set at "+e+" failed: "+S);const ne=Rl(n.serverSyncTree_,m,!O);ls(n.eventQueue_,e,ne),function Ml(n,e,t,r){e&&su(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const l=new Error(a);l.code=i,e(l)}})}(0,i,S,x)});const T=NR(n,e);_g(n,T),ls(n.eventQueue_,T,[])}function mg(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),kn(t,...e)}function MR(n,e,t){return XT(n.serverSyncTree_,e,t)||yt.EMPTY_NODE}function sC(n,e=n.transactionQueueTree_){if(e||oC(n,e),Wd(e)){const t=S1(n,e);(0,k.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function j$(n,e,t){const r=t.map(m=>m.currentWriteId),i=MR(n,e,r);let a=i;const l=i.hash();for(let m=0;m<t.length;m++){const I=t[m];(0,k.hu)(0===I.status,"tryToSendTransactionQueue_: items in queue should all be run."),I.status=1,I.retryCount++;const T=zr(e,I.path);a=a.updateChild(T,I.currentOutputSnapshotRaw)}const d=a.val(!0),p=e;n.server_.put(p.toString(),d,m=>{mg(n,"transaction put response",{path:p.toString(),status:m});let I=[];if("ok"===m){const T=[];for(let S=0;S<t.length;S++)t[S].status=2,I=I.concat(Rl(n.serverSyncTree_,t[S].currentWriteId)),t[S].onComplete&&T.push(()=>t[S].onComplete(null,!0,t[S].currentOutputSnapshotResolved)),t[S].unwatcher();oC(n,eC(n.transactionQueueTree_,e)),sC(n,n.transactionQueueTree_),ls(n.eventQueue_,e,I);for(let S=0;S<T.length;S++)su(T[S])}else{if("datastale"===m)for(let T=0;T<t.length;T++)t[T].status=3===t[T].status?4:0;else{Wr("transaction at "+p.toString()+" failed: "+m);for(let T=0;T<t.length;T++)t[T].status=4,t[T].abortReason=m}_g(n,e)}},l)}(n,Mv(e),t)}else f1(e)&&tC(e,t=>{sC(n,t)})}function _g(n,e){const t=D1(n,e),r=Mv(t);return function H$(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const p=e[d],m=zr(t,p.path);let T,I=!1;if((0,k.hu)(null!==m,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)I=!0,T=p.abortReason,i=i.concat(Rl(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=25)I=!0,T="maxretry",i=i.concat(Rl(n.serverSyncTree_,p.currentWriteId,!0));else{const S=MR(n,p.path,l);p.currentInputSnapshot=S;const x=e[d].update(S.val());if(void 0!==x){kv("transaction failed: Data returned ",x,p.path);let O=Pn(x);"object"==typeof x&&null!=x&&(0,k.r3)(x,".priority")||(O=O.updatePriority(S.getPriority()));const se=p.currentWriteId,Ke=Ov(n),Xe=wR(O,S,Ke);p.currentOutputSnapshotRaw=O,p.currentOutputSnapshotResolved=Xe,p.currentWriteId=iC(n),l.splice(l.indexOf(se),1),i=i.concat(fR(n.serverSyncTree_,p.path,Xe,p.currentWriteId,p.applyLocally)),i=i.concat(Rl(n.serverSyncTree_,se,!0))}else I=!0,T="nodata",i=i.concat(Rl(n.serverSyncTree_,p.currentWriteId,!0))}ls(n.eventQueue_,t,i),i=[],I&&(e[d].status=2,setTimeout(e[d].unwatcher,Math.floor(0)),e[d].onComplete&&r.push("nodata"===T?()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot):()=>e[d].onComplete(new Error(T),!1,null)))}oC(n,n.transactionQueueTree_);for(let d=0;d<r.length;d++)su(r[d]);sC(n,n.transactionQueueTree_)}(n,S1(n,t),r),r}function D1(n,e){let t,r=n.transactionQueueTree_;for(t=xt(e);null!==t&&void 0===Wd(r);)r=eC(r,t),t=xt(e=tn(e));return r}function S1(n,e){const t=[];return A1(n,e,t),t.sort((r,i)=>r.order-i.order),t}function A1(n,e,t){const r=Wd(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);tC(e,i=>{A1(n,i,t)})}function oC(n,e){const t=Wd(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,TR(e,t.length>0?t:void 0)}tC(e,r=>{oC(n,r)})}function NR(n,e){const t=Mv(D1(n,e)),r=eC(n.transactionQueueTree_,e);return function w$(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{kR(n,i)}),kR(n,r),p1(r,i=>{kR(n,i)}),t}function kR(n,e){const t=Wd(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,k.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,k.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(Rl(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?TR(e,void 0):t.length=a+1,ls(n.eventQueue_,Mv(e),i);for(let l=0;l<r.length;l++)su(r[l])}}const PR=function(n,e){const t=z$(n),r=t.namespace;return"firebase.com"===t.domain&&uo(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&uo("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Wr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new lv(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new qt(t.pathString)}},z$=function(n){let e="",t="",r="",i="",a="",l=!0,d="https",p=443;if("string"==typeof n){let m=n.indexOf("//");m>=0&&(d=n.substring(0,m-1),n=n.substring(m+2));let I=n.indexOf("/");-1===I&&(I=n.length);let T=n.indexOf("?");-1===T&&(T=n.length),e=n.substring(0,Math.min(I,T)),I<T&&(i=function G$(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(I,T)));const S=function W$(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Wr(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,T)));m=e.indexOf(":"),m>=0?(l="https"===d||"wss"===d,p=parseInt(e.substring(m+1),10)):m=e.length;const x=e.slice(0,m);if("localhost"===x.toLowerCase())t="localhost";else if(x.split(".").length<=2)t=x;else{const O=e.indexOf(".");r=e.substring(0,O).toLowerCase(),t=e.substring(O+1),a=r}"ns"in S&&(a=S.ns)}return{host:e,port:p,domain:t,subdomain:r,secure:l,scheme:d,pathString:i,namespace:a}};class x1{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,k.Wl)(this.snapshot.exportVal())}}class R1{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class OR{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,k.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class cs{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return At(this._path)?null:yv(this._path)}get ref(){return new po(this._repo,this._path)}get _queryIdentifier(){const e=LO(this._queryParams),t=_i(e);return"{}"===t?"default":t}get _queryObject(){return LO(this._queryParams)}isEqual(e){if(!((e=(0,k.m9)(e))instanceof cs))return!1;const t=this._repo===e._repo,r=OT(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function PT(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class po extends cs{constructor(e,t){super(e,t,new Yx,!1)}get parent(){const e=Ux(this._path);return null===e?null:new po(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class zd{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new qt(e),r=qd(this.ref,e);return new zd(this._node.getChild(t),r,nt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new zd(i,qd(this.ref,r),nt)))}hasChild(e){const t=new qt(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function M1(n,e){return(n=(0,k.m9)(n))._checkNotDeleted("ref"),void 0!==e?qd(n._root,e):n._root}function qd(n,e){return null===xt((n=(0,k.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),SR("child","path",t,!1)):SR("child","path",e,!1),new po(n._repo,cn(n._path,e));var t}function LR(n,e){(function(n,e){if(".info"===xt(e))throw new Error(n+" failed = Can't modify data under /.info/")})("set",(n=(0,k.m9)(n))._path),function(n,e,t,r){r&&void 0===e||kv((0,k.gK)(n,"value"),e,t)}("set",e,n._path,!1);const t=new k.BH;return xR(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function K$(n){n=(0,k.m9)(n);const e=new OR(()=>{}),t=new Lv(e);return function k$(n,e,t){const r=function d$(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(m,I)=>{const T=zr(m,t);r=r||Al(I,T)});let i=n.syncPointTree_.get(t);i?r=r||Al(i,jt()):(i=new t1,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,l=a?new Dl(r,!0,!1):null;return function K2(n){return HT(n.viewCache_)}(n1(i,e,GT(n.pendingWriteTree_,e._path),a?l.getNode():yt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const a=Pn(i).withIndex(e._queryParams.getIndex());let l;if(pR(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())l=Av(n.serverSyncTree_,e._path,a);else{const d=xv(n.serverSyncTree_,e);l=a1(n.serverSyncTree_,e._path,a,d)}return ls(n.eventQueue_,e._path,l),ZT(n.serverSyncTree_,e,t,null,!0),a},i=>(mg(n,"get for query "+(0,k.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new zd(r,new po(n._repo,n._path),n._queryParams.getIndex()))}class Lv{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new x1("value",this,new zd(e.snapshotNode,new po(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new R1(this,e,t):null}matches(e){return e instanceof Lv&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}(function X2(n){(0,k.hu)(!KT,"__referenceConstructor has already been defined"),KT=n})(po),function r$(n){(0,k.hu)(!QT,"__referenceConstructor has already been defined"),QT=n}(po);const FR={};function aj(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||uo("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),kn("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,m,l=PR(a,i),d=l.repoInfo;typeof process<"u"&&process.env&&(m=process.env.FIREBASE_DATABASE_EMULATOR_HOST),m?(p=!0,a=`http://${m}?ns=${d.namespace}`,l=PR(a,i),d=l.repoInfo):p=!l.repoInfo.secure;const I=i&&p?new El(El.OWNER):new Ex(n.name,n.options,e);(function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!nC(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),g1(n)}(t))throw new Error((0,k.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",l),At(l.path)||uo("Database URL must point to the root of a Firebase Database (not including a child path).");const T=function lj(n,e,t,r){let i=FR[e.name];i||(i={},FR[e.name]=i);let a=i[n.toURLString()];return a&&uo("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new R$(n,false,t,r),i[n.toURLString()]=a,a}(d,n,I,new gT(n.name,t));return new dj(T,n)}class dj{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function M$(n,e,t){if(n.stats_=IT(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new VT(n.repoInfo_,(r,i,a,l)=>{E1(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>T1(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,k.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Cl(n.repoInfo_,e,(r,i,a,l)=>{E1(n,r,i,a,l)},r=>{T1(n,r)},r=>{!function N$(n,e){$n(e,(t,r)=>{AR(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function dv(n,e){const t=n.toString();return rg[t]||(rg[t]=e()),rg[t]}(n.repoInfo_,()=>new m2(n.stats_,n.server_)),n.infoData_=new d2,n.infoSyncTree_=new o1({startListening:(r,i,a,l)=>{let d=[];const p=n.infoData_.getNode(r._path);return p.isEmpty()||(d=Av(n.infoSyncTree_,r._path,p),setTimeout(()=>{l("ok")},0)),d},stopListening:()=>{}}),AR(n,"connected",!1),n.serverSyncTree_=new o1({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(d,p)=>{const m=l(d,p);ls(n.eventQueue_,r._path,m)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new po(this._repo,jt())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function uj(n,e){const t=FR[e];(!t||t[n.key]!==n)&&uo(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function b1(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&uo("Cannot call "+e+" on a deleted database.")}}function hj(n=(0,Kt.getApp)(),e){const t=(0,Kt._getProvider)(n,"database").getImmediate({identifier:e}),r=(0,k.P0)("database");return r&&function fj(n,e,t,r={}){(n=(0,k.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&uo("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&uo('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new El(El.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,k.Sg)(r.mockUserToken,n.app.options.projectId);a=new El(l)}!function oj(n,e,t,r){n.repoInfo_=new lv(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(t,...r),t}Cl.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Cl.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function pj(n){(function sT(n){iT=n})(Kt.SDK_VERSION),(0,Kt._registerComponent)(new Ha.wA("database",(e,{instanceIdentifier:t})=>aj(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Kt.registerVersion)(mx,Nd,n),(0,Kt.registerVersion)(mx,Nd,"esm2017")}();class cC{constructor(e){return e}}const L1="database",UR=new v.OlP("angularfire2.database-instances");function vj(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new cC(r)}}const wj={provide:class _j{constructor(){return(0,Ve.vb)(L1)}},deps:[[new v.FiY,UR]]},Ij={provide:cC,useFactory:function yj(n,e){const t=(0,Ve.JM)(L1,n,e);return t&&new cC(t)},deps:[[new v.FiY,UR],zo]};let Ej=(()=>{class n{constructor(){(0,ro.KN)("angularfire",Ve.q4.full,"rtdb")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=v.oAB({type:n}),n.\u0275inj=v.cJS({providers:[Ij,wj]}),n})();function Tj(n,...e){return{ngModule:Ej,providers:[{provide:UR,useFactory:vj(n),multi:!0,deps:[v.R0b,v.zs3,Ve.HU,qc,[new v.FiY,qp],[new v.FiY,Wf],...e]}]}}const Cj=(0,Ve.u3)(qd,!0),bj=(0,Ve.u3)(K$,!0),F1=(0,Ve.u3)(hj,!0),U1=(0,Ve.u3)(M1,!0),Dj=(0,Ve.u3)(LR,!0);var Sj=M(4986),Uv=M(2011),xj=M(3942);const V1="firebasestorage.googleapis.com",B1="storageBucket";class On extends k.ZR{constructor(e,t,r=0){super(VR(e),`Firebase Storage: ${t} (${VR(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,On.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return VR(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function VR(n){return"storage/"+n}function BR(){return new On("unknown","An unknown error occurred, please check the error payload for server response.")}function $1(){return new On("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function j1(){return new On("canceled","User canceled the upload/download.")}function H1(){return new On("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function yg(n){return new On("invalid-argument",n)}function G1(){return new On("app-deleted","The Firebase app was deleted.")}function W1(n){return new On("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Vv(n,e){return new On("invalid-format","String does not match format '"+n+"': "+e)}function Bv(n){throw new On("internal-error","Internal error: "+n)}class ni{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ni.makeFromUrl(e,t)}catch{return new ni(e,"")}if(""===r.path)return r;throw function Vj(n){return new On("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+i+"(/(.*))?$","i");function m(Ct){Ct.path_=decodeURIComponent(Ct.path)}const T=t.replace(/[.]/g,"\\."),Qe=[{regex:d,indices:{bucket:1,path:3},postModify:function a(Ct){"/"===Ct.path.charAt(Ct.path.length-1)&&(Ct.path_=Ct.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${T}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:m},{regex:new RegExp(`^https?://${t===V1?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:m}];for(let Ct=0;Ct<Qe.length;Ct++){const Lt=Qe[Ct],Pt=Lt.regex.exec(e);if(Pt){let gs=Pt[Lt.indices.path];gs||(gs=""),r=new ni(Pt[Lt.indices.bucket],gs),Lt.postModify(r);break}}if(null==r)throw function Uj(n){return new On("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class Gj{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function dC(n){return"string"==typeof n||n instanceof String}function z1(n){return $R()&&n instanceof Blob}function $R(){return typeof Blob<"u"&&!(0,k.UG)()}function jR(n,e,t,r){if(r<e)throw yg(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw yg(`Invalid value for '${n}'. Expected ${t} or less.`)}function cu(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function q1(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var kl=(()=>{return(n=kl||(kl={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",kl;var n})();function K1(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),a=-1!==e.indexOf(n);return t||i||a}class Qj{constructor(e,t,r,i,a,l,d,p,m,I,T,S=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=d,this.errorCallback_=p,this.timeout_=m,this.progressCallback_=I,this.connectionFactory_=T,this.retry=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,O)=>{this.resolve_=x,this.reject_=O,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,l=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const p=this.callback_(d,d.getResponse());!function qj(n){return void 0!==n}(p)?a():a(p)}catch(p){l(p)}else if(null!==d){const p=BR();p.serverResponse=d.getErrorText(),l(this.errorCallback_?this.errorCallback_(d,p):p)}else l(i.canceled?this.appDelete_?G1():j1():$1())};this.canceled_?t(0,new hC(!1,null,!0)):this.backoffId_=function Wj(n,e,t){let r=1,i=null,a=null,l=!1,d=0;function p(){return 2===d}let m=!1;function I(...se){m||(m=!0,e.apply(null,se))}function T(se){i=setTimeout(()=>{i=null,n(x,p())},se)}function S(){a&&clearTimeout(a)}function x(se,...Ke){if(m)return void S();if(se)return S(),void I.call(null,se,...Ke);if(p()||l)return S(),void I.call(null,se,...Ke);let Qe;r<64&&(r*=2),1===d?(d=2,Qe=0):Qe=1e3*(r+Math.random()),T(Qe)}let O=!1;function ne(se){O||(O=!0,S(),!m&&(null!==i?(se||(d=2),clearTimeout(i),T(0)):se||(d=1)))}return T(0),a=setTimeout(()=>{l=!0,ne(!0)},t),ne}((r,i)=>{if(i)return void r(!1,new hC(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const l=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const d=a.getErrorCode()===kl.NO_ERROR,p=a.getStatus();if((!d||K1(p,this.additionalRetryCodes_))&&this.retry){const I=a.getErrorCode()===kl.ABORT;return void r(!1,new hC(!1,null,I))}const m=-1!==this.successCodes_.indexOf(p);r(!0,new hC(m,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function zj(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class hC{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function rH(...n){const e=function nH(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if($R())return new Blob(n);throw new On("unsupported-environment","This browser doesn't seem to support creating Blobs")}const ds={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class HR{constructor(e,t){this.data=e,this.contentType=t||null}}function GR(n,e){switch(n){case ds.RAW:return new HR(Y1(e));case ds.BASE64:case ds.BASE64URL:return new HR(Q1(n,e));case ds.DATA_URL:return new HR(function aH(n){const e=new Z1(n);return e.base64?Q1(ds.BASE64,e.rest):function oH(n){let e;try{e=decodeURIComponent(n)}catch{throw Vv(ds.DATA_URL,"Malformed data URL.")}return Y1(e)}(e.rest)}(e),function uH(n){return new Z1(n).contentType}(e))}throw BR()}function Y1(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Q1(n,e){switch(n){case ds.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw Vv(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ds.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw Vv(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function sH(n){if(typeof atob>"u")throw function Hj(n){return new On("unsupported-environment",`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:Vv(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class Z1{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Vv(ds.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function lH(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class ia{constructor(e,t){let r=0,i="";z1(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(z1(this.data_)){const i=function iH(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new ia(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new ia(r,!0)}}static getBlob(...e){if($R()){const t=e.map(r=>r instanceof ia?r.data_:r);return new ia(rH.apply(null,t))}{const t=e.map(l=>dC(l)?GR(ds.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(l=>{for(let d=0;d<l.length;d++)i[a++]=l[d]}),new ia(i,!0)}}uploadData(){return this.data_}}function WR(n){let e;try{e=JSON.parse(n)}catch{return null}return function Yj(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function X1(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function hH(n,e){return e}class yi{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||hH}}let fC=null;function $v(){if(fC)return fC;const n=[];n.push(new yi("bucket")),n.push(new yi("generation")),n.push(new yi("metageneration")),n.push(new yi("name","fullPath",!0));const t=new yi("name");t.xform=function e(a,l){return function fH(n){return!dC(n)||n.length<2?n:X1(n)}(l)},n.push(t);const i=new yi("size");return i.xform=function r(a,l){return void 0!==l?Number(l):l},n.push(i),n.push(new yi("timeCreated")),n.push(new yi("updated")),n.push(new yi("md5Hash",null,!0)),n.push(new yi("cacheControl",null,!0)),n.push(new yi("contentDisposition",null,!0)),n.push(new yi("contentEncoding",null,!0)),n.push(new yi("contentLanguage",null,!0)),n.push(new yi("contentType",null,!0)),n.push(new yi("metadata","customMetadata",!0)),fC=n,fC}function J1(n,e,t){const r=WR(e);return null===r?null:function gH(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const l=t[a];r[l.local]=l.xform(r,e[l.server])}return function pH(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new ni(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function zR(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const eL="prefixes";class sa{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function oa(n){if(!n)throw BR()}function pC(n,e){return function t(r,i){const a=J1(n,i,e);return oa(null!==a),a}}function vg(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function Lj(){return new On("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function Oj(){return new On("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function Pj(n){return new On("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function Fj(n){return new On("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function jv(n){const e=vg(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function kj(n){return new On("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function nL(n,e,t){const i=cu(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,d=new sa(i,"GET",pC(n,t),l);return d.errorHandler=jv(e),d}function IH(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const d=cu(e.bucketOnlyServerUrl(),n.host,n._protocol),m=n.maxOperationRetryTime,I=new sa(d,"GET",function vH(n,e){return function t(r,i){const a=function yH(n,e,t){const r=WR(t);return null===r?null:function _H(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[eL])for(const i of t[eL]){const a=i.replace(/\/$/,""),l=n._makeStorageReference(new ni(e,a));r.prefixes.push(l)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new ni(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return oa(null!==a),a}}(n,e.bucket),m);return I.urlParams=a,I.errorHandler=vg(e),I}function iL(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function bH(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class gC{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function qR(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{oa(!1)}return oa(!!t&&-1!==(e||["active"]).indexOf(t)),t}const xH={STATE_CHANGED:"state_changed"},vi={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function KR(n){switch(n){case"running":case"pausing":case"canceling":return vi.RUNNING;case"paused":return vi.PAUSED;case"success":return vi.SUCCESS;case"canceled":return vi.CANCELED;default:return vi.ERROR}}class RH{constructor(e,t,r){if(function Kj(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function wg(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class NH extends class MH{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=kl.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=kl.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=kl.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Bv("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Bv("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Bv("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Bv("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Bv("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function go(){return new NH}class uL{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=$v(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if(K1(i.status,[])){if(!a)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=$1()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function DH(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l=iL(e,r,i),d={name:l.fullPath},p=cu(a,n.host,n._protocol),I={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},T=zR(l,t),O=new sa(p,"POST",function x(ne){let se;qR(ne);try{se=ne.getResponseHeader("X-Goog-Upload-URL")}catch{oa(!1)}return oa(dC(se)),se},n.maxUploadRetryTime);return O.urlParams=d,O.headers=I,O.body=T,O.errorHandler=vg(e),O}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,go,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function SH(n,e,t,r){const p=new sa(t,"POST",function a(m){const I=qR(m,["active","final"]);let T=null;try{T=m.getResponseHeader("X-Goog-Upload-Size-Received")}catch{oa(!1)}T||oa(!1);const S=Number(T);return oa(!isNaN(S)),new gC(S,r.size(),"final"===I)},n.maxUploadRetryTime);return p.headers={"X-Goog-Upload-Command":"query"},p.errorHandler=vg(e),p}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,go,t,r);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new gC(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let l;try{l=function AH(n,e,t,r,i,a,l,d){const p=new gC(0,0);if(l?(p.current=l.current,p.total=l.total):(p.current=0,p.total=r.size()),r.size()!==p.total)throw function $j(){return new On("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const m=p.total-p.current;let I=m;i>0&&(I=Math.min(I,i));const T=p.current;let x="";x=0===I?"finalize":m===I?"upload, finalize":"upload";const O={"X-Goog-Upload-Command":x,"X-Goog-Upload-Offset":`${p.current}`},ne=r.slice(T,T+I);if(null===ne)throw H1();const Qe=new sa(t,"POST",function se(Ct,Lt){const Pt=qR(Ct,["active","final"]),Dn=p.current+I,gs=r.size();let wh;return wh="final"===Pt?pC(e,a)(Ct,Lt):null,new gC(Dn,gs,"final"===Pt,wh)},e.maxUploadRetryTime);return Qe.headers=O,Qe.body=ne.uploadData(),Qe.progressCallback=d||null,Qe.errorHandler=vg(n),Qe}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(p){return this._error=p,void this._transition("error")}const d=this._ref.storage._makeRequest(l,go,i,a,!1);this._request=d,d.getPromise().then(p=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(p.current),p.finalized?(this._metadata=p.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=nL(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,go,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function sL(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},p=function d(){let Qe="";for(let Ct=0;Ct<2;Ct++)Qe+=Math.random().toString().slice(2);return Qe}();l["Content-Type"]="multipart/related; boundary="+p;const m=iL(e,r,i),I=zR(m,t),x=ia.getBlob("--"+p+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+I+"\r\n--"+p+"\r\nContent-Type: "+m.contentType+"\r\n\r\n",r,"\r\n--"+p+"--");if(null===x)throw H1();const O={name:m.fullPath},ne=cu(a,n.host,n._protocol),Ke=n.maxUploadRetryTime,Xe=new sa(ne,"POST",pC(n,t),Ke);return Xe.urlParams=O,Xe.headers=l,Xe.body=x.uploadData(),Xe.errorHandler=vg(e),Xe}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,go,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=j1(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=KR(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new RH(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(KR(this._state)){case vi.SUCCESS:wg(this._resolve.bind(null,this.snapshot))();break;case vi.CANCELED:case vi.ERROR:wg(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(KR(this._state)){case vi.RUNNING:case vi.PAUSED:e.next&&wg(e.next.bind(e,this.snapshot))();break;case vi.SUCCESS:e.complete&&wg(e.complete.bind(e))();break;default:e.error&&wg(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Kd{constructor(e,t){this._service=e,this._location=t instanceof ni?t:ni.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Kd(e,t)}get root(){const e=new ni(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return X1(this._location.path)}get storage(){return this._service}get parent(){const e=function cH(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ni(this._location.bucket,e);return new Kd(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw W1(e)}}function cL(n,e,t){return YR.apply(this,arguments)}function YR(){return(YR=(0,fe.Z)(function*(n,e,t){const i=yield dL(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield cL(n,e,i.nextPageToken))})).apply(this,arguments)}function dL(n,e){null!=e&&"number"==typeof e.maxResults&&jR("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=IH(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,go)}function GH(n){n._throwIfRoot("getDownloadURL");const e=function EH(n,e,t){const i=cu(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,d=new sa(i,"GET",function wH(n,e){return function t(r,i){const a=J1(n,i,e);return oa(null!==a),function mH(n,e,t,r){const i=WR(e);if(null===i||!dC(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const l=encodeURIComponent;return a.split(",").map(m=>{const T=n.fullPath;return cu("/b/"+l(n.bucket)+"/o/"+l(T),t,r)+q1({alt:"media",token:m})})[0]}(a,i,n.host,n._protocol)}}(n,t),l);return d.errorHandler=jv(e),d}(n.storage,n._location,$v());return n.storage.makeRequestWithTokens(e,go).then(t=>{if(null===t)throw function jj(){return new On("no-download-url","The given file does not have any download URLs.")}();return t})}function hL(n,e){const t=function dH(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new ni(n._location.bucket,t);return new Kd(n.storage,r)}function fL(n,e){if(n instanceof QR){const t=n;if(null==t._bucket)throw function Bj(){return new On("no-default-bucket","No default bucket found. Did you set the '"+B1+"' property when initializing the app?")}();const r=new Kd(t,t._bucket);return null!=e?fL(r,e):r}return void 0!==e?hL(n,e):n}function KH(n,e){if(e&&function zH(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof QR)return function qH(n,e){return new Kd(n,e)}(n,e);throw yg("To use ref(service, url), the first argument must be a Storage instance.")}return fL(n,e)}function pL(n,e){const t=e?.[B1];return null==t?null:ni.makeFromBucketSpec(t,n)}class QR{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=V1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ni.makeFromBucketSpec(i,this._host):pL(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ni.makeFromBucketSpec(this._url,e):pL(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){jR("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){jR("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,fe.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,fe.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Kd(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new Gj(G1());{const l=function tH(n,e,t,r,i,a,l=!0){const d=q1(n.urlParams),p=n.url+d,m=Object.assign({},n.headers);return function Jj(n,e){e&&(n["X-Firebase-GMPID"]=e)}(m,e),function Zj(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(m,t),function Xj(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(m,a),function eH(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(m,r),new Qj(p,n.method,m,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}(e,this._appId,r,i,t,this._firebaseVersion,a);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,fe.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const gL="@firebase/storage";function yL(n,e){return KH(n=(0,k.m9)(n),e)}function iG(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new QR(t,r,i,e,Kt.SDK_VERSION)}!function sG(){(0,Kt._registerComponent)(new Ha.wA("storage",iG,"PUBLIC").setMultipleInstances(!0)),(0,Kt.registerVersion)(gL,"0.9.14",""),(0,Kt.registerVersion)(gL,"0.9.14","esm2017")}();class mC{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class wL{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new mC(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new mC(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?l=>t(new mC(l,this,this._ref)):{next:t.next?l=>t.next(new mC(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class IL{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new du(e,this._service))}get items(){return this._delegate.items.map(e=>new du(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class du{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function rG(n,e){return hL(n,e)}(this._delegate,e);return new du(t,this.storage)}get root(){return new du(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new du(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new wL(function QH(n,e,t){return function VH(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new uL(n,new ia(e),t)}(n=(0,k.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=ds.RAW,r){this._throwIfRoot("putString");const i=GR(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new wL(new uL(this._delegate,new ia(i.data,!0),a),this)}listAll(){return function eG(n){return function $H(n){const e={prefixes:[],items:[]};return cL(n,e).then(()=>e)}(n=(0,k.m9)(n))}(this._delegate).then(e=>new IL(e,this.storage))}list(e){return function JH(n,e){return dL(n=(0,k.m9)(n),e)}(this._delegate,e||void 0).then(t=>new IL(t,this.storage))}getMetadata(){return function ZH(n){return function jH(n){n._throwIfRoot("getMetadata");const e=nL(n.storage,n._location,$v());return n.storage.makeRequestWithTokens(e,go)}(n=(0,k.m9)(n))}(this._delegate)}updateMetadata(e){return function XH(n,e){return function HH(n,e){n._throwIfRoot("updateMetadata");const t=function TH(n,e,t,r){const a=cu(e.fullServerUrl(),n.host,n._protocol),d=zR(t,r),m=n.maxOperationRetryTime,I=new sa(a,"PATCH",pC(n,r),m);return I.headers={"Content-Type":"application/json; charset=utf-8"},I.body=d,I.errorHandler=jv(e),I}(n.storage,n._location,e,$v());return n.storage.makeRequestWithTokens(t,go)}(n=(0,k.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function tG(n){return GH(n=(0,k.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function nG(n){return function WH(n){n._throwIfRoot("deleteObject");const e=function CH(n,e){const r=cu(e.fullServerUrl(),n.host,n._protocol),d=new sa(r,"DELETE",function l(p,m){},n.maxOperationRetryTime);return d.successCodes=[200,204],d.errorHandler=jv(e),d}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,go)}(n=(0,k.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw W1(e)}}class EL{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(TL(e))throw yg("ref() expected a child path but got a URL, use refFromURL instead.");return new du(yL(this._delegate,e),this)}refFromURL(e){if(!TL(e))throw yg("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ni.makeFromUrl(e,this._delegate.host)}catch{throw yg("refFromUrl() expected a valid full URL but got an invalid one.")}return new du(yL(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function vL(n,e,t,r={}){!function YH(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,k.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function TL(n){return/^[A-Za-z]+:\/\//.test(n)}function lG(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new EL(t,r)}function CL(n){const e=function dG(n){return new on.y(e=>{const t=l=>e.next(l);t(n.snapshot);const a=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){a()}}).pipe(function Aj(n,e=Sj.z){return(0,ln.e)((t,r)=>{let i=null,a=null,l=null;const d=()=>{if(i){i.unsubscribe(),i=null;const m=a;a=null,r.next(m)}};function p(){const m=l+n,I=e.now();if(I<m)return i=this.schedule(void 0,m-I),void r.add(i);d()}t.subscribe((0,hr.x)(r,m=>{a=m,l=e.now(),i||(i=e.schedule(p,n),r.add(i))},()=>{d(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,kt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function _C(n){return{getDownloadURL:()=>tt(void 0).pipe(Ve.fc,pr(()=>n.getDownloadURL()),Ve.iC),getMetadata:()=>tt(void 0).pipe(Ve.fc,pr(()=>n.getMetadata()),Ve.iC),delete:()=>(0,_n.D)(n.delete()),child:e=>_C(n.child(e)),updateMetadata:e=>(0,_n.D)(n.updateMetadata(e)),put:(e,t)=>CL(n.put(e,t)),putString:(e,t,r)=>CL(n.putString(e,t,r)),list:e=>(0,_n.D)(n.list(e)),listAll:()=>(0,_n.D)(n.listAll())}}!function cG(n){const e={TaskState:vi,TaskEvent:xH,StringFormat:ds,Storage:EL,Reference:du};n.INTERNAL.registerComponent(new Ha.wA("storage-compat",lG,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.22")}(xj.Z),M(127);const hG=new v.OlP("angularfire2.storageBucket"),fG=new v.OlP("angularfire2.storage.maxUploadRetryTime"),pG=new v.OlP("angularfire2.storage.maxOperationRetryTime"),gG=new v.OlP("angularfire2.storage.use-emulator");let mG=(()=>{class n{constructor(t,r,i,a,l,d,p,m,I,T){const S=(0,Uv.on)(t,l,r);this.storage=(0,Uv.cc)(`${S.name}.storage.${i}`,"AngularFireStorage",S.name,()=>{const x=l.runOutsideAngular(()=>S.storage(i||void 0)),O=I;return O&&x.useEmulator(...O),p&&x.setMaxUploadRetryTime(p),m&&x.setMaxOperationRetryTime(m),x},[p,m])}ref(t){return _C(this.storage.ref(t))}refFromURL(t){return _C(this.storage.refFromURL(t))}upload(t,r,i){return _C(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(v.LFG(Uv.Dh),v.LFG(Uv.xv,8),v.LFG(hG,8),v.LFG(v.Lbi),v.LFG(v.R0b),v.LFG(Ve.HU),v.LFG(fG,8),v.LFG(pG,8),v.LFG(gG,8),v.LFG(Wf,8))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),_G=(()=>{class n{constructor(t,r){this.s=t,this.db=r,this.title="App"}upload(t){this.path=t.target.files[0],console.log(this.path.name)}uploadImage(){this.s.upload("/backup/"+this.path.name,this.path)}RegisterData(){Dj(U1(this.db,"users/Gowtham1"),{username:"Gowtham1",email:"empty@gmail1.com",profile_picture:"nothing"})}getValuefromDB(){bj(Cj(U1(F1()),"users/")).then(t=>{t.exists()?console.log(t.val()):console.log("No data available")}).catch(t=>{console.error(t)})}}return n.\u0275fac=function(t){return new(t||n)(v.Y36(mG),v.Y36(cC))},n.\u0275cmp=v.Xpm({type:n,selectors:[["app-root"]],decls:9,vars:0,consts:[["type","file","accept","*.pdf",3,"change"],[3,"click"]],template:function(t,r){1&t&&(v.TgZ(0,"label"),v._uU(1,"File Upload"),v.qZA(),v.TgZ(2,"input",0),v.NdJ("change",function(a){return r.upload(a)}),v.qZA(),v.TgZ(3,"button",1),v.NdJ("click",function(){return r.uploadImage()}),v._uU(4,"Upload Image"),v.qZA(),v.TgZ(5,"button",1),v.NdJ("click",function(){return r.RegisterData()}),v._uU(6,"RegisterData"),v.qZA(),v.TgZ(7,"button",1),v.NdJ("click",function(){return r.getValuefromDB()}),v._uU(8,"getValuefromDB"),v.qZA())}}),n})();const ZR_firebase={projectId:"fir-73ab4",appId:"1:262993094899:web:69886fdf7b6a5d5ea62f86",storageBucket:"fir-73ab4.appspot.com",apiKey:"AIzaSyDRej2UkPHxB26081NwTLUDe89IgqMbazA",authDomain:"fir-73ab4.firebaseapp.com",messagingSenderId:"262993094899"};var Ze,yG=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},hu={},XR=XR||{},Et=yG||self;function yC(){}function vC(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Hv(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var JR="closure_uid_"+(1e9*Math.random()>>>0),wG=0;function IG(n,e,t){return n.call.apply(n.bind,arguments)}function EG(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function ri(n,e,t){return(ri=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?IG:EG).apply(null,arguments)}function wC(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function qr(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,a){for(var l=Array(arguments.length-2),d=2;d<arguments.length;d++)l[d-2]=arguments[d];return e.prototype[i].apply(r,l)}}function Pl(){this.s=this.s,this.o=this.o}Pl.prototype.s=!1,Pl.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function vG(n){Object.prototype.hasOwnProperty.call(n,JR)&&n[JR]||(n[JR]=++wG)}(this)},Pl.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const bL=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function eM(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function DL(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(vC(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let l=0;l<a;l++)n[i+l]=r[l]}else n.push(r)}}function ii(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}ii.prototype.h=function(){this.defaultPrevented=!0};var CG=function(){if(!Et.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Et.addEventListener("test",yC,e),Et.removeEventListener("test",yC,e)}catch{}return n}();function IC(n){return/^[\s\xa0]*$/.test(n)}var SL=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function tM(n,e){return n<e?-1:n>e?1:0}function EC(){var n=Et.navigator;return n&&(n=n.userAgent)?n:""}function aa(n){return-1!=EC().indexOf(n)}function nM(n){return nM[" "](n),n}nM[" "]=yC;var TC,n,DG=aa("Opera"),Ig=aa("Trident")||aa("MSIE"),AL=aa("Edge"),rM=AL||Ig,xL=aa("Gecko")&&!(-1!=EC().toLowerCase().indexOf("webkit")&&!aa("Edge"))&&!(aa("Trident")||aa("MSIE"))&&!aa("Edge"),SG=-1!=EC().toLowerCase().indexOf("webkit")&&!aa("Edge");function RL(){var n=Et.document;return n?n.documentMode:void 0}e:{var iM="",sM=(n=EC(),xL?/rv:([^\);]+)(\)|;)/.exec(n):AL?/Edge\/([\d\.]+)/.exec(n):Ig?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):SG?/WebKit\/(\S+)/.exec(n):DG?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(sM&&(iM=sM?sM[1]:""),Ig){var oM=RL();if(null!=oM&&oM>parseFloat(iM)){TC=String(oM);break e}}TC=iM}var AG={};var RG=Et.document&&Ig&&(RL()||parseInt(TC,10))||void 0;function Gv(n,e){if(ii.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(xL){e:{try{nM(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:MG[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Gv.X.h.call(this)}}qr(Gv,ii);var MG={2:"touch",3:"pen",4:"mouse"};Gv.prototype.h=function(){Gv.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Wv="closure_listenable_"+(1e6*Math.random()|0),NG=0;function kG(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++NG,this.ba=this.ea=!1}function CC(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function uM(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function NL(n){const e={};for(const t in n)e[t]=n[t];return e}const kL="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function PL(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<kL.length;a++)t=kL[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function bC(n){this.src=n,this.g={},this.h=0}function lM(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=bL(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(CC(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function cM(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ba&&a.listener==e&&a.capture==!!t&&a.ha==r)return i}return-1}bC.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=cM(n,e,r,i);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new kG(e,this.src,a,!!r,i)).ea=t,n.push(e)),e};var dM="closure_lm_"+(1e6*Math.random()|0),hM={};function OL(n,e,t,r,i){if(r&&r.once)return FL(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)OL(n,e[a],t,r,i);return null}return t=mM(t),n&&n[Wv]?n.N(e,t,Hv(r)?!!r.capture:!!r,i):LL(n,e,t,!1,r,i)}function LL(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=Hv(i)?!!i.capture:!!i,d=pM(n);if(d||(n[dM]=d=new bC(n)),(t=d.add(e,t,r,l,a)).proxy)return t;if(r=function PG(){const e=OG;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)CG||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(VL(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function FL(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)FL(n,e[a],t,r,i);return null}return t=mM(t),n&&n[Wv]?n.O(e,t,Hv(r)?!!r.capture:!!r,i):LL(n,e,t,!0,r,i)}function UL(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)UL(n,e[a],t,r,i);else r=Hv(r)?!!r.capture:!!r,t=mM(t),n&&n[Wv]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=cM(a=n.g[e],t,r,i))&&(CC(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=pM(n))&&(e=n.g[e.toString()],n=-1,e&&(n=cM(e,t,r,i)),(t=-1<n?e[n]:null)&&fM(t))}function fM(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Wv])lM(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(VL(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=pM(e))?(lM(t,n),0==t.h&&(t.src=null,e[dM]=null)):CC(n)}}}function VL(n){return n in hM?hM[n]:hM[n]="on"+n}function OG(n,e){if(n.ba)n=!0;else{e=new Gv(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&fM(n),n=t.call(r,e)}return n}function pM(n){return(n=n[dM])instanceof bC?n:null}var gM="__closure_events_fn_"+(1e9*Math.random()>>>0);function mM(n){return"function"==typeof n?n:(n[gM]||(n[gM]=function(e){return n.handleEvent(e)}),n[gM])}function kr(){Pl.call(this),this.i=new bC(this),this.P=this,this.I=null}function Kr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ii(e,n);else if(e instanceof ii)e.target=e.target||n;else{var i=e;PL(e=new ii(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=DC(l,r,!0,e)&&i}if(i=DC(l=e.g=n,r,!0,e)&&i,i=DC(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=DC(l=e.g=t[a],r,!1,e)&&i}function DC(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.ba&&l.capture==t){var d=l.listener,p=l.ha||l.src;l.ea&&lM(n.i,l),i=!1!==d.call(p,r)&&i}}return i&&!r.defaultPrevented}qr(kr,Pl),kr.prototype[Wv]=!0,kr.prototype.removeEventListener=function(n,e,t,r){UL(this,n,e,t,r)},kr.prototype.M=function(){if(kr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)CC(t[r]);delete n.g[e],n.h--}}this.I=null},kr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},kr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var _M=Et.JSON.stringify;function LG(){var n=jL;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var yM,BL=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new UG,n=>n.reset());class UG{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function VG(n){Et.setTimeout(()=>{throw n},0)}function $L(n,e){yM||function BG(){var n=Et.Promise.resolve(void 0);yM=function(){n.then($G)}}(),vM||(yM(),vM=!0),jL.add(n,e)}var vM=!1,jL=new class FG{constructor(){this.h=this.g=null}add(e,t){const r=BL.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function $G(){for(var n;n=LG();){try{n.h.call(n.g)}catch(t){VG(t)}var e=BL;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}vM=!1}function SC(n,e){kr.call(this),this.h=n||1,this.g=e||Et,this.j=ri(this.lb,this),this.l=Date.now()}function wM(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function IM(n,e,t){if("function"==typeof n)t&&(n=ri(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ri(n.handleEvent,n)}return 2147483647<Number(e)?-1:Et.setTimeout(n,e||0)}function HL(n){n.g=IM(()=>{n.g=null,n.i&&(n.i=!1,HL(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}qr(SC,kr),(Ze=SC.prototype).ca=!1,Ze.R=null,Ze.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Kr(this,"tick"),this.ca&&(wM(this),this.start()))}},Ze.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ze.M=function(){SC.X.M.call(this),wM(this),delete this.g};class jG extends Pl{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:HL(this)}M(){super.M(),this.g&&(Et.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zv(n){Pl.call(this),this.h=n,this.g={}}qr(zv,Pl);var GL=[];function WL(n,e,t,r){Array.isArray(t)||(t&&(GL[0]=t.toString()),t=GL);for(var i=0;i<t.length;i++){var a=OL(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function zL(n){uM(n.g,function(e,t){this.g.hasOwnProperty(t)&&fM(e)},n),n.g={}}function AC(){this.g=!0}function Eg(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function zG(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return _M(t)}catch{return e}}(n,t)+(r?" "+r:"")})}zv.prototype.M=function(){zv.X.M.call(this),zL(this)},zv.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},AC.prototype.Aa=function(){this.g=!1},AC.prototype.info=function(){};var Yd={},qL=null;function xC(){return qL=qL||new kr}function KL(n){ii.call(this,Yd.Pa,n)}function qv(n){const e=xC();Kr(e,new KL(e))}function YL(n,e){ii.call(this,Yd.STAT_EVENT,n),this.stat=e}function wi(n){const e=xC();Kr(e,new YL(e,n))}function QL(n,e){ii.call(this,Yd.Qa,n),this.size=e}function Kv(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Et.setTimeout(function(){n()},e)}Yd.Pa="serverreachability",qr(KL,ii),Yd.STAT_EVENT="statevent",qr(YL,ii),Yd.Qa="timingevent",qr(QL,ii);var RC={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},ZL={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function EM(){}function JL(){}EM.prototype.h=null;var bM,Yv={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function TM(){ii.call(this,"d")}function CM(){ii.call(this,"c")}function MC(){}function Qv(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new zv(this),this.O=qG,this.T=new SC(n=rM?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new eF}function eF(){this.i=null,this.g="",this.h=!1}qr(TM,ii),qr(CM,ii),qr(MC,EM),MC.prototype.g=function(){return new XMLHttpRequest},MC.prototype.i=function(){return{}},bM=new MC;var qG=45e3,DM={},NC={};function SM(n,e,t){n.K=1,n.v=LC(fu(e)),n.s=t,n.P=!0,tF(n,null)}function tF(n,e){n.F=Date.now(),Zv(n),n.A=fu(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),dF(t.i,"t",r),n.C=0,t=n.l.H,n.h=new eF,n.g=OF(n.l,t?e:null,!n.s),0<n.N&&(n.L=new jG(ri(n.La,n,n.g),n.N)),WL(n.S,n.g,"readystatechange",n.ib),e=n.H?NL(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),qv(),function HG(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",d=a.split("&"),p=0;p<d.length;p++){var m=d[p].split("=");if(1<m.length){var I=m[0];m=m[1];var T=I.split("_");l=2<=T.length&&"type"==T[1]?l+(I+"=")+m+"&":l+(I+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function nF(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function rF(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=KG(n,t),i==NC){4==e&&(n.o=4,wi(14),r=!1),Eg(n.j,n.m,null,"[Incomplete Response]");break}if(i==DM){n.o=4,wi(15),Eg(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Eg(n.j,n.m,i,null),AM(n,i)}nF(n)&&i!=NC&&i!=DM&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,wi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),LM(e),e.K=!0,wi(11))):(Eg(n.j,n.m,t,"[Invalid Chunked Response]"),Qd(n),Xv(n))}function KG(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?NC:(t=Number(e.substring(t,r)),isNaN(t)?DM:(r+=1)+t>e.length?NC:(e=e.substr(r,t),n.C=r+t,e))}function Zv(n){n.V=Date.now()+n.O,iF(n,n.O)}function iF(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Kv(ri(n.gb,n),e)}function kC(n){n.B&&(Et.clearTimeout(n.B),n.B=null)}function Xv(n){0==n.l.G||n.I||MF(n.l,n)}function Qd(n){kC(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,wM(n.T),zL(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function AM(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||xM(t.h,n)))if(!n.J&&xM(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;jC(t),BC(t)}OM(t),wi(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=Kv(ri(t.cb,t),6e3));if(1>=pF(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Xd(t,11)}else if((n.J||t.g==n)&&jC(t),!IC(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let m=i[e];if(t.T=m[0],m=m[1],2==t.G)if("c"==m[0]){t.I=m[1],t.ka=m[2];const I=m[3];null!=I&&(t.ma=I,t.j.info("VER="+t.ma));const T=m[4];null!=T&&(t.Ca=T,t.j.info("SVER="+t.Ca));const S=m[5];null!=S&&"number"==typeof S&&0<S&&(t.J=r=1.5*S,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const x=n.g;if(x){const O=x.g?x.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(O){var a=r.h;a.g||-1==O.indexOf("spdy")&&-1==O.indexOf("quic")&&-1==O.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(RM(a,a.h),a.h=null))}if(r.D){const ne=x.g?x.g.getResponseHeader("X-HTTP-Session-Id"):null;ne&&(r.za=ne,Cn(r.F,r.D,ne))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=PF(r,r.H?r.ka:null,r.V),l.J){gF(r.h,l);var d=l,p=r.J;p&&d.setTimeout(p),d.B&&(kC(d),Zv(d)),r.g=l}else xF(r);0<t.i.length&&$C(t)}else"stop"!=m[0]&&"close"!=m[0]||Xd(t,7);else 3==t.G&&("stop"==m[0]||"close"==m[0]?"stop"==m[0]?Xd(t,7):PM(t):"noop"!=m[0]&&t.l&&t.l.wa(m),t.A=0)}qv()}catch{}}function sF(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(vC(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function QG(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(vC(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function YG(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(vC(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(Ze=Qv.prototype).setTimeout=function(n){this.O=n},Ze.ib=function(n){n=n.target;const e=this.L;e&&3==pu(n)?e.l():this.La(n)},Ze.La=function(n){try{if(n==this.g)e:{const I=pu(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>I)&&(3!=I||rM||this.g&&(this.h.h||this.g.fa()||TF(this.g)))){this.I||4!=I||7==e||qv(),kC(this);var t=this.g.aa();this.Y=t;t:if(nF(this)){var r=TF(this.g);n="";var i=r.length,a=4==pu(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Qd(this),Xv(this);var l="";break t}this.h.i=new Et.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function GG(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.U,I,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var d,p=this.g;if((d=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!IC(d)){var m=d;break t}}m=null}if(!(t=m)){this.i=!1,this.o=3,wi(12),Qd(this),Xv(this);break e}Eg(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,AM(this,t)}this.P?(rF(this,I,l),rM&&this.i&&3==I&&(WL(this.S,this.T,"tick",this.hb),this.T.start())):(Eg(this.j,this.m,l,null),AM(this,l)),4==I&&Qd(this),this.i&&!this.I&&(4==I?MF(this.l,this):(this.i=!1,Zv(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,wi(12)):(this.o=0,wi(13)),Qd(this),Xv(this)}}}catch{}},Ze.hb=function(){if(this.g){var n=pu(this.g),e=this.g.fa();this.C<e.length&&(kC(this),rF(this,n,e),this.i&&4!=n&&Zv(this))}},Ze.cancel=function(){this.I=!0,Qd(this)},Ze.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function WG(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(qv(),wi(17)),Qd(this),this.o=2,Xv(this)):iF(this,this.V-n)};var oF=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zd(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Zd){this.h=void 0!==e?e:n.h,PC(this,n.j),this.s=n.s,this.g=n.g,OC(this,n.m),this.l=n.l,e=n.i;var t=new tw;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),aF(this,t),this.o=n.o}else n&&(t=String(n).match(oF))?(this.h=!!e,PC(this,t[1]||"",!0),this.s=Jv(t[2]||""),this.g=Jv(t[3]||"",!0),OC(this,t[4]),this.l=Jv(t[5]||"",!0),aF(this,t[6]||"",!0),this.o=Jv(t[7]||"")):(this.h=!!e,this.i=new tw(null,this.h))}function fu(n){return new Zd(n)}function PC(n,e,t){n.j=t?Jv(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function OC(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function aF(n,e,t){e instanceof tw?(n.i=e,function rW(n,e){e&&!n.j&&(Ol(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(lF(this,r),dF(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=ew(e,tW)),n.i=new tw(e,n.h))}function Cn(n,e,t){n.i.set(e,t)}function LC(n){return Cn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Jv(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function ew(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,XG),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function XG(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Zd.prototype.toString=function(){var n=[],e=this.j;e&&n.push(ew(e,uF,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(ew(e,uF,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(ew(t,"/"==t.charAt(0)?eW:JG,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",ew(t,nW)),n.join("")};var uF=/[#\/\?@]/g,JG=/[#\?:]/g,eW=/[#\?]/g,tW=/[#\?@]/g,nW=/#/g;function tw(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ol(n){n.g||(n.g=new Map,n.h=0,n.i&&function ZG(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function lF(n,e){Ol(n),e=Tg(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function cF(n,e){return Ol(n),e=Tg(n,e),n.g.has(e)}function dF(n,e,t){lF(n,e),0<t.length&&(n.i=null,n.g.set(Tg(n,e),eM(t)),n.h+=t.length)}function Tg(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function hF(n){this.l=n||sW,n=Et.PerformanceNavigationTiming?0<(n=Et.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Et.g&&Et.g.Ga&&Et.g.Ga()&&Et.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ze=tw.prototype).add=function(n,e){Ol(this),this.i=null,n=Tg(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ze.forEach=function(n,e){Ol(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},Ze.oa=function(){Ol(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},Ze.W=function(n){Ol(this);let e=[];if("string"==typeof n)cF(this,n)&&(e=e.concat(this.g.get(Tg(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Ze.set=function(n,e){return Ol(this),this.i=null,cF(this,n=Tg(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ze.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},Ze.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var i=a;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var sW=10;function fF(n){return!!n.h||!!n.g&&n.g.size>=n.j}function pF(n){return n.h?1:n.g?n.g.size:0}function xM(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function RM(n,e){n.g?n.g.add(e):n.h=e}function gF(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function mF(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return eM(n.i)}function MM(){}function oW(){this.g=new MM}function aW(n,e,t){const r=t||"";try{sF(n,function(i,a){let l=i;Hv(i)&&(l=_M(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function FC(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function nw(n){this.l=n.ac||null,this.j=n.jb||!1}function UC(n,e){kr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=NM,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}hF.prototype.cancel=function(){if(this.i=mF(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},MM.prototype.stringify=function(n){return Et.JSON.stringify(n,void 0)},MM.prototype.parse=function(n){return Et.JSON.parse(n,void 0)},qr(nw,EM),nw.prototype.g=function(){return new UC(this.l,this.j)},nw.prototype.i=function(n){return function(){return n}}({}),qr(UC,kr);var NM=0;function _F(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function rw(n){n.readyState=4,n.l=null,n.j=null,n.A=null,iw(n)}function iw(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ze=UC.prototype).open=function(n,e){if(this.readyState!=NM)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,iw(this)},Ze.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Et).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},Ze.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,rw(this)),this.readyState=NM},Ze.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,iw(this)),this.g&&(this.readyState=3,iw(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Et.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;_F(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},Ze.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?rw(this):iw(this),3==this.readyState&&_F(this)}},Ze.Va=function(n){this.g&&(this.response=this.responseText=n,rw(this))},Ze.Ua=function(n){this.g&&(this.response=n,rw(this))},Ze.ga=function(){this.g&&rw(this)},Ze.setRequestHeader=function(n,e){this.v.append(n,e)},Ze.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ze.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(UC.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var lW=Et.JSON.parse;function jn(n){kr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=yF,this.K=this.L=!1}qr(jn,kr);var yF="",cW=/^https?$/i,dW=["POST","PUT"];function vF(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,wF(n),VC(n)}function wF(n){n.D||(n.D=!0,Kr(n,"complete"),Kr(n,"error"))}function IF(n){if(n.h&&typeof XR<"u"&&(!n.C[1]||4!=pu(n)||2!=n.aa()))if(n.v&&4==pu(n))IM(n.Ha,0,n);else if(Kr(n,"readystatechange"),4==pu(n)){n.h=!1;try{const d=n.aa();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===d){var i=String(n.H).match(oF)[1]||null;if(!i&&Et.self&&Et.self.location){var a=Et.self.location.protocol;i=a.substr(0,a.length-1)}r=!cW.test(i?i.toLowerCase():"")}t=r}if(t)Kr(n,"complete"),Kr(n,"success");else{n.m=6;try{var l=2<pu(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",wF(n)}}finally{VC(n)}}}function VC(n,e){if(n.g){EF(n);const t=n.g,r=n.C[0]?yC:null;n.g=null,n.C=null,e||Kr(n,"ready");try{t.onreadystatechange=r}catch{}}}function EF(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Et.clearTimeout(n.A),n.A=null)}function pu(n){return n.g?n.g.readyState:0}function TF(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case yF:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function CF(n){let e="";return uM(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function kM(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=CF(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Cn(n,e,t))}function sw(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function bF(n){this.Ca=0,this.i=[],this.j=new AC,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=sw("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=sw("baseRetryDelayMs",5e3,n),this.bb=sw("retryDelaySeedMs",1e4,n),this.$a=sw("forwardChannelMaxRetries",2,n),this.ta=sw("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new hF(n&&n.concurrentRequestLimit),this.Fa=new oW,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function PM(n){if(DF(n),3==n.G){var e=n.U++,t=fu(n.F);Cn(t,"SID",n.I),Cn(t,"RID",e),Cn(t,"TYPE","terminate"),ow(n,t),(e=new Qv(n,n.j,e,void 0)).K=2,e.v=LC(fu(t)),t=!1,Et.navigator&&Et.navigator.sendBeacon&&(t=Et.navigator.sendBeacon(e.v.toString(),"")),!t&&Et.Image&&((new Image).src=e.v,t=!0),t||(e.g=OF(e.l,null),e.g.da(e.v)),e.F=Date.now(),Zv(e)}kF(n)}function BC(n){n.g&&(LM(n),n.g.cancel(),n.g=null)}function DF(n){BC(n),n.u&&(Et.clearTimeout(n.u),n.u=null),jC(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Et.clearTimeout(n.m),n.m=null)}function $C(n){fF(n.h)||n.m||(n.m=!0,$L(n.Ja,n),n.C=0)}function SF(n,e){var t;t=e?e.m:n.U++;const r=fu(n.F);Cn(r,"SID",n.I),Cn(r,"RID",t),Cn(r,"AID",n.T),ow(n,r),n.o&&n.s&&kM(r,n.o,n.s),t=new Qv(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=AF(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),RM(n.h,t),SM(t,r,e)}function ow(n,e){n.ia&&uM(n.ia,function(t,r){Cn(e,r,t)}),n.l&&sF({},function(t,r){Cn(e,r,t)})}function AF(n,e,t){t=Math.min(n.i.length,t);var r=n.l?ri(n.l.Ra,n.l,n):null;e:{var i=n.i;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].h,l.push("ofs="+a)):a=0:l.push("ofs="+a);let d=!0;for(let p=0;p<t;p++){let m=i[p].h;const I=i[p].g;if(m-=a,0>m)a=Math.max(0,i[p].h-100),d=!1;else try{aW(I,l,"req"+m+"_")}catch{r&&r(I)}}if(d){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function xF(n){n.g||n.u||(n.Z=1,$L(n.Ia,n),n.A=0)}function OM(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Kv(ri(n.Ia,n),NF(n,n.A)),n.A++,0))}function LM(n){null!=n.B&&(Et.clearTimeout(n.B),n.B=null)}function RF(n){n.g=new Qv(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=fu(n.sa);Cn(e,"RID","rpc"),Cn(e,"SID",n.I),Cn(e,"CI",n.L?"0":"1"),Cn(e,"AID",n.T),Cn(e,"TYPE","xmlhttp"),ow(n,e),n.o&&n.s&&kM(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=LC(fu(e)),t.s=null,t.P=!0,tF(t,n)}function jC(n){null!=n.v&&(Et.clearTimeout(n.v),n.v=null)}function MF(n,e){var t=null;if(n.g==e){jC(n),LM(n),n.g=null;var r=2}else{if(!xM(n.h,e))return;t=e.D,gF(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Kr(r=xC(),new QL(r,t)),$C(n)}else xF(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function fW(n,e){return!(pF(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Kv(ri(n.Ja,n,e),NF(n,n.C)),n.C++,0)))}(n,e)||2==r&&OM(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:Xd(n,5);break;case 4:Xd(n,10);break;case 3:Xd(n,6);break;default:Xd(n,2)}}function NF(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Xd(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=ri(n.kb,n);t||(t=new Zd("//www.google.com/images/cleardot.gif"),Et.location&&"http"==Et.location.protocol||PC(t,"https"),LC(t)),function uW(n,e){const t=new AC;if(Et.Image){const r=new Image;r.onload=wC(FC,t,r,"TestLoadImage: loaded",!0,e),r.onerror=wC(FC,t,r,"TestLoadImage: error",!1,e),r.onabort=wC(FC,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=wC(FC,t,r,"TestLoadImage: timeout",!1,e),Et.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else wi(2);n.G=0,n.l&&n.l.va(e),kF(n),DF(n)}function kF(n){if(n.G=0,n.la=[],n.l){const e=mF(n.h);(0!=e.length||0!=n.i.length)&&(DL(n.la,e),DL(n.la,n.i),n.h.i.length=0,eM(n.i),n.i.length=0),n.l.ua()}}function PF(n,e,t){var r=t instanceof Zd?fu(t):new Zd(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),OC(r,r.m);else{var i=Et.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new Zd(null,void 0);r&&PC(a,r),e&&(a.g=e),i&&OC(a,i),t&&(a.l=t),r=a}return e=n.za,(t=n.D)&&e&&Cn(r,t,e),Cn(r,"VER",n.ma),ow(n,r),r}function OF(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new jn(t&&n.Da&&!n.ra?new nw({jb:!0}):n.ra)).Ka(n.H),e}function LF(){}function HC(){if(Ig&&!(10<=Number(RG)))throw Error("Environmental error: no available transport.")}function hs(n,e){kr.call(this),this.g=new bF(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!IC(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!IC(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Cg(this)}function FF(n){TM.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function UF(){CM.call(this),this.status=1}function Cg(n){this.g=n}(Ze=jn.prototype).Ka=function(n){this.L=n},Ze.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():bM.g(),this.C=function XL(n){return n.h||(n.h=n.i())}(this.u?this.u:bM),this.g.onreadystatechange=ri(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void vF(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=Et.FormData&&n instanceof Et.FormData,!(0<=bL(dW,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,l]of t)this.g.setRequestHeader(a,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{EF(this),0<this.B&&((this.K=function hW(n){return Ig&&function xG(){return function bG(n){var e=AG;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=SL(String(TC)).split("."),t=SL("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",a=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=tM(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||tM(0==i[2].length,0==a[2].length)||tM(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ri(this.qa,this)):this.A=IM(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){vF(this,a)}},Ze.qa=function(){typeof XR<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Kr(this,"timeout"),this.abort(8))},Ze.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Kr(this,"complete"),Kr(this,"abort"),VC(this))},Ze.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),VC(this,!0)),jn.X.M.call(this)},Ze.Ha=function(){this.s||(this.F||this.v||this.l?IF(this):this.fb())},Ze.fb=function(){IF(this)},Ze.aa=function(){try{return 2<pu(this)?this.g.status:-1}catch{return-1}},Ze.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},Ze.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),lW(e)}},Ze.Ea=function(){return this.m},Ze.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ze=bF.prototype).ma=8,Ze.G=1,Ze.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new Qv(this,this.j,n,void 0);let a=this.s;if(this.S&&(a?(a=NL(a),PL(a,this.S)):a=this.S),null!==this.o||this.N||(i.H=a,a=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=AF(this,i,e),Cn(t=fu(this.F),"RID",n),Cn(t,"CVER",22),this.D&&Cn(t,"X-HTTP-Session-Id",this.D),ow(this,t),a&&(this.N?e="headers="+encodeURIComponent(String(CF(a)))+"&"+e:this.o&&kM(t,this.o,a)),RM(this.h,i),this.Ya&&Cn(t,"TYPE","init"),this.O?(Cn(t,"$req",e),Cn(t,"SID","null"),i.Z=!0,SM(i,t,null)):SM(i,t,e),this.G=2}}else 3==this.G&&(n?SF(this,n):0==this.i.length||fF(this.h)||SF(this))},Ze.Ia=function(){if(this.u=null,RF(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Kv(ri(this.eb,this),n)}},Ze.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,wi(10),BC(this),RF(this))},Ze.cb=function(){null!=this.v&&(this.v=null,BC(this),OM(this),wi(19))},Ze.kb=function(n){n?(this.j.info("Successfully pinged google.com"),wi(2)):(this.j.info("Failed to ping google.com"),wi(1))},(Ze=LF.prototype).xa=function(){},Ze.wa=function(){},Ze.va=function(){},Ze.ua=function(){},Ze.Ra=function(){},HC.prototype.g=function(n,e){return new hs(n,e)},qr(hs,kr),hs.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;wi(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=PF(n,null,n.V),$C(n)},hs.prototype.close=function(){PM(this.g)},hs.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=_M(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&$C(e)},hs.prototype.M=function(){this.g.l=null,delete this.j,PM(this.g),delete this.g,hs.X.M.call(this)},qr(FF,TM),qr(UF,CM),qr(Cg,LF),Cg.prototype.xa=function(){Kr(this.g,"a")},Cg.prototype.wa=function(n){Kr(this.g,new FF(n))},Cg.prototype.va=function(n){Kr(this.g,new UF)},Cg.prototype.ua=function(){Kr(this.g,"b")},HC.prototype.createWebChannel=HC.prototype.g,hs.prototype.send=hs.prototype.u,hs.prototype.open=hs.prototype.m,hs.prototype.close=hs.prototype.close,RC.NO_ERROR=0,RC.TIMEOUT=8,RC.HTTP_ERROR=6,ZL.COMPLETE="complete",JL.EventType=Yv,Yv.OPEN="a",Yv.CLOSE="b",Yv.ERROR="c",Yv.MESSAGE="d",kr.prototype.listen=kr.prototype.N,jn.prototype.listenOnce=jn.prototype.O,jn.prototype.getLastError=jn.prototype.Oa,jn.prototype.getLastErrorCode=jn.prototype.Ea,jn.prototype.getStatus=jn.prototype.aa,jn.prototype.getResponseJson=jn.prototype.Sa,jn.prototype.getResponseText=jn.prototype.fa,jn.prototype.send=jn.prototype.da,jn.prototype.setWithCredentials=jn.prototype.Ka,hu.createWebChannelTransport=function(){return new HC},hu.getStatEventTarget=function(){return xC()},hu.ErrorCode=RC,hu.EventType=ZL,hu.Event=Yd,hu.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},hu.FetchXmlHttpFactory=nw,hu.WebChannel=JL,hu.XhrIo=jn;const VF="@firebase/firestore";class Pr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Pr.UNAUTHENTICATED=new Pr(null),Pr.GOOGLE_CREDENTIALS=new Pr("google-credentials-uid"),Pr.FIRST_PARTY=new Pr("first-party-uid"),Pr.MOCK_USER=new Pr("mock-user");let aw="9.14.0";const Ll=new Cs.Yd("@firebase/firestore");function be(n,...e){if(Ll.logLevel<=Cs.in.DEBUG){const t=e.map(UM);Ll.debug(`Firestore (${aw}): ${n}`,...t)}}function Kn(n,...e){if(Ll.logLevel<=Cs.in.ERROR){const t=e.map(UM);Ll.error(`Firestore (${aw}): ${n}`,...t)}}function UM(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function qe(n="Unexpected state"){const e=`FIRESTORE (${aw}) INTERNAL ASSERTION FAILED: `+n;throw Kn(e),new Error(e)}function ht(n,e){n||qe()}const te_CANCELLED="cancelled",te_INVALID_ARGUMENT="invalid-argument",te_FAILED_PRECONDITION="failed-precondition",te_UNAVAILABLE="unavailable";class Te extends k.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class vr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class BF{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pW{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Pr.UNAUTHENTICATED))}shutdown(){}}class gW{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class mW{constructor(e){this.t=e,this.currentUser=Pr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=m=>this.i!==i?(i=this.i,t(m)):Promise.resolve();let l=new vr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new vr,e.enqueueRetryable(()=>a(this.currentUser))};const d=()=>{const m=l;e.enqueueRetryable((0,fe.Z)(function*(){yield m.promise,yield a(r.currentUser)}))},p=m=>{be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(m=>p(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?p(m):(be("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new vr)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ht("string"==typeof r.accessToken),new BF(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ht(null===e||"string"==typeof e),new Pr(e)}}class _W{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=Pr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(ht(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class yW{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new _W(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Pr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $F{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vW{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=a=>{null!=a.error&&be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.A;return this.A=a.token,be("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.T.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.T.getImmediate({optional:!0});a?i(a):be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ht("string"==typeof t.token),this.A=t.token,new $F(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function wW(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function Tt(n,e){return n<e?-1:n>e?1:0}class GC{constructor(e,t,r){void 0===t?t=0:t>e.length&&qe(),void 0===r?r=e.length-t:r>e.length-t&&qe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===GC.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof GC?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Gt extends GC{construct(e,t,r){return new Gt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Te(te_INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Gt(t)}static emptyPath(){return new Gt([])}}class Fe{constructor(e){this.path=e}static fromPath(e){return new Fe(Gt.fromString(e))}static fromName(e){return new Fe(Gt.fromString(e).popFirst(5))}static empty(){return new Fe(Gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Gt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Gt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Fe(new Gt(e.slice()))}}function Ul(n){return"IndexedDbTransactionError"===n.name}class Hn{constructor(e,t){this.comparator=e,this.root=t||Yr.EMPTY}insert(e,t){return new Hn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Yr.BLACK,null,null))}remove(e){return new Hn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new KC(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new KC(this.root,e,this.comparator,!1)}getReverseIterator(){return new KC(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new KC(this.root,e,this.comparator,!0)}}class KC{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yr{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Yr.RED,this.left=i??Yr.EMPTY,this.right=a??Yr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Yr(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Yr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Yr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw qe();const e=this.left.check();if(e!==this.right.check())throw qe();return e+(this.isRed()?0:1)}}Yr.EMPTY=null,Yr.RED=!0,Yr.BLACK=!1,Yr.EMPTY=new class{constructor(){this.size=0}get key(){throw qe()}get value(){throw qe()}get color(){throw qe()}get left(){throw qe()}get right(){throw qe()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Yr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class an{constructor(e){this.comparator=e,this.data=new Hn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new QF(this.data.getIterator())}getIteratorFrom(e){return new QF(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof an)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new an(this.comparator);return t.data=e,t}}class QF{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class wr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new wr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new wr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Tt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}function Gn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}wr.EMPTY_BYTE_STRING=new wr("");class xW{constructor(e,t,r,i,a,l,d,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=d,this.useFetchStreams=p}}class rh{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new rh("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof rh&&e.projectId===this.projectId&&e.database===this.database}}var rr,Wt;(Wt=rr||(rr={}))[Wt.OK=0]="OK",Wt[Wt.CANCELLED=1]="CANCELLED",Wt[Wt.UNKNOWN=2]="UNKNOWN",Wt[Wt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Wt[Wt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Wt[Wt.NOT_FOUND=5]="NOT_FOUND",Wt[Wt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Wt[Wt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Wt[Wt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Wt[Wt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Wt[Wt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Wt[Wt.ABORTED=10]="ABORTED",Wt[Wt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Wt[Wt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Wt[Wt.INTERNAL=13]="INTERNAL",Wt[Wt.UNAVAILABLE=14]="UNAVAILABLE",Wt[Wt.DATA_LOSS=15]="DATA_LOSS",new Hn(Fe.comparator),new Hn(Fe.comparator),new Hn(Fe.comparator),new an(Fe.comparator),new an(Tt);class hh{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Gn(e.integerValue));else if("doubleValue"in e){const r=Gn(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),function fw(n){return 0===n&&1/n==-1/0}(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(function nh(n){return"string"==typeof n?wr.fromBase64String(n):wr.fromUint8Array(n)}(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?function nU(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):qe()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const i of Object.keys(r))this._e(i,t),this.ae(r[i],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const i of r)this.ae(i,t)}ge(e,t){this.le(t,37),Fe.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}hh.Te=new hh,new Uint8Array(0);class ji{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ji(e,ji.DEFAULT_COLLECTION_PERCENTILE,ji.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function mb(){return typeof document<"u"?document:null}ji.DEFAULT_COLLECTION_PERCENTILE=10,ji.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ji.DEFAULT=new ji(41943040,ji.DEFAULT_COLLECTION_PERCENTILE,ji.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ji.DISABLED=new ji(-1,0,0);class EN{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&be("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class $N{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new vr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,d=new $N(e,t,l,i,a);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Te(te_CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ht(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Te(te_INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=function vb(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":qe()}(n);throw new Te(te_INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}const sB=new Map;class oB{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Te(te_INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Te(te_INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,function rq(n,e,t,r){if(!0===e&&!0===r)throw new Te(te_INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bw{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new oB({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Te(te_FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Te(te_FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new oB(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new pW;switch(t.type){case"gapi":return new yW(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Te(te_INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=sB.get(e);t&&(be("ComponentProvider","Removing Datastore"),sB.delete(e),t.terminate())}(this),Promise.resolve()}}class dq{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Pr.UNAUTHENTICATED,this.clientId=class jF{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=wW(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,fe.Z)(function*(d){be("FirestoreClient","Received user=",d.uid),yield a.authCredentialListener(d),a.user=d});return function(d){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(be("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,fe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Te(te_FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new vr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,fe.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=function Gg(n,e){if(Kn("AsyncQueue",`${e}: ${n}`),Ul(n))return new Te(te_UNAVAILABLE,`${e}: ${n}`);throw n}(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}class vq{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new EN(this,"async_queue_retry"),this.Wc=()=>{const t=mb();t&&be("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=mb();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=mb();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new vr;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,fe.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!Ul(t))throw t;be("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,Kn("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=$N.createAndSchedule(this,e,t,r,a=>this.Yc(a));return this.qc.push(i),i}zc(){this.Kc&&qe()}verifyOperationInProgress(){}Xc(){var e=this;return(0,fe.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}class yn extends Bw{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new vq,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||function gB(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new xW(n._databaseId,a,n._persistenceKey,(d=t).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d.useFetchStreams));var a,d;n._firestoreClient=new dq(n._authCredentials,n._appCheckCredentials,n._queue,r)}(this),this._firestoreClient.terminate()}}function Iq(n,e){const t="object"==typeof n?n:(0,Kt.getApp)(),r="string"==typeof n?n:e||"(default)",i=(0,Kt._getProvider)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=(0,k.P0)("firestore");a&&function iq(n,e,t,r={}){var i;const a=(n=Ht(n,Bw))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&function uw(n,...e){if(Ll.logLevel<=Cs.in.WARN){const t=e.map(UM);Ll.warn(`Firestore (${aw}): ${n}`,...t)}}("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,d;if("string"==typeof r.mockUserToken)l=r.mockUserToken,d=Pr.MOCK_USER;else{l=(0,k.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new Te(te_INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Pr(p)}n._authCredentials=new gW(new BF(l,d))}}(i,...a)}return i}!function(n,e=!0){aw=Kt.SDK_VERSION,(0,Kt._registerComponent)(new Ha.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),l=new yn(new mW(t.getProvider("auth-internal")),new vW(t.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Te(te_INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rh(d.options.projectId,p)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,Kt.registerVersion)(VF,"3.7.3",n),(0,Kt.registerVersion)(VF,"3.7.3","esm2017")}();class Fk{constructor(e){return e}}const FB="firestore",Uk=new v.OlP("angularfire2.firestore-instances");function Vq(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Fk(r)}}const Bq={provide:class Fq{constructor(){return(0,Ve.vb)(FB)}},deps:[[new v.FiY,Uk]]},$q={provide:Fk,useFactory:function Uq(n,e){const t=(0,Ve.JM)(FB,n,e);return t&&new Fk(t)},deps:[[new v.FiY,Uk],zo]};let jq=(()=>{class n{constructor(){(0,ro.KN)("angularfire",Ve.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=v.oAB({type:n}),n.\u0275inj=v.cJS({providers:[$q,Bq]}),n})();function Hq(n,...e){return{ngModule:jq,providers:[{provide:Uk,useFactory:Vq(n),multi:!0,deps:[v.R0b,v.zs3,Ve.HU,qc,[new v.FiY,qp],[new v.FiY,Wf],...e]}]}}const Gq=(0,Ve.u3)(Iq,!0);let Wq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=v.oAB({type:n,bootstrap:[_G]}),n.\u0275inj=v.cJS({imports:[_m,YD,Uv.hO.initializeApp(ZR_firebase),aP(()=>nS(ZR_firebase)),sO(()=>tT()),Tj(()=>F1()),Hq(()=>Gq())]}),n})();(0,v.G48)(),Kh().bootstrapModule(Wq).catch(n=>console.error(n))},5867:(Je,ve,M)=>{M.d(ve,{C6:()=>v.getApps,KN:()=>v.registerVersion,Mq:()=>v.getApp,ZF:()=>v.initializeApp});var v=M(9681);(0,v.registerVersion)("firebase","9.14.0","app")},127:(Je,ve,M)=>{M.d(ve,{Z:()=>v.Z});var v=M(3942);v.Z.registerVersion("firebase","9.14.0","app-compat")},9751:(Je,ve,M)=>{M.d(ve,{y:()=>_e});var v=M(2961),K=M(727),B=M(8822),re=M(9635),Z=M(2416),we=M(576),oe=M(2806);let _e=(()=>{class ie{constructor(le){le&&(this._subscribe=le)}lift(le){const $e=new ie;return $e.source=this,$e.operator=le,$e}subscribe(le,$e,Ne){const ke=function F(ie){return ie&&ie instanceof v.Lv||function U(ie){return ie&&(0,we.m)(ie.next)&&(0,we.m)(ie.error)&&(0,we.m)(ie.complete)}(ie)&&(0,K.Nn)(ie)}(le)?le:new v.Hp(le,$e,Ne);return(0,oe.x)(()=>{const{operator:Ee,source:ze}=this;ke.add(Ee?Ee.call(ke,ze):ze?this._subscribe(ke):this._trySubscribe(ke))}),ke}_trySubscribe(le){try{return this._subscribe(le)}catch($e){le.error($e)}}forEach(le,$e){return new($e=ue($e))((Ne,ke)=>{const Ee=new v.Hp({next:ze=>{try{le(ze)}catch(Ie){ke(Ie),Ee.unsubscribe()}},error:ke,complete:Ne});this.subscribe(Ee)})}_subscribe(le){var $e;return null===($e=this.source)||void 0===$e?void 0:$e.subscribe(le)}[B.L](){return this}pipe(...le){return(0,re.U)(le)(this)}toPromise(le){return new(le=ue(le))(($e,Ne)=>{let ke;this.subscribe(Ee=>ke=Ee,Ee=>Ne(Ee),()=>$e(ke))})}}return ie.create=Me=>new ie(Me),ie})();function ue(ie){var Me;return null!==(Me=ie??Z.v.Promise)&&void 0!==Me?Me:Promise}},7579:(Je,ve,M)=>{M.d(ve,{x:()=>oe});var v=M(9751),K=M(727);const re=(0,M(3888).d)(ue=>function(){ue(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Z=M(8737),we=M(2806);let oe=(()=>{class ue extends v.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(F){const ie=new _e(this,this);return ie.operator=F,ie}_throwIfClosed(){if(this.closed)throw new re}next(F){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ie of this.currentObservers)ie.next(F)}})}error(F){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=F;const{observers:ie}=this;for(;ie.length;)ie.shift().error(F)}})}complete(){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:F}=this;for(;F.length;)F.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var F;return(null===(F=this.observers)||void 0===F?void 0:F.length)>0}_trySubscribe(F){return this._throwIfClosed(),super._trySubscribe(F)}_subscribe(F){return this._throwIfClosed(),this._checkFinalizedStatuses(F),this._innerSubscribe(F)}_innerSubscribe(F){const{hasError:ie,isStopped:Me,observers:le}=this;return ie||Me?K.Lc:(this.currentObservers=null,le.push(F),new K.w0(()=>{this.currentObservers=null,(0,Z.P)(le,F)}))}_checkFinalizedStatuses(F){const{hasError:ie,thrownError:Me,isStopped:le}=this;ie?F.error(Me):le&&F.complete()}asObservable(){const F=new v.y;return F.source=this,F}}return ue.create=(U,F)=>new _e(U,F),ue})();class _e extends oe{constructor(U,F){super(),this.destination=U,this.source=F}next(U){var F,ie;null===(ie=null===(F=this.destination)||void 0===F?void 0:F.next)||void 0===ie||ie.call(F,U)}error(U){var F,ie;null===(ie=null===(F=this.destination)||void 0===F?void 0:F.error)||void 0===ie||ie.call(F,U)}complete(){var U,F;null===(F=null===(U=this.destination)||void 0===U?void 0:U.complete)||void 0===F||F.call(U)}_subscribe(U){var F,ie;return null!==(ie=null===(F=this.source)||void 0===F?void 0:F.subscribe(U))&&void 0!==ie?ie:K.Lc}}},2961:(Je,ve,M)=>{M.d(ve,{Hp:()=>Ne,Lv:()=>ie});var v=M(576),K=M(727),B=M(2416),re=M(7849);function Z(){}const we=ue("C",void 0,void 0);function ue(Ae,Ce,X){return{kind:Ae,value:Ce,error:X}}var U=M(3410),F=M(2806);class ie extends K.w0{constructor(Ce){super(),this.isStopped=!1,Ce?(this.destination=Ce,(0,K.Nn)(Ce)&&Ce.add(this)):this.destination=Ie}static create(Ce,X,Oe){return new Ne(Ce,X,Oe)}next(Ce){this.isStopped?ze(function _e(Ae){return ue("N",Ae,void 0)}(Ce),this):this._next(Ce)}error(Ce){this.isStopped?ze(function oe(Ae){return ue("E",void 0,Ae)}(Ce),this):(this.isStopped=!0,this._error(Ce))}complete(){this.isStopped?ze(we,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ce){this.destination.next(Ce)}_error(Ce){try{this.destination.error(Ce)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Me=Function.prototype.bind;function le(Ae,Ce){return Me.call(Ae,Ce)}class $e{constructor(Ce){this.partialObserver=Ce}next(Ce){const{partialObserver:X}=this;if(X.next)try{X.next(Ce)}catch(Oe){ke(Oe)}}error(Ce){const{partialObserver:X}=this;if(X.error)try{X.error(Ce)}catch(Oe){ke(Oe)}else ke(Ce)}complete(){const{partialObserver:Ce}=this;if(Ce.complete)try{Ce.complete()}catch(X){ke(X)}}}class Ne extends ie{constructor(Ce,X,Oe){let de;if(super(),(0,v.m)(Ce)||!Ce)de={next:Ce??void 0,error:X??void 0,complete:Oe??void 0};else{let q;this&&B.v.useDeprecatedNextContext?(q=Object.create(Ce),q.unsubscribe=()=>this.unsubscribe(),de={next:Ce.next&&le(Ce.next,q),error:Ce.error&&le(Ce.error,q),complete:Ce.complete&&le(Ce.complete,q)}):de=Ce}this.destination=new $e(de)}}function ke(Ae){B.v.useDeprecatedSynchronousErrorHandling?(0,F.O)(Ae):(0,re.h)(Ae)}function ze(Ae,Ce){const{onStoppedNotification:X}=B.v;X&&U.z.setTimeout(()=>X(Ae,Ce))}const Ie={closed:!0,next:Z,error:function Ee(Ae){throw Ae},complete:Z}},727:(Je,ve,M)=>{M.d(ve,{Lc:()=>we,w0:()=>Z,Nn:()=>oe});var v=M(576);const B=(0,M(3888).d)(ue=>function(F){ue(this),this.message=F?`${F.length} errors occurred during unsubscription:\n${F.map((ie,Me)=>`${Me+1}) ${ie.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=F});var re=M(8737);class Z{constructor(U){this.initialTeardown=U,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let U;if(!this.closed){this.closed=!0;const{_parentage:F}=this;if(F)if(this._parentage=null,Array.isArray(F))for(const le of F)le.remove(this);else F.remove(this);const{initialTeardown:ie}=this;if((0,v.m)(ie))try{ie()}catch(le){U=le instanceof B?le.errors:[le]}const{_finalizers:Me}=this;if(Me){this._finalizers=null;for(const le of Me)try{_e(le)}catch($e){U=U??[],$e instanceof B?U=[...U,...$e.errors]:U.push($e)}}if(U)throw new B(U)}}add(U){var F;if(U&&U!==this)if(this.closed)_e(U);else{if(U instanceof Z){if(U.closed||U._hasParent(this))return;U._addParent(this)}(this._finalizers=null!==(F=this._finalizers)&&void 0!==F?F:[]).push(U)}}_hasParent(U){const{_parentage:F}=this;return F===U||Array.isArray(F)&&F.includes(U)}_addParent(U){const{_parentage:F}=this;this._parentage=Array.isArray(F)?(F.push(U),F):F?[F,U]:U}_removeParent(U){const{_parentage:F}=this;F===U?this._parentage=null:Array.isArray(F)&&(0,re.P)(F,U)}remove(U){const{_finalizers:F}=this;F&&(0,re.P)(F,U),U instanceof Z&&U._removeParent(this)}}Z.EMPTY=(()=>{const ue=new Z;return ue.closed=!0,ue})();const we=Z.EMPTY;function oe(ue){return ue instanceof Z||ue&&"closed"in ue&&(0,v.m)(ue.remove)&&(0,v.m)(ue.add)&&(0,v.m)(ue.unsubscribe)}function _e(ue){(0,v.m)(ue)?ue():ue.unsubscribe()}},2416:(Je,ve,M)=>{M.d(ve,{v:()=>v});const v={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Je,ve,M)=>{M.d(ve,{E:()=>K});const K=new(M(9751).y)(Z=>Z.complete())},8996:(Je,ve,M)=>{M.d(ve,{D:()=>Ce});var v=M(8421),K=M(5363),B=M(9468),we=M(9751),_e=M(2202),ue=M(576),U=M(9672);function ie(X,Oe){if(!X)throw new Error("Iterable cannot be null");return new we.y(de=>{(0,U.f)(de,Oe,()=>{const q=X[Symbol.asyncIterator]();(0,U.f)(de,Oe,()=>{q.next().then(pe=>{pe.done?de.complete():de.next(pe.value)})},0,!0)})})}var Me=M(3670),le=M(8239),$e=M(1144),Ne=M(6495),ke=M(2206),Ee=M(4532),ze=M(3260);function Ce(X,Oe){return Oe?function Ae(X,Oe){if(null!=X){if((0,Me.c)(X))return function re(X,Oe){return(0,v.Xf)(X).pipe((0,B.R)(Oe),(0,K.Q)(Oe))}(X,Oe);if((0,$e.z)(X))return function oe(X,Oe){return new we.y(de=>{let q=0;return Oe.schedule(function(){q===X.length?de.complete():(de.next(X[q++]),de.closed||this.schedule())})})}(X,Oe);if((0,le.t)(X))return function Z(X,Oe){return(0,v.Xf)(X).pipe((0,B.R)(Oe),(0,K.Q)(Oe))}(X,Oe);if((0,ke.D)(X))return ie(X,Oe);if((0,Ne.T)(X))return function F(X,Oe){return new we.y(de=>{let q;return(0,U.f)(de,Oe,()=>{q=X[_e.h](),(0,U.f)(de,Oe,()=>{let pe,j;try{({value:pe,done:j}=q.next())}catch(W){return void de.error(W)}j?de.complete():de.next(pe)},0,!0)}),()=>(0,ue.m)(q?.return)&&q.return()})}(X,Oe);if((0,ze.L)(X))return function Ie(X,Oe){return ie((0,ze.Q)(X),Oe)}(X,Oe)}throw(0,Ee.z)(X)}(X,Oe):(0,v.Xf)(X)}},8421:(Je,ve,M)=>{M.d(ve,{Xf:()=>Me});var v=M(655),K=M(1144),B=M(8239),re=M(9751),Z=M(3670),we=M(2206),oe=M(4532),_e=M(6495),ue=M(3260),U=M(576),F=M(7849),ie=M(8822);function Me(Ae){if(Ae instanceof re.y)return Ae;if(null!=Ae){if((0,Z.c)(Ae))return function le(Ae){return new re.y(Ce=>{const X=Ae[ie.L]();if((0,U.m)(X.subscribe))return X.subscribe(Ce);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ae);if((0,K.z)(Ae))return function $e(Ae){return new re.y(Ce=>{for(let X=0;X<Ae.length&&!Ce.closed;X++)Ce.next(Ae[X]);Ce.complete()})}(Ae);if((0,B.t)(Ae))return function Ne(Ae){return new re.y(Ce=>{Ae.then(X=>{Ce.closed||(Ce.next(X),Ce.complete())},X=>Ce.error(X)).then(null,F.h)})}(Ae);if((0,we.D)(Ae))return Ee(Ae);if((0,_e.T)(Ae))return function ke(Ae){return new re.y(Ce=>{for(const X of Ae)if(Ce.next(X),Ce.closed)return;Ce.complete()})}(Ae);if((0,ue.L)(Ae))return function ze(Ae){return Ee((0,ue.Q)(Ae))}(Ae)}throw(0,oe.z)(Ae)}function Ee(Ae){return new re.y(Ce=>{(function Ie(Ae,Ce){var X,Oe,de,q;return(0,v.mG)(this,void 0,void 0,function*(){try{for(X=(0,v.KL)(Ae);!(Oe=yield X.next()).done;)if(Ce.next(Oe.value),Ce.closed)return}catch(pe){de={error:pe}}finally{try{Oe&&!Oe.done&&(q=X.return)&&(yield q.call(X))}finally{if(de)throw de.error}}Ce.complete()})})(Ae,Ce).catch(X=>Ce.error(X))})}},5403:(Je,ve,M)=>{M.d(ve,{x:()=>K});var v=M(2961);function K(re,Z,we,oe,_e){return new B(re,Z,we,oe,_e)}class B extends v.Lv{constructor(Z,we,oe,_e,ue,U){super(Z),this.onFinalize=ue,this.shouldUnsubscribe=U,this._next=we?function(F){try{we(F)}catch(ie){Z.error(ie)}}:super._next,this._error=_e?function(F){try{_e(F)}catch(ie){Z.error(ie)}finally{this.unsubscribe()}}:super._error,this._complete=oe?function(){try{oe()}catch(F){Z.error(F)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Z;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:we}=this;super.unsubscribe(),!we&&(null===(Z=this.onFinalize)||void 0===Z||Z.call(this))}}}},4004:(Je,ve,M)=>{M.d(ve,{U:()=>B});var v=M(4482),K=M(5403);function B(re,Z){return(0,v.e)((we,oe)=>{let _e=0;we.subscribe((0,K.x)(oe,ue=>{oe.next(re.call(Z,ue,_e++))}))})}},8189:(Je,ve,M)=>{M.d(ve,{J:()=>B});var v=M(5577),K=M(4671);function B(re=1/0){return(0,v.z)(K.y,re)}},5577:(Je,ve,M)=>{M.d(ve,{z:()=>_e});var v=M(4004),K=M(8421),B=M(4482),re=M(9672),Z=M(5403),oe=M(576);function _e(ue,U,F=1/0){return(0,oe.m)(U)?_e((ie,Me)=>(0,v.U)((le,$e)=>U(ie,le,Me,$e))((0,K.Xf)(ue(ie,Me))),F):("number"==typeof U&&(F=U),(0,B.e)((ie,Me)=>function we(ue,U,F,ie,Me,le,$e,Ne){const ke=[];let Ee=0,ze=0,Ie=!1;const Ae=()=>{Ie&&!ke.length&&!Ee&&U.complete()},Ce=Oe=>Ee<ie?X(Oe):ke.push(Oe),X=Oe=>{le&&U.next(Oe),Ee++;let de=!1;(0,K.Xf)(F(Oe,ze++)).subscribe((0,Z.x)(U,q=>{Me?.(q),le?Ce(q):U.next(q)},()=>{de=!0},void 0,()=>{if(de)try{for(Ee--;ke.length&&Ee<ie;){const q=ke.shift();$e?(0,re.f)(U,$e,()=>X(q)):X(q)}Ae()}catch(q){U.error(q)}}))};return ue.subscribe((0,Z.x)(U,Ce,()=>{Ie=!0,Ae()})),()=>{Ne?.()}}(ie,Me,ue,F)))}},5363:(Je,ve,M)=>{M.d(ve,{Q:()=>re});var v=M(9672),K=M(4482),B=M(5403);function re(Z,we=0){return(0,K.e)((oe,_e)=>{oe.subscribe((0,B.x)(_e,ue=>(0,v.f)(_e,Z,()=>_e.next(ue),we),()=>(0,v.f)(_e,Z,()=>_e.complete(),we),ue=>(0,v.f)(_e,Z,()=>_e.error(ue),we)))})}},9468:(Je,ve,M)=>{M.d(ve,{R:()=>K});var v=M(4482);function K(B,re=0){return(0,v.e)((Z,we)=>{we.add(B.schedule(()=>Z.subscribe(we),re))})}},8505:(Je,ve,M)=>{M.d(ve,{b:()=>Z});var v=M(576),K=M(4482),B=M(5403),re=M(4671);function Z(we,oe,_e){const ue=(0,v.m)(we)||oe||_e?{next:we,error:oe,complete:_e}:we;return ue?(0,K.e)((U,F)=>{var ie;null===(ie=ue.subscribe)||void 0===ie||ie.call(ue);let Me=!0;U.subscribe((0,B.x)(F,le=>{var $e;null===($e=ue.next)||void 0===$e||$e.call(ue,le),F.next(le)},()=>{var le;Me=!1,null===(le=ue.complete)||void 0===le||le.call(ue),F.complete()},le=>{var $e;Me=!1,null===($e=ue.error)||void 0===$e||$e.call(ue,le),F.error(le)},()=>{var le,$e;Me&&(null===(le=ue.unsubscribe)||void 0===le||le.call(ue)),null===($e=ue.finalize)||void 0===$e||$e.call(ue)}))}):re.y}},4408:(Je,ve,M)=>{M.d(ve,{o:()=>Z});var v=M(727);class K extends v.w0{constructor(oe,_e){super()}schedule(oe,_e=0){return this}}const B={setInterval(we,oe,..._e){const{delegate:ue}=B;return ue?.setInterval?ue.setInterval(we,oe,..._e):setInterval(we,oe,..._e)},clearInterval(we){const{delegate:oe}=B;return(oe?.clearInterval||clearInterval)(we)},delegate:void 0};var re=M(8737);class Z extends K{constructor(oe,_e){super(oe,_e),this.scheduler=oe,this.work=_e,this.pending=!1}schedule(oe,_e=0){var ue;if(this.closed)return this;this.state=oe;const U=this.id,F=this.scheduler;return null!=U&&(this.id=this.recycleAsyncId(F,U,_e)),this.pending=!0,this.delay=_e,this.id=null!==(ue=this.id)&&void 0!==ue?ue:this.requestAsyncId(F,this.id,_e),this}requestAsyncId(oe,_e,ue=0){return B.setInterval(oe.flush.bind(oe,this),ue)}recycleAsyncId(oe,_e,ue=0){if(null!=ue&&this.delay===ue&&!1===this.pending)return _e;null!=_e&&B.clearInterval(_e)}execute(oe,_e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ue=this._execute(oe,_e);if(ue)return ue;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(oe,_e){let U,ue=!1;try{this.work(oe)}catch(F){ue=!0,U=F||new Error("Scheduled action threw falsy error")}if(ue)return this.unsubscribe(),U}unsubscribe(){if(!this.closed){const{id:oe,scheduler:_e}=this,{actions:ue}=_e;this.work=this.state=this.scheduler=null,this.pending=!1,(0,re.P)(ue,this),null!=oe&&(this.id=this.recycleAsyncId(_e,oe,null)),this.delay=null,super.unsubscribe()}}}},640:(Je,ve,M)=>{M.d(ve,{v:()=>B});const v={now:()=>(v.delegate||Date).now(),delegate:void 0};class K{constructor(Z,we=K.now){this.schedulerActionCtor=Z,this.now=we}schedule(Z,we=0,oe){return new this.schedulerActionCtor(this,Z).schedule(oe,we)}}K.now=v.now;class B extends K{constructor(Z,we=K.now){super(Z,we),this.actions=[],this._active=!1}flush(Z){const{actions:we}=this;if(this._active)return void we.push(Z);let oe;this._active=!0;do{if(oe=Z.execute(Z.state,Z.delay))break}while(Z=we.shift());if(this._active=!1,oe){for(;Z=we.shift();)Z.unsubscribe();throw oe}}}},4986:(Je,ve,M)=>{M.d(ve,{z:()=>B});var v=M(4408);const B=new(M(640).v)(v.o)},3410:(Je,ve,M)=>{M.d(ve,{z:()=>v});const v={setTimeout(K,B,...re){const{delegate:Z}=v;return Z?.setTimeout?Z.setTimeout(K,B,...re):setTimeout(K,B,...re)},clearTimeout(K){const{delegate:B}=v;return(B?.clearTimeout||clearTimeout)(K)},delegate:void 0}},2202:(Je,ve,M)=>{M.d(ve,{h:()=>K});const K=function v(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Je,ve,M)=>{M.d(ve,{L:()=>v});const v="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Je,ve,M)=>{M.d(ve,{_6:()=>we,jO:()=>re,yG:()=>Z});var v=M(576);function B(oe){return oe[oe.length-1]}function re(oe){return(0,v.m)(B(oe))?oe.pop():void 0}function Z(oe){return function K(oe){return oe&&(0,v.m)(oe.schedule)}(B(oe))?oe.pop():void 0}function we(oe,_e){return"number"==typeof B(oe)?oe.pop():_e}},8737:(Je,ve,M)=>{function v(K,B){if(K){const re=K.indexOf(B);0<=re&&K.splice(re,1)}}M.d(ve,{P:()=>v})},3888:(Je,ve,M)=>{function v(K){const re=K(Z=>{Error.call(Z),Z.stack=(new Error).stack});return re.prototype=Object.create(Error.prototype),re.prototype.constructor=re,re}M.d(ve,{d:()=>v})},2806:(Je,ve,M)=>{M.d(ve,{O:()=>re,x:()=>B});var v=M(2416);let K=null;function B(Z){if(v.v.useDeprecatedSynchronousErrorHandling){const we=!K;if(we&&(K={errorThrown:!1,error:null}),Z(),we){const{errorThrown:oe,error:_e}=K;if(K=null,oe)throw _e}}else Z()}function re(Z){v.v.useDeprecatedSynchronousErrorHandling&&K&&(K.errorThrown=!0,K.error=Z)}},9672:(Je,ve,M)=>{function v(K,B,re,Z=0,we=!1){const oe=B.schedule(function(){re(),we?K.add(this.schedule(null,Z)):this.unsubscribe()},Z);if(K.add(oe),!we)return oe}M.d(ve,{f:()=>v})},4671:(Je,ve,M)=>{function v(K){return K}M.d(ve,{y:()=>v})},1144:(Je,ve,M)=>{M.d(ve,{z:()=>v});const v=K=>K&&"number"==typeof K.length&&"function"!=typeof K},2206:(Je,ve,M)=>{M.d(ve,{D:()=>K});var v=M(576);function K(B){return Symbol.asyncIterator&&(0,v.m)(B?.[Symbol.asyncIterator])}},576:(Je,ve,M)=>{function v(K){return"function"==typeof K}M.d(ve,{m:()=>v})},3670:(Je,ve,M)=>{M.d(ve,{c:()=>B});var v=M(8822),K=M(576);function B(re){return(0,K.m)(re[v.L])}},6495:(Je,ve,M)=>{M.d(ve,{T:()=>B});var v=M(2202),K=M(576);function B(re){return(0,K.m)(re?.[v.h])}},8239:(Je,ve,M)=>{M.d(ve,{t:()=>K});var v=M(576);function K(B){return(0,v.m)(B?.then)}},3260:(Je,ve,M)=>{M.d(ve,{L:()=>re,Q:()=>B});var v=M(655),K=M(576);function B(Z){return(0,v.FC)(this,arguments,function*(){const oe=Z.getReader();try{for(;;){const{value:_e,done:ue}=yield(0,v.qq)(oe.read());if(ue)return yield(0,v.qq)(void 0);yield yield(0,v.qq)(_e)}}finally{oe.releaseLock()}})}function re(Z){return(0,K.m)(Z?.getReader)}},4482:(Je,ve,M)=>{M.d(ve,{A:()=>K,e:()=>B});var v=M(576);function K(re){return(0,v.m)(re?.lift)}function B(re){return Z=>{if(K(Z))return Z.lift(function(we){try{return re(we,this)}catch(oe){this.error(oe)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(Je,ve,M)=>{M.d(ve,{U:()=>B,z:()=>K});var v=M(4671);function K(...re){return B(re)}function B(re){return 0===re.length?v.y:1===re.length?re[0]:function(we){return re.reduce((oe,_e)=>_e(oe),we)}}},7849:(Je,ve,M)=>{M.d(ve,{h:()=>B});var v=M(2416),K=M(3410);function B(re){K.z.setTimeout(()=>{const{onUnhandledError:Z}=v.v;if(!Z)throw re;Z(re)})}},4532:(Je,ve,M)=>{function v(K){return new TypeError(`You provided ${null!==K&&"object"==typeof K?"an invalid object":`'${K}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}M.d(ve,{z:()=>v})},655:(Je,ve,M)=>{function re(j,W){var J={};for(var z in j)Object.prototype.hasOwnProperty.call(j,z)&&W.indexOf(z)<0&&(J[z]=j[z]);if(null!=j&&"function"==typeof Object.getOwnPropertySymbols){var De=0;for(z=Object.getOwnPropertySymbols(j);De<z.length;De++)W.indexOf(z[De])<0&&Object.prototype.propertyIsEnumerable.call(j,z[De])&&(J[z[De]]=j[z[De]])}return J}function _e(j,W,J,z){return new(J||(J=Promise))(function(Se,rt){function Dt(nn){try{vt(z.next(nn))}catch(dn){rt(dn)}}function Qt(nn){try{vt(z.throw(nn))}catch(dn){rt(dn)}}function vt(nn){nn.done?Se(nn.value):function De(Se){return Se instanceof J?Se:new J(function(rt){rt(Se)})}(nn.value).then(Dt,Qt)}vt((z=z.apply(j,W||[])).next())})}function ke(j){return this instanceof ke?(this.v=j,this):new ke(j)}function Ee(j,W,J){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var De,z=J.apply(j,W||[]),Se=[];return De={},rt("next"),rt("throw"),rt("return"),De[Symbol.asyncIterator]=function(){return this},De;function rt($t){z[$t]&&(De[$t]=function(sr){return new Promise(function(or,vn){Se.push([$t,sr,or,vn])>1||Dt($t,sr)})})}function Dt($t,sr){try{!function Qt($t){$t.value instanceof ke?Promise.resolve($t.value.v).then(vt,nn):dn(Se[0][2],$t)}(z[$t](sr))}catch(or){dn(Se[0][3],or)}}function vt($t){Dt("next",$t)}function nn($t){Dt("throw",$t)}function dn($t,sr){$t(sr),Se.shift(),Se.length&&Dt(Se[0][0],Se[0][1])}}function Ie(j){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var J,W=j[Symbol.asyncIterator];return W?W.call(j):(j=function ie(j){var W="function"==typeof Symbol&&Symbol.iterator,J=W&&j[W],z=0;if(J)return J.call(j);if(j&&"number"==typeof j.length)return{next:function(){return j&&z>=j.length&&(j=void 0),{value:j&&j[z++],done:!j}}};throw new TypeError(W?"Object is not iterable.":"Symbol.iterator is not defined.")}(j),J={},z("next"),z("throw"),z("return"),J[Symbol.asyncIterator]=function(){return this},J);function z(Se){J[Se]=j[Se]&&function(rt){return new Promise(function(Dt,Qt){!function De(Se,rt,Dt,Qt){Promise.resolve(Qt).then(function(vt){Se({value:vt,done:Dt})},rt)}(Dt,Qt,(rt=j[Se](rt)).done,rt.value)})}}}M.d(ve,{FC:()=>Ee,KL:()=>Ie,_T:()=>re,mG:()=>_e,qq:()=>ke})},8256:(Je,ve,M)=>{M.d(ve,{tb:()=>sv,AFp:()=>oT,ip1:()=>sT,CZH:()=>Qp,hGG:()=>$x,z2F:()=>Fd,sBO:()=>Rx,Sil:()=>Xp,_Vd:()=>If,EJc:()=>Pd,Xts:()=>Um,SBq:()=>Pc,lqb:()=>Va,qLn:()=>Lc,vpe:()=>Ns,XFs:()=>Be,OlP:()=>en,zs3:()=>rl,ZZ4:()=>ou,aQg:()=>At,soG:()=>kn,YKP:()=>MA,h0i:()=>ml,PXZ:()=>_T,R0b:()=>Vi,FiY:()=>Ri,Lbi:()=>aT,g9A:()=>iu,Qsj:()=>AI,FYo:()=>hi,JOm:()=>ns,tp0:()=>xr,Rgc:()=>Rd,dDg:()=>Ex,eoX:()=>El,q4F:()=>qm,GfV:()=>xI,s_b:()=>Gp,ifc:()=>ur,MMx:()=>Ad,Lck:()=>QP,eFA:()=>wT,G48:()=>Sx,f3M:()=>xe,X6Q:()=>Dx,_c5:()=>Bx,c2e:()=>uT,zSh:()=>yf,wAp:()=>ot,vHH:()=>X,lri:()=>Il,rWj:()=>gT,D6c:()=>jx,cg1:()=>t0,kL8:()=>Rp,dqk:()=>at,Z0I:()=>yo,sIi:()=>id,CqO:()=>BE,QGY:()=>J_,QP$:()=>wo,F4k:()=>ip,RDi:()=>Fb,AaK:()=>Ne,TTD:()=>li,jDz:()=>C0,uIk:()=>Rs,Suo:()=>Q0,Xpm:()=>he,lG2:()=>Er,Yz7:()=>In,cJS:()=>Ir,oAB:()=>zt,Yjl:()=>Mt,Y36:()=>ol,_UZ:()=>Q_,qZA:()=>cd,TgZ:()=>np,LFG:()=>H,$8M:()=>ju,$Z:()=>uE,NdJ:()=>hd,CRH:()=>Z0,iGM:()=>K0,LSH:()=>Fm,_uU:()=>yp});var v=M(7579),K=M(727),B=M(9751),re=M(8189),Z=M(8421),we=M(515),oe=M(7669),_e=M(8996),U=M(2961),F=M(4482);function Me(s,o,...u){if(!0===o)return void s();if(!1===o)return;const c=new U.Hp({next:()=>{c.unsubscribe(),s()}});return o(...u).subscribe(c)}function le(s){for(let o in s)if(s[o]===le)return o;throw Error("Could not find renamed property on target object.")}function Ne(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(Ne).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function ke(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const Ee=le({__forward_ref__:le});function ze(s){return s.__forward_ref__=ze,s.toString=function(){return Ne(this())},s}function Ie(s){return function Ae(s){return"function"==typeof s&&s.hasOwnProperty(Ee)&&s.__forward_ref__===ze}(s)?s():s}class X extends Error{constructor(o,u){super(function Oe(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,u)),this.code=o}}function de(s){return"string"==typeof s?s:null==s?"":String(s)}function J(s,o){throw new X(-201,!1)}function wn(s,o){null==s&&function Ot(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function In(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Ir(s){return{providers:s.providers||[],imports:s.imports||[]}}function Ci(s){return un(s,oi)||un(s,Zn)}function yo(s){return null!==Ci(s)}function un(s,o){return s.hasOwnProperty(o)?s[o]:null}function _s(s){return s&&(s.hasOwnProperty(ys)||s.hasOwnProperty(Hi))?s[ys]:null}const oi=le({\u0275prov:le}),ys=le({\u0275inj:le}),Zn=le({ngInjectableDef:le}),Hi=le({ngInjectorDef:le});var Be=(()=>((Be=Be||{})[Be.Default=0]="Default",Be[Be.Host=1]="Host",Be[Be.Self=2]="Self",Be[Be.SkipSelf=4]="SkipSelf",Be[Be.Optional=8]="Optional",Be))();let et;function gn(s){const o=et;return et=s,o}function bi(s,o,u){const c=Ci(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&Be.Optional?null:void 0!==o?o:void J(Ne(s))}function ar(s){return{toString:s}.toString()}var Zt=(()=>((Zt=Zt||{})[Zt.OnPush=0]="OnPush",Zt[Zt.Default=1]="Default",Zt))(),ur=(()=>{return(s=ur||(ur={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",ur;var s})();const at=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),je={},ee=[],Ge=le({\u0275cmp:le}),pt=le({\u0275dir:le}),mt=le({\u0275pipe:le}),Bt=le({\u0275mod:le}),P=le({\u0275fac:le}),N=le({__NG_ELEMENT_ID__:le});let $=0;function he(s){return ar(()=>{const u=!0===s.standalone,c={},h={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Zt.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||ee,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||ur.Emulated,id:"c"+$++,styles:s.styles||ee,_:null,setInput:null,schemas:s.schemas||null,tView:null},f=s.dependencies,g=s.features;return h.inputs=Sn(s.inputs,c),h.outputs=Sn(s.outputs),g&&g.forEach(_=>_(h)),h.directiveDefs=f?()=>("function"==typeof f?f():f).map(We).filter(wt):null,h.pipeDefs=f?()=>("function"==typeof f?f():f).map(mn).filter(wt):null,h})}function We(s){return St(s)||An(s)}function wt(s){return null!==s}function zt(s){return ar(()=>({type:s.type,bootstrap:s.bootstrap||ee,declarations:s.declarations||ee,imports:s.imports||ee,exports:s.exports||ee,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function Sn(s,o){if(null==s)return je;const u={};for(const c in s)if(s.hasOwnProperty(c)){let h=s[c],f=h;Array.isArray(h)&&(f=h[1],h=h[0]),u[h]=c,o&&(o[h]=f)}return u}const Er=he;function Mt(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function St(s){return s[Ge]||null}function An(s){return s[pt]||null}function mn(s){return s[mt]||null}function wo(s){const o=St(s)||An(s)||mn(s);return null!==o&&o.standalone}function Zr(s,o){const u=s[Bt]||null;if(!u&&!0===o)throw new Error(`Type ${Ne(s)} does not have '\u0275mod' property.`);return u}function Cr(s){return Array.isArray(s)&&"object"==typeof s[1]}function ai(s){return Array.isArray(s)&&!0===s[1]}function Ih(s){return 0!=(8&s.flags)}function br(s){return 2==(2&s.flags)}function Tu(s){return 1==(1&s.flags)}function ui(s){return null!==s.template}function em(s){return 0!=(256&s[2])}function bo(s,o){return s.hasOwnProperty(P)?s[P]:null}class js{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function li(){return Dh}function Dh(s){return s.type.prototype.ngOnChanges&&(s.setInput=eI),Xl}function Xl(){const s=im(this),o=s?.current;if(o){const u=s.previous;if(u===je)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function eI(s,o,u,c){const h=im(s)||function Ah(s,o){return s[Sh]=o}(s,{previous:je,current:null}),f=h.current||(h.current={}),g=h.previous,_=this.declaredInputs[u],y=g[_];f[_]=new js(y&&y.currentValue,o,g===je),s[c]=o}li.ngInherit=!0;const Sh="__ngSimpleChanges__";function im(s){return s[Sh]||null}function Nt(s){for(;Array.isArray(s);)s=s[0];return s}function Dr(s,o){return Nt(o[s.index])}function xn(s,o){return s.data[o]}function Sr(s,o){const u=o[s];return Cr(u)?u:u[0]}function Do(s){return 64==(64&s[2])}function Ai(s,o){return null==o?null:s[o]}function Hs(s){s[18]=0}function ya(s,o){s[5]+=o;let u=s,c=s[3];for(;null!==c&&(1===o&&1===u[5]||-1===o&&0===u[5]);)c[5]+=o,u=c,c=c[3]}const ct={lFrame:sc(null),bindingsEnabled:!0};function Du(){return ct.bindingsEnabled}function me(){return ct.lFrame.lView}function Ft(){return ct.lFrame.tView}function Rn(){let s=va();for(;null!==s&&64===s.type;)s=s.parent;return s}function va(){return ct.lFrame.currentTNode}function ci(s,o){const u=ct.lFrame;u.currentTNode=s,u.isParent=o}function Su(){return ct.lFrame.isParent}function Vh(s,o){const u=ct.lFrame;u.bindingIndex=u.bindingRootIndex=s,Au(o)}function Au(s){ct.lFrame.currentDirectiveIndex=s}function $h(){return ct.lFrame.currentQueryIndex}function Ws(s){ct.lFrame.currentQueryIndex=s}function So(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function ic(s,o,u){if(u&Be.SkipSelf){let h=o,f=s;for(;!(h=h.parent,null!==h||u&Be.Host||(h=So(f),null===h||(f=f[15],10&h.type))););if(null===h)return!1;o=h,s=f}const c=ct.lFrame=jh();return c.currentTNode=o,c.lView=s,!0}function Ao(s){const o=jh(),u=s[1];ct.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function jh(){const s=ct.lFrame,o=null===s?null:s.child;return null===o?sc(s):o}function sc(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function oc(){const s=ct.lFrame;return ct.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const xu=oc;function ac(){const s=oc();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function ws(s){ct.lFrame.selectedIndex=s}function Nu(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const f=s.data[u].type.prototype,{ngAfterContentInit:g,ngAfterContentChecked:_,ngAfterViewInit:y,ngAfterViewChecked:C,ngOnDestroy:D}=f;g&&(s.contentHooks||(s.contentHooks=[])).push(-u,g),_&&((s.contentHooks||(s.contentHooks=[])).push(u,_),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,_)),y&&(s.viewHooks||(s.viewHooks=[])).push(-u,y),C&&((s.viewHooks||(s.viewHooks=[])).push(u,C),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,C)),null!=D&&(s.destroyHooks||(s.destroyHooks=[])).push(u,D)}}function wa(s,o,u){Ia(s,o,3,u)}function En(s,o,u,c){(3&s[2])===u&&Ia(s,o,u,c)}function ku(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function Ia(s,o,u,c){const f=c??-1,g=o.length-1;let _=0;for(let y=void 0!==c?65535&s[18]:0;y<g;y++)if("number"==typeof o[y+1]){if(_=o[y],null!=c&&_>=c)break}else o[y]<0&&(s[18]+=65536),(_<f||-1==f)&&(Wh(s,u,o,y),s[18]=(4294901760&s[18])+y+2),y++}function Wh(s,o,u,c){const h=u[c]<0,f=u[c+1],_=s[h?-u[c]:u[c]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{f.call(_)}finally{}}}else try{f.call(_)}finally{}}class Yi{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function Ou(s,o,u){let c=0;for(;c<u.length;){const h=u[c];if("number"==typeof h){if(0!==h)break;c++;const f=u[c++],g=u[c++],_=u[c++];s.setAttribute(o,g,_,f)}else{const f=h,g=u[++c];hc(f)?s.setProperty(o,f,g):s.setAttribute(o,f,g),c++}}return c}function zh(s){return 3===s||4===s||6===s}function hc(s){return 64===s.charCodeAt(0)}function Mo(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const h=o[c];"number"==typeof h?u=h:0===u||gm(s,u,h,null,-1===u||2===u?o[++c]:null)}}return s}function gm(s,o,u,c,h){let f=0,g=s.length;if(-1===o)g=-1;else for(;f<s.length;){const _=s[f++];if("number"==typeof _){if(_===o){g=-1;break}if(_>o){g=f-1;break}}}for(;f<s.length;){const _=s[f];if("number"==typeof _)break;if(_===u){if(null===c)return void(null!==h&&(s[f+1]=h));if(c===s[f+1])return void(s[f+2]=h)}f++,null!==c&&f++,null!==h&&f++}-1!==g&&(s.splice(g,0,o),f=g+1),s.splice(f++,0,u),null!==c&&s.splice(f++,0,c),null!==h&&s.splice(f++,0,h)}function fc(s){return-1!==s}function qs(s){return 32767&s}function Ks(s,o){let u=function qh(s){return s>>16}(s),c=o;for(;u>0;)c=c[15],u--;return c}let Ea=!0;function Lu(s){const o=Ea;return Ea=s,o}let Yh=0;const Br={};function No(s,o){const u=Fu(s,o);if(-1!==u)return u;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,pc(c.data,s),pc(o,null),pc(c.blueprint,null));const h=Uu(s,o),f=s.injectorIndex;if(fc(h)){const g=qs(h),_=Ks(h,o),y=_[1].data;for(let C=0;C<8;C++)o[f+C]=_[g+C]|y[g+C]}return o[f+8]=h,f}function pc(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Fu(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Uu(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,h=o;for(;null!==h;){if(c=Zi(h),null===c)return-1;if(u++,h=h[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function Ys(s,o,u){!function _m(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(N)&&(c=u[N]),null==c&&(c=u[N]=Yh++);const h=255&c;o.data[s+(h>>5)]|=1<<h}(s,o,u)}function Vu(s,o,u){if(u&Be.Optional||void 0!==s)return s;J()}function gc(s,o,u,c){if(u&Be.Optional&&void 0===c&&(c=null),0==(u&(Be.Self|Be.Host))){const h=s[9],f=gn(void 0);try{return h?h.get(o,c,u&Be.Optional):bi(o,c,u&Be.Optional)}finally{gn(f)}}return Vu(c,0,u)}function Qh(s,o,u,c=Be.Default,h){if(null!==s){if(1024&o[2]){const g=function wm(s,o,u,c,h){let f=s,g=o;for(;null!==f&&null!==g&&1024&g[2]&&!(256&g[2]);){const _=Bu(f,g,u,c|Be.Self,Br);if(_!==Br)return _;let y=f.parent;if(!y){const C=g[21];if(C){const D=C.get(u,Br,c);if(D!==Br)return D}y=Zi(g),g=g[15]}f=y}return h}(s,o,u,c,Br);if(g!==Br)return g}const f=Bu(s,o,u,c,Br);if(f!==Br)return f}return gc(o,u,c,h)}function Bu(s,o,u,c,h){const f=function ba(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(N)?s[N]:void 0;return"number"==typeof o?o>=0?255&o:vm:o}(u);if("function"==typeof f){if(!ic(o,s,c))return c&Be.Host?Vu(h,0,c):gc(o,u,c,h);try{const g=f(c);if(null!=g||c&Be.Optional)return g;J()}finally{xu()}}else if("number"==typeof f){let g=null,_=Fu(s,o),y=-1,C=c&Be.Host?o[16][6]:null;for((-1===_||c&Be.SkipSelf)&&(y=-1===_?Uu(s,o):o[_+8],-1!==y&&Qi(c,!1)?(g=o[1],_=qs(y),o=Ks(y,o)):_=-1);-1!==_;){const D=o[1];if(mc(f,_,D.data)){const A=Is(_,o,u,g,c,C);if(A!==Br)return A}y=o[_+8],-1!==y&&Qi(c,o[1].data[_+8]===C)&&mc(f,_,o)?(g=D,_=qs(y),o=Ks(y,o)):_=-1}}return h}function Is(s,o,u,c,h,f){const g=o[1],_=g.data[s+8],D=ko(_,g,u,null==c?br(_)&&Ea:c!=g&&0!=(3&_.type),h&Be.Host&&f===_);return null!==D?Ca(o,g,D,_):Br}function ko(s,o,u,c,h){const f=s.providerIndexes,g=o.data,_=1048575&f,y=s.directiveStart,D=f>>20,L=h?_+D:s.directiveEnd;for(let G=c?_:_+D;G<L;G++){const ae=g[G];if(G<y&&u===ae||G>=y&&ae.type===u)return G}if(h){const G=g[y];if(G&&ui(G)&&G.type===u)return y}return null}function Ca(s,o,u,c){let h=s[u];const f=o.data;if(function cc(s){return s instanceof Yi}(h)){const g=h;g.resolving&&function pe(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new X(-200,`Circular dependency in DI detected for ${s}${u}`)}(function q(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():de(s)}(f[u]));const _=Lu(g.canSeeViewProviders);g.resolving=!0;const y=g.injectImpl?gn(g.injectImpl):null;ic(s,c,Be.Default);try{h=s[u]=g.factory(void 0,f,s,c),o.firstCreatePass&&u>=c.directiveStart&&function Gh(s,o,u){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:f}=o.type.prototype;if(c){const g=Dh(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,g),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,g)}h&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,h),f&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,f),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,f))}(u,f[u],o)}finally{null!==y&&gn(y),Lu(_),g.resolving=!1,xu()}}return h}function mc(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function Qi(s,o){return!(s&Be.Self||s&Be.Host&&o)}class Po{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return Qh(this._tNode,this._lView,o,c,u)}}function vm(){return new Po(Rn(),me())}function Zi(s){const o=s[1],u=o.type;return 2===u?o.declTNode:1===u?s[6]:null}function ju(s){return function ym(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let h=0;for(;h<c;){const f=u[h];if(zh(f))break;if(0===f)h+=2;else if("number"==typeof f)for(h++;h<c&&"string"==typeof u[h];)h++;else{if(f===o)return u[h+1];h+=2}}}return null}(Rn(),s)}const Oo="__parameters__";function Sa(s,o,u){return ar(()=>{const c=function Zh(s){return function(...u){if(s){const c=s(...u);for(const h in c)this[h]=c[h]}}}(o);function h(...f){if(this instanceof h)return c.apply(this,f),this;const g=new h(...f);return _.annotation=g,_;function _(y,C,D){const A=y.hasOwnProperty(Oo)?y[Oo]:Object.defineProperty(y,Oo,{value:[]})[Oo];for(;A.length<=D;)A.push(null);return(A[D]=A[D]||[]).push(g),y}}return u&&(h.prototype=Object.create(u.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class en{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=In({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ar(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let c=s[u];Array.isArray(c)?(o===s&&(o=s.slice(0,u)),Ar(c,o)):o!==s&&o.push(c)}return o}function Xi(s,o){s.forEach(u=>Array.isArray(u)?Xi(u,o):o(u))}function Zs(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function kt(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}const Na={},pr="__NG_DI_FLAG__",Es="ngTempTokenPath",Ts=/\n/gm,E="__source";let b;function R(s){const o=b;return b=s,o}function V(s,o=Be.Default){if(void 0===b)throw new X(-203,!1);return null===b?bi(s,void 0,o):b.get(s,o&Be.Optional?null:void 0,o)}function H(s,o=Be.Default){return(function lt(){return et}()||V)(Ie(s),o)}function xe(s,o=Be.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),H(s,o)}function it(s){const o=[];for(let u=0;u<s.length;u++){const c=Ie(s[u]);if(Array.isArray(c)){if(0===c.length)throw new X(900,!1);let h,f=Be.Default;for(let g=0;g<c.length;g++){const _=c[g],y=It(_);"number"==typeof y?-1===y?h=_.token:f|=y:h=_}o.push(H(h,f))}else o.push(H(c))}return o}function dt(s,o){return s[pr]=o,s.prototype[pr]=o,s}function It(s){return s[pr]}const Ri=dt(Sa("Optional"),8),xr=dt(Sa("SkipSelf"),4);let Oa;function Fb(s){Oa=s}class Sm{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const Gb=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Mn=(()=>((Mn=Mn||{})[Mn.NONE=0]="NONE",Mn[Mn.HTML=1]="HTML",Mn[Mn.STYLE=2]="STYLE",Mn[Mn.SCRIPT=3]="SCRIPT",Mn[Mn.URL=4]="URL",Mn[Mn.RESOURCE_URL=5]="RESOURCE_URL",Mn))();function Fm(s){const o=function Yu(){const s=me();return s&&s[12]}();return o?o.sanitize(Mn.URL,s)||"":function xc(s,o){const u=function jb(s){return s instanceof Sm&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}(s,"URL")?function Vo(s){return s instanceof Sm?s.changingThisBreaksApplicationSecurity:s}(s):function Rm(s){return(s=String(s)).match(Gb)?s:"unsafe:"+s}(de(s))}const Um=new en("ENVIRONMENT_INITIALIZER"),Vm=new en("INJECTOR",-1),pf=new en("INJECTOR_DEF_TYPES");class gf{get(o,u=Na){if(u===Na){const c=new Error(`NullInjectorError: No provider for ${Ne(o)}!`);throw c.name="NullInjectorError",c}return u}}function to(...s){return{\u0275providers:Fa(0,s)}}function Fa(s,...o){const u=[],c=new Set;let h;return Xi(o,f=>{const g=f;mf(g,u,[],c)&&(h||(h=[]),h.push(g))}),void 0!==h&&Bm(h,u),u}function Bm(s,o){for(let u=0;u<s.length;u++){const{providers:h}=s[u];Xi(h,f=>{o.push(f)})}}function mf(s,o,u,c){if(!(s=Ie(s)))return!1;let h=null,f=_s(s);const g=!f&&St(s);if(f||g){if(g&&!g.standalone)return!1;h=s}else{const y=s.ngModule;if(f=_s(y),!f)return!1;h=y}const _=c.has(h);if(g){if(_)return!1;if(c.add(h),g.dependencies){const y="function"==typeof g.dependencies?g.dependencies():g.dependencies;for(const C of y)mf(C,o,u,c)}}else{if(!f)return!1;{if(null!=f.imports&&!_){let C;c.add(h);try{Xi(f.imports,D=>{mf(D,o,u,c)&&(C||(C=[]),C.push(D))})}finally{}void 0!==C&&Bm(C,o)}if(!_){const C=bo(h)||(()=>new h);o.push({provide:h,useFactory:C,deps:ee},{provide:pf,useValue:h,multi:!0},{provide:Um,useValue:()=>H(h),multi:!0})}const y=f.providers;null==y||_||Xi(y,D=>{o.push(D)})}}return h!==s&&void 0!==s.providers}const Ua=le({provide:String,useValue:le});function _f(s){return null!==s&&"object"==typeof s&&Ua in s}function $o(s){return"function"==typeof s}const yf=new en("Set Injector scope."),Qu={},jm={};let Hm;function jo(){return void 0===Hm&&(Hm=new gf),Hm}class Va{}class EI extends Va{constructor(o,u,c,h){super(),this.parent=u,this.source=c,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Wm(o,g=>this.processProvider(g)),this.records.set(Vm,Ba(void 0,this)),h.has("environment")&&this.records.set(Va,Ba(void 0,this));const f=this.records.get(yf);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(pf.multi,ee,Be.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const u=R(this),c=gn(void 0);try{return o()}finally{R(u),gn(c)}}get(o,u=Na,c=Be.Default){this.assertNotDestroyed();const h=R(this),f=gn(void 0);try{if(!(c&Be.SkipSelf)){let _=this.records.get(o);if(void 0===_){const y=function vf(s){return"function"==typeof s||"object"==typeof s&&s instanceof en}(o)&&Ci(o);_=y&&this.injectableDefInScope(y)?Ba(Nc(o),Qu):null,this.records.set(o,_)}if(null!=_)return this.hydrate(o,_)}return(c&Be.Self?jo():this.parent).get(o,u=c&Be.Optional&&u===Na?null:u)}catch(g){if("NullInjectorError"===g.name){if((g[Es]=g[Es]||[]).unshift(Ne(o)),h)throw g;return function st(s,o,u,c){const h=s[Es];throw o[E]&&h.unshift(o[E]),s.message=function er(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let h=Ne(o);if(Array.isArray(o))h=o.map(Ne).join(" -> ");else if("object"==typeof o){let f=[];for(let g in o)if(o.hasOwnProperty(g)){let _=o[g];f.push(g+":"+("string"==typeof _?JSON.stringify(_):Ne(_)))}h=`{${f.join(", ")}}`}return`${u}${c?"("+c+")":""}[${h}]: ${s.replace(Ts,"\n  ")}`}("\n"+s.message,h,u,c),s.ngTokenPath=h,s[Es]=null,s}(g,o,"R3InjectorError",this.source)}throw g}finally{gn(f),R(h)}}resolveInjectorInitializers(){const o=R(this),u=gn(void 0);try{const c=this.get(Um.multi,ee,Be.Self);for(const h of c)h()}finally{R(o),gn(u)}}toString(){const o=[],u=this.records;for(const c of u.keys())o.push(Ne(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new X(205,!1)}processProvider(o){let u=$o(o=Ie(o))?o:Ie(o&&o.provide);const c=function CI(s){return _f(s)?Ba(void 0,s.useValue):Ba(function Gm(s,o,u){let c;if($o(s)){const h=Ie(s);return bo(h)||Nc(h)}if(_f(s))c=()=>Ie(s.useValue);else if(function Mc(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...it(s.deps||[]));else if(function II(s){return!(!s||!s.useExisting)}(s))c=()=>H(Ie(s.useExisting));else{const h=Ie(s&&(s.useClass||s.provide));if(!function tD(s){return!!s.deps}(s))return bo(h)||Nc(h);c=()=>new h(...it(s.deps))}return c}(s),Qu)}(o);if($o(o)||!0!==o.multi)this.records.get(u);else{let h=this.records.get(u);h||(h=Ba(void 0,Qu,!0),h.factory=()=>it(h.multi),this.records.set(u,h)),u=o,h.multi.push(o)}this.records.set(u,c)}hydrate(o,u){return u.value===Qu&&(u.value=jm,u.value=u.factory()),"object"==typeof u.value&&u.value&&function kc(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=Ie(o.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function Nc(s){const o=Ci(s),u=null!==o?o.factory:bo(s);if(null!==u)return u;if(s instanceof en)throw new X(204,!1);if(s instanceof Function)return function TI(s){const o=s.length;if(o>0)throw function xa(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}(o,"?"),new X(204,!1);const u=function Ur(s){const o=s&&(s[oi]||s[Zn]);if(o){const u=function vo(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new X(204,!1)}function Ba(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function bI(s){return!!s.\u0275providers}function Wm(s,o){for(const u of s)Array.isArray(u)?Wm(u,o):bI(u)?Wm(u.\u0275providers,o):o(u)}class wf{}class Zk{resolveComponentFactory(o){throw function DI(s){const o=Error(`No component factory found for ${Ne(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let If=(()=>{class s{}return s.NULL=new Zk,s})();function zm(){return Zu(Rn(),me())}function Zu(s,o){return new Pc(Dr(s,o))}let Pc=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=zm,s})();function iD(s){return s instanceof Pc?s.nativeElement:s}class hi{}let AI=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function Oc(){const s=me(),u=Sr(Rn().index,s);return(Cr(u)?u:s)[11]}(),s})(),sD=(()=>{class s{}return s.\u0275prov=In({token:s,providedIn:"root",factory:()=>null}),s})();class xI{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const qm=new xI("14.2.11"),Xu={};function Qm(s){return s.ngOriginalError}class Lc{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o);this._console.error("ERROR",o),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&Qm(o);for(;u&&Qm(u);)u=Qm(u);return u||null}}const Zm=new Map;let Xm=0;const Df="__ngContext__";function _r(s,o){Cr(o)?(s[Df]=o[20],function Jm(s){Zm.set(s[20],s)}(o)):s[Df]=o}function no(s){return s instanceof Function?s():s}var ns=(()=>((ns=ns||{})[ns.Important=1]="Important",ns[ns.DashCase=2]="DashCase",ns))();function xf(s,o){return undefined(s,o)}function $c(s){const o=s[3];return ai(o)?o[3]:o}function Rf(s){return r_(s[13])}function jc(s){return r_(s[4])}function r_(s){for(;null!==s&&!ai(s);)s=s[4];return s}function Hc(s,o,u,c,h){if(null!=c){let f,g=!1;ai(c)?f=c:Cr(c)&&(g=!0,c=c[0]);const _=Nt(c);0===s&&null!==u?null==h?d_(o,u,_):$a(o,u,_,h||null,!0):1===s&&null!==u?$a(o,u,_,h||null,!0):2===s?function Pf(s,o,u){const c=kf(s,o);c&&function h_(s,o,u,c){s.removeChild(o,u,c)}(s,c,o,u)}(o,_,g):3===s&&o.destroyNode(_),null!=f&&function BD(s,o,u,c,h){const f=u[7];f!==Nt(u)&&Hc(o,s,c,f,h);for(let _=10;_<u.length;_++){const y=u[_];nl(y[1],y,s,o,c,f)}}(o,s,f,u,h)}}function s_(s,o,u){return s.createElement(o,u)}function Gc(s,o){const u=s[9],c=u.indexOf(o),h=o[3];512&o[2]&&(o[2]&=-513,ya(h,-1)),u.splice(c,1)}function u_(s,o){if(s.length<=10)return;const u=10+o,c=s[u];if(c){const h=c[17];null!==h&&h!==s&&Gc(h,c),o>0&&(s[u-1][4]=c[4]);const f=kt(s,10+o);!function Mf(s,o){nl(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const g=f[19];null!==g&&g.detachView(f[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function $I(s,o){if(!(128&o[2])){const u=o[11];u.destroyNode&&nl(s,o,u,3,null,null),function a_(s){let o=s[13];if(!o)return l_(s[1],s);for(;o;){let u=null;if(Cr(o))u=o[13];else{const c=o[10];c&&(u=c)}if(!u){for(;o&&!o[4]&&o!==s;)Cr(o)&&l_(o[1],o),o=o[3];null===o&&(o=s),Cr(o)&&l_(o[1],o),u=o&&o[4]}o=u}}(o)}}function l_(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function FD(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const h=o[u[c]];if(!(h instanceof Yi)){const f=u[c+1];if(Array.isArray(f))for(let g=0;g<f.length;g+=2){const _=h[f[g]],y=f[g+1];try{y.call(_)}finally{}}else try{f.call(h)}finally{}}}}(s,o),function LD(s,o){const u=s.cleanup,c=o[7];let h=-1;if(null!==u)for(let f=0;f<u.length-1;f+=2)if("string"==typeof u[f]){const g=u[f+1],_="function"==typeof g?g(o):Nt(o[g]),y=c[h=u[f+2]],C=u[f+3];"boolean"==typeof C?_.removeEventListener(u[f],y,C):C>=0?c[h=C]():c[h=-C].unsubscribe(),f+=2}else{const g=c[h=u[f+1]];u[f].call(g)}if(null!==c){for(let f=h+1;f<c.length;f++)(0,c[f])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const u=o[17];if(null!==u&&ai(o[3])){u!==o[3]&&Gc(u,o);const c=o[19];null!==c&&c.detachView(s)}!function mD(s){Zm.delete(s[20])}(o)}}function c_(s,o,u){return function nr(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[0];if(2&c.flags){const h=s.data[c.directiveStart].encapsulation;if(h===ur.None||h===ur.Emulated)return null}return Dr(c,u)}(s,o.parent,u)}function $a(s,o,u,c,h){s.insertBefore(o,u,c,h)}function d_(s,o,u){s.appendChild(o,u)}function Nf(s,o,u,c,h){null!==c?$a(s,o,u,c,h):d_(s,o,u)}function kf(s,o){return s.parentNode(o)}let HI=function VD(s,o,u){return 40&s.type?Dr(s,u):null};function ja(s,o,u,c){const h=c_(s,c,o),f=o[11],_=function UD(s,o,u){return HI(s,o,u)}(c.parent||o[6],c,o);if(null!=h)if(Array.isArray(u))for(let y=0;y<u.length;y++)Nf(f,h,u[y],_,!1);else Nf(f,h,u,_,!1)}function p_(s,o){if(null!==o){const u=o.type;if(3&u)return Dr(o,s);if(4&u)return Wo(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return p_(s,c);{const h=s[o.index];return ai(h)?Wo(-1,h):Nt(h)}}if(32&u)return xf(o,s)()||Nt(s[o.index]);{const c=g_(s,o);return null!==c?Array.isArray(c)?c[0]:p_($c(s[16]),c):p_(s,o.next)}}return null}function g_(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Wo(s,o){const u=10+s+1;if(u<o.length){const c=o[u],h=c[1].firstChild;if(null!==h)return p_(c,h)}return o[7]}function GI(s,o,u,c,h,f,g){for(;null!=u;){const _=c[u.index],y=u.type;if(g&&0===o&&(_&&_r(Nt(_),c),u.flags|=4),64!=(64&u.flags))if(8&y)GI(s,o,u.child,c,h,f,!1),Hc(o,s,h,_,f);else if(32&y){const C=xf(u,c);let D;for(;D=C();)Hc(o,s,h,D,f);Hc(o,s,h,_,f)}else 16&y?Of(s,o,c,u,h,f):Hc(o,s,h,_,f);u=g?u.projectionNext:u.next}}function nl(s,o,u,c,h,f){GI(u,c,s.firstChild,o,h,f,!1)}function Of(s,o,u,c,h,f){const g=u[16],y=g[6].projection[c.projection];if(Array.isArray(y))for(let C=0;C<y.length;C++)Hc(o,s,h,y[C],f);else GI(s,o,y,g[3],h,f,!0)}function zI(s,o,u){s.setAttribute(o,"style",u)}function Lf(s,o,u){""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u)}function qI(s,o,u){let c=s.length;for(;;){const h=s.indexOf(o,u);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const f=o.length;if(h+f===c||s.charCodeAt(h+f)<=32)return h}u=h+1}}const zc="ng-template";function iP(s,o,u){let c=0;for(;c<s.length;){let h=s[c++];if(u&&"class"===h){if(h=s[c],-1!==qI(h.toLowerCase(),o,0))return!0}else if(1===h){for(;c<s.length&&"string"==typeof(h=s[c++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function m_(s){return 4===s.type&&s.value!==zc}function jD(s,o,u){return o===(4!==s.type||u?s.value:zc)}function HD(s,o,u){let c=4;const h=s.attrs||[],f=function zD(s){for(let o=0;o<s.length;o++)if(zh(s[o]))return o;return s.length}(h);let g=!1;for(let _=0;_<o.length;_++){const y=o[_];if("number"!=typeof y){if(!g)if(4&c){if(c=2|1&c,""!==y&&!jD(s,y,u)||""===y&&1===o.length){if(ki(c))return!1;g=!0}}else{const C=8&c?y:o[++_];if(8&c&&null!==s.attrs){if(!iP(s.attrs,C,u)){if(ki(c))return!1;g=!0}continue}const A=GD(8&c?"class":y,h,m_(s),u);if(-1===A){if(ki(c))return!1;g=!0;continue}if(""!==C){let L;L=A>f?"":h[A+1].toLowerCase();const G=8&c?L:null;if(G&&-1!==qI(G,C,0)||2&c&&C!==L){if(ki(c))return!1;g=!0}}}}else{if(!g&&!ki(c)&&!ki(y))return!1;if(g&&ki(y))continue;g=!1,c=y|1&c}}return ki(c)||g}function ki(s){return 0==(1&s)}function GD(s,o,u,c){if(null===o)return-1;let h=0;if(c||!u){let f=!1;for(;h<o.length;){const g=o[h];if(g===s)return h;if(3===g||6===g)f=!0;else{if(1===g||2===g){let _=o[++h];for(;"string"==typeof _;)_=o[++h];continue}if(4===g)break;if(0===g){h+=4;continue}}h+=f?1:2}return-1}return function qD(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function KI(s,o,u=!1){for(let c=0;c<o.length;c++)if(HD(s,o[c],u))return!0;return!1}function QI(s,o){return s?":not("+o.trim()+")":o}function sP(s){let o=s[0],u=1,c=2,h="",f=!1;for(;u<s.length;){let g=s[u];if("string"==typeof g)if(2&c){const _=s[++u];h+="["+g+(_.length>0?'="'+_+'"':"")+"]"}else 8&c?h+="."+g:4&c&&(h+=" "+g);else""!==h&&!ki(g)&&(o+=QI(f,h),h=""),c=g,f=f||!ki(c);u++}return""!==h&&(o+=QI(f,h)),o}const Ve={};function eS(s,o=null,u=null,c){const h=tS(s,o,u,c);return h.resolveInjectorInitializers(),h}function tS(s,o=null,u=null,c,h=new Set){const f=[u||ee,to(s)];return c=c||("object"==typeof s?void 0:Ne(s)),new EI(f,o||jo(),c||null,h)}let rl=(()=>{class s{static create(u,c){if(Array.isArray(u))return eS({name:""},c,u,"");{const h=u.name??"";return eS({name:h},u.parent,u.providers,h)}}}return s.THROW_IF_NOT_FOUND=Na,s.NULL=new gf,s.\u0275prov=In({token:s,providedIn:"any",factory:()=>H(Vm)}),s.__NG_ELEMENT_ID__=-1,s})();function ol(s,o=Be.Default){const u=me();return null===u?H(s,o):Qh(Rn(),u,Ie(s),o)}function uE(){throw new Error("invalid")}function x_(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const h=u[c],f=u[c+1];if(-1!==f){const g=s.data[f];Ws(h),g.contentQueries(2,o[f],f)}}}function ed(s,o,u,c,h,f,g,_,y,C,D){const A=o.blueprint.slice();return A[0]=h,A[2]=76|c,(null!==D||s&&1024&s[2])&&(A[2]|=1024),Hs(A),A[3]=A[15]=s,A[8]=u,A[10]=g||s&&s[10],A[11]=_||s&&s[11],A[12]=y||s&&s[12]||null,A[9]=C||s&&s[9]||null,A[6]=f,A[20]=function PI(){return Xm++}(),A[21]=D,A[16]=2==o.type?s[16]:A,A}function za(s,o,u,c,h){let f=s.data[o];if(null===f)f=function TE(s,o,u,c,h){const f=va(),g=Su(),y=s.data[o]=function _P(s,o,u,c,h,f){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,g?f:f&&f.parent,u,o,c,h);return null===s.firstChild&&(s.firstChild=y),null!==f&&(g?null==f.child&&null!==y.parent&&(f.child=y):null===f.next&&(f.next=y)),y}(s,o,u,c,h),function rc(){return ct.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=u,f.value=c,f.attrs=h;const g=function qi(){const s=ct.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();f.injectorIndex=null===g?-1:g.injectorIndex}return ci(f,!0),f}function cl(s,o,u,c){if(0===u)return-1;const h=o.length;for(let f=0;f<u;f++)o.push(c),s.blueprint.push(c),s.data.push(null);return h}function CE(s,o,u){Ao(o);try{const c=s.viewQuery;null!==c&&O_(1,c,u);const h=s.template;null!==h&&jf(s,o,h,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&x_(s,o),s.staticViewQueries&&O_(2,s.viewQuery,u);const f=s.components;null!==f&&function EE(s,o){for(let u=0;u<o.length;u++)Pe(s,o[u])}(o,f)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,ac()}}function R_(s,o,u,c){const h=o[2];if(128!=(128&h)){Ao(o);try{Hs(o),function Fh(s){return ct.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&jf(s,o,u,2,c);const g=3==(3&h);if(g){const C=s.preOrderCheckHooks;null!==C&&wa(o,C,null)}else{const C=s.preOrderHooks;null!==C&&En(o,C,0,null),ku(o,0)}if(function RE(s){for(let o=Rf(s);null!==o;o=jc(o)){if(!o[2])continue;const u=o[9];for(let c=0;c<u.length;c++){const h=u[c],f=h[3];0==(512&h[2])&&ya(f,1),h[2]|=512}}}(o),function As(s){for(let o=Rf(s);null!==o;o=jc(o))for(let u=10;u<o.length;u++){const c=o[u],h=c[1];Do(c)&&R_(h,c,h.template,c[8])}}(o),null!==s.contentQueries&&x_(s,o),g){const C=s.contentCheckHooks;null!==C&&wa(o,C)}else{const C=s.contentHooks;null!==C&&En(o,C,1),ku(o,1)}!function gS(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const h=u[c];if(h<0)ws(~h);else{const f=h,g=u[++c],_=u[++c];Vh(g,f),_(2,o[f])}}}finally{ws(-1)}}(s,o);const _=s.components;null!==_&&function IE(s,o){for(let u=0;u<o.length;u++)dl(s,o[u])}(o,_);const y=s.viewQuery;if(null!==y&&O_(2,y,c),g){const C=s.viewCheckHooks;null!==C&&wa(o,C)}else{const C=s.viewHooks;null!==C&&En(o,C,2),ku(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,ya(o[3],-1))}finally{ac()}}}function jf(s,o,u,c,h){const f=function Wn(){return ct.lFrame.selectedIndex}(),g=2&c;try{ws(-1),g&&o.length>22&&function zo(s,o,u,c){if(!c)if(3==(3&o[2])){const f=s.preOrderCheckHooks;null!==f&&wa(o,f,u)}else{const f=s.preOrderHooks;null!==f&&En(o,f,0,u)}ws(u)}(s,o,22,!1),u(c,h)}finally{ws(f)}}function bE(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Gf(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Gf(s,o,u,c,h,f,g,_,y,C){const D=22+c,A=D+h,L=function N_(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:Ve);return u}(D,A),G="function"==typeof C?C():C;return L[1]={type:s,blueprint:L,template:u,queries:null,viewQuery:_,declTNode:o,data:L.slice().fill(null,D),bindingStartIndex:D,expandoStartIndex:A,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof g?g():g,firstChild:null,schemas:y,consts:G,incompleteFirstPass:!1}}function zf(s,o,u,c){const h=Qf(o);null===u?h.push(c):(h.push(u),s.firstCreatePass&&L_(s).push(c,h.length-1))}function DE(s,o,u){for(let c in s)if(s.hasOwnProperty(c)){const h=s[c];(u=null===u?{}:u).hasOwnProperty(c)?u[c].push(o,h):u[c]=[o,h]}return u}function _S(s,o){const c=o.directiveEnd,h=s.data,f=o.attrs,g=[];let _=null,y=null;for(let C=o.directiveStart;C<c;C++){const D=h[C],A=D.inputs,L=null===f||m_(o)?null:xE(A,f);g.push(L),_=DE(A,C,_),y=DE(D.outputs,C,y)}null!==_&&(_.hasOwnProperty("class")&&(o.flags|=16),_.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=g,o.inputs=_,o.outputs=y}function wS(s,o,u,c,h,f){const g=f.hostBindings;if(g){let _=s.hostBindingOpCodes;null===_&&(_=s.hostBindingOpCodes=[]);const y=~o.index;(function IP(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(_)!=y&&_.push(y),_.push(c,h,g)}}function IS(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function ES(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function bP(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;ui(o)&&(u[""]=s)}}function TS(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function k_(s,o,u,c,h){s.data[c]=h;const f=h.factory||(h.factory=bo(h.type)),g=new Yi(f,ui(h),ol);s.blueprint[c]=g,u[c]=g,wS(s,o,0,c,cl(s,u,h.hostVars,Ve),h)}function DP(s,o,u){const c=Dr(o,s),h=bE(u),f=s[10],g=is(s,ed(s,h,null,u.onPush?32:16,c,o,f,f.createRenderer(c,u),null,null,null));s[o.index]=g}function Ss(s,o,u,c,h,f){const g=Dr(s,o);!function qf(s,o,u,c,h,f,g){if(null==f)s.removeAttribute(o,h,u);else{const _=null==g?de(f):g(f,c||"",h);s.setAttribute(o,h,_,u)}}(o[11],g,f,s.value,u,c,h)}function SP(s,o,u,c,h,f){const g=f[o];if(null!==g){const _=c.setInput;for(let y=0;y<g.length;){const C=g[y++],D=g[y++],A=g[y++];null!==_?c.setInput(u,A,C,D):u[D]=A}}}function xE(s,o){let u=null,c=0;for(;c<o.length;){const h=o[c];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===u&&(u=[]),u.push(h,s[h],o[c+1])),c+=2}else c+=2;else c+=4}return u}function dl(s,o){const u=Sr(o,s);if(Do(u)){const c=u[1];48&u[2]?R_(c,u,c.template,u[8]):u[5]>0&&td(u)}}function td(s){for(let c=Rf(s);null!==c;c=jc(c))for(let h=10;h<c.length;h++){const f=c[h];if(Do(f))if(512&f[2]){const g=f[1];R_(g,f,g.template,f[8])}else f[5]>0&&td(f)}const u=s[1].components;if(null!==u)for(let c=0;c<u.length;c++){const h=Sr(u[c],s);Do(h)&&h[5]>0&&td(h)}}function Pe(s,o){const u=Sr(o,s),c=u[1];(function xs(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),CE(c,u,u[8])}function is(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Kf(s){for(;s;){s[2]|=32;const o=$c(s);if(em(s)&&!o)return s;s=o}return null}function Pi(s,o,u,c=!0){const h=o[10];h.begin&&h.begin();try{R_(s,o,s.template,u)}catch(g){throw c&&NE(o,g),g}finally{h.end&&h.end()}}function O_(s,o,u){Ws(0),o(s,u)}function Qf(s){return s[7]||(s[7]=[])}function L_(s){return s.cleanup||(s.cleanup=[])}function NE(s,o){const u=s[9],c=u?u.get(Lc,null):null;c&&c.handleError(o)}function qa(s,o,u,c,h){for(let f=0;f<u.length;){const g=u[f++],_=u[f++],y=o[g],C=s.data[g];null!==C.setInput?C.setInput(y,h,c,_):y[_]=h}}function nd(s,o,u){let c=u?s.styles:null,h=u?s.classes:null,f=0;if(null!==o)for(let g=0;g<o.length;g++){const _=o[g];"number"==typeof _?f=_:1==f?h=ke(h,_):2==f&&(c=ke(c,_+": "+o[++g]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=h:s.classesWithoutHost=h}function Zf(s,o,u,c,h=!1){for(;null!==u;){const f=o[u.index];if(null!==f&&c.push(Nt(f)),ai(f))for(let _=10;_<f.length;_++){const y=f[_],C=y[1].firstChild;null!==C&&Zf(y[1],y,C,c)}const g=u.type;if(8&g)Zf(s,o,u.child,c);else if(32&g){const _=xf(u,o);let y;for(;y=_();)c.push(y)}else if(16&g){const _=g_(o,u);if(Array.isArray(_))c.push(..._);else{const y=$c(o[16]);Zf(y[1],y,_,c,!0)}}u=h?u.projectionNext:u.next}return c}class rd{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return Zf(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(ai(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(u_(o,c),kt(u,c))}this._attachedToViewContainer=!1}$I(this._lView[1],this._lView)}onDestroy(o){zf(this._lView[1],this._lView,null,o)}markForCheck(){Kf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Pi(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new X(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function o_(s,o){nl(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new X(902,!1);this._appRef=o}}class zn extends rd{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;Pi(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class Bn extends If{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=St(o);return new pi(u,this.ngModule)}}function Xf(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class F_{constructor(o,u){this.injector=o,this.parentInjector=u}get(o,u,c){const h=this.injector.get(o,Xu,c);return h!==Xu||u===Xu?h:this.parentInjector.get(o,u,c)}}class pi extends wf{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function KD(s){return s.map(sP).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return Xf(this.componentDef.inputs)}get outputs(){return Xf(this.componentDef.outputs)}create(o,u,c,h){let f=(h=h||this.ngModule)instanceof Va?h:h?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const g=f?new F_(o,f):o,_=g.get(hi,null);if(null===_)throw new X(407,!1);const y=g.get(sD,null),C=_.createRenderer(null,this.componentDef),D=this.componentDef.selectors[0][0]||"div",A=c?function mP(s,o,u){return s.selectRootElement(o,u===ur.ShadowDom)}(C,c,this.componentDef.encapsulation):s_(C,D,function kE(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(D)),L=this.componentDef.onPush?288:272,G=Gf(0,null,null,1,0,null,null,null,null,null),ae=ed(null,G,null,L,null,null,_,C,y,g,null);let ye,Re;Ao(ae);try{const He=function DS(s,o,u,c,h,f){const g=u[1];u[22]=s;const y=za(g,22,2,"#host",null),C=y.mergedAttrs=o.hostAttrs;null!==C&&(nd(y,C,!0),null!==s&&(Ou(h,s,C),null!==y.classes&&Lf(h,s,y.classes),null!==y.styles&&zI(h,s,y.styles)));const D=c.createRenderer(s,o),A=ed(u,bE(o),null,o.onPush?32:16,u[22],y,c,D,f||null,null,null);return g.firstCreatePass&&(Ys(No(y,u),g,o.type),ES(g,y),TS(y,u.length,1)),is(u,A),u[22]=A}(A,this.componentDef,ae,_,C);if(A)if(c)Ou(C,A,["ng-version",qm.full]);else{const{attrs:Ye,classes:ge}=function YD(s){const o=[],u=[];let c=1,h=2;for(;c<s.length;){let f=s[c];if("string"==typeof f)2===h?""!==f&&o.push(f,s[++c]):8===h&&u.push(f);else{if(!ki(h))break;h=f}c++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);Ye&&Ou(C,A,Ye),ge&&ge.length>0&&Lf(C,A,ge.join(" "))}if(Re=xn(G,22),void 0!==u){const Ye=Re.projection=[];for(let ge=0;ge<this.ngContentSelectors.length;ge++){const ut=u[ge];Ye.push(null!=ut?Array.from(ut):null)}}ye=function V_(s,o,u,c){const h=u[1],f=function wP(s,o,u){const c=Rn();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),k_(s,c,o,cl(s,o,1,null),u),_S(s,c));const h=Ca(o,s,c.directiveStart,c);_r(h,o);const f=Dr(c,o);return f&&_r(f,o),h}(h,u,o);if(s[8]=u[8]=f,null!==c)for(const _ of c)_(f,o);if(o.contentQueries){const _=Rn();o.contentQueries(1,f,_.directiveStart)}const g=Rn();return!h.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(ws(g.index),wS(u[1],g,0,g.directiveStart,g.directiveEnd,o),IS(o,f)),f}(He,this.componentDef,ae,[SS]),CE(G,ae,null)}finally{ac()}return new bS(this.componentType,ye,Zu(Re,ae),ae,Re)}}class bS extends class nD{}{constructor(o,u,c,h,f){super(),this.location=c,this._rootLView=h,this._tNode=f,this.instance=u,this.hostView=this.changeDetectorRef=new zn(h),this.componentType=o}setInput(o,u){const c=this._tNode.inputs;let h;if(null!==c&&(h=c[o])){const f=this._rootLView;qa(f[1],f,h,o,u),function vS(s,o){const u=Sr(o,s);16&u[2]||(u[2]|=32)}(f,this._tNode.index)}}get injector(){return new Po(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function SS(){const s=Rn();Nu(me()[1],s)}let Oi=null;function io(){if(!Oi){const s=at.Symbol;if(s&&s.iterator)Oi=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const c=o[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Oi=c)}}}return Oi}function id(s){return!!od(s)&&(Array.isArray(s)||!(s instanceof Map)&&io()in s)}function od(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Rs(s,o,u,c){const h=me();return function Mr(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}(h,function Gs(){return ct.lFrame.bindingIndex++}(),o)&&(Ft(),Ss(function Jt(){const s=ct.lFrame;return xn(s.tView,s.selectedIndex)}(),h,s,o,u,c)),Rs}function Y_(s,o,u,c,h){const g=h?"class":"style";qa(s,u,o.inputs[g],g,c)}function np(s,o,u,c){const h=me(),f=Ft(),g=22+s,_=h[11],y=h[g]=s_(_,o,function Hh(){return ct.lFrame.currentNamespace}()),C=f.firstCreatePass?function VE(s,o,u,c,h,f,g){const _=o.consts,C=za(o,s,2,h,Ai(_,f));return function SE(s,o,u,c){let h=!1;if(Du()){const f=function TP(s,o,u){const c=s.directiveRegistry;let h=null;if(c)for(let f=0;f<c.length;f++){const g=c[f];KI(u,g.selectors,!1)&&(h||(h=[]),Ys(No(u,o),s,g.type),ui(g)?(ES(s,u),h.unshift(g)):h.push(g))}return h}(s,o,u),g=null===c?null:{"":-1};if(null!==f){h=!0,TS(u,s.data.length,f.length);for(let D=0;D<f.length;D++){const A=f[D];A.providersResolver&&A.providersResolver(A)}let _=!1,y=!1,C=cl(s,o,f.length,null);for(let D=0;D<f.length;D++){const A=f[D];u.mergedAttrs=Mo(u.mergedAttrs,A.hostAttrs),k_(s,u,o,C,A),bP(C,A,g),null!==A.contentQueries&&(u.flags|=8),(null!==A.hostBindings||null!==A.hostAttrs||0!==A.hostVars)&&(u.flags|=128);const L=A.type.prototype;!_&&(L.ngOnChanges||L.ngOnInit||L.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),_=!0),!y&&(L.ngOnChanges||L.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),y=!0),C++}_S(s,u)}g&&function CP(s,o,u){if(o){const c=s.localNames=[];for(let h=0;h<o.length;h+=2){const f=u[o[h+1]];if(null==f)throw new X(-301,!1);c.push(o[h],f)}}}(u,c,g)}return u.mergedAttrs=Mo(u.mergedAttrs,u.attrs),h}(o,u,C,Ai(_,g)),null!==C.attrs&&nd(C,C.attrs,!1),null!==C.mergedAttrs&&nd(C,C.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,C),C}(g,f,h,0,o,u,c):f.data[g];ci(C,!0);const D=C.mergedAttrs;null!==D&&Ou(_,y,D);const A=C.classes;null!==A&&Lf(_,y,A);const L=C.styles;return null!==L&&zI(_,y,L),64!=(64&C.flags)&&ja(f,h,y,C),0===function rI(){return ct.lFrame.elementDepthCount}()&&_r(y,h),function ec(){ct.lFrame.elementDepthCount++}(),Tu(C)&&(function M_(s,o,u){!Du()||(function EP(s,o,u,c){const h=u.directiveStart,f=u.directiveEnd;s.firstCreatePass||No(u,o),_r(c,o);const g=u.initialInputs;for(let _=h;_<f;_++){const y=s.data[_],C=ui(y);C&&DP(o,u,y);const D=Ca(o,s,_,u);_r(D,o),null!==g&&SP(0,_-h,D,y,0,g),C&&(Sr(u.index,o)[8]=D)}}(s,o,u,Dr(u,o)),128==(128&u.flags)&&function AE(s,o,u){const c=u.directiveStart,h=u.directiveEnd,f=u.index,g=function aI(){return ct.lFrame.currentDirectiveIndex}();try{ws(f);for(let _=c;_<h;_++){const y=s.data[_],C=o[_];Au(_),(null!==y.hostBindings||0!==y.hostVars||null!==y.hostAttrs)&&IS(y,C)}}finally{ws(-1),Au(g)}}(s,o,u))}(f,h,C),function mS(s,o,u){if(Ih(o)){const h=o.directiveEnd;for(let f=o.directiveStart;f<h;f++){const g=s.data[f];g.contentQueries&&g.contentQueries(1,u[f],f)}}}(f,C,h)),null!==c&&function Hf(s,o,u=Dr){const c=o.localNames;if(null!==c){let h=o.index+1;for(let f=0;f<c.length;f+=2){const g=c[f+1],_=-1===g?u(o,s):s[g];s[h++]=_}}}(h,C),np}function cd(){let s=Rn();Su()?function Lh(){ct.lFrame.isParent=!1}():(s=s.parent,ci(s,!1));const o=s;!function um(){ct.lFrame.elementDepthCount--}();const u=Ft();return u.firstCreatePass&&(Nu(u,s),Ih(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function hm(s){return 0!=(16&s.flags)}(o)&&Y_(u,o,me(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function fm(s){return 0!=(32&s.flags)}(o)&&Y_(u,o,me(),o.stylesWithoutHost,!1),cd}function Q_(s,o,u,c){return np(s,o,u,c),cd(),Q_}function J_(s){return!!s&&"function"==typeof s.then}function ip(s){return!!s&&"function"==typeof s.subscribe}const BE=ip;function hd(s,o,u,c){const h=me(),f=Ft(),g=Rn();return function $E(s,o,u,c,h,f,g,_){const y=Tu(c),D=s.firstCreatePass&&L_(s),A=o[8],L=Qf(o);let G=!0;if(3&c.type||_){const Re=Dr(c,o),He=_?_(Re):Re,Ye=L.length,ge=_?nt=>_(Nt(nt[c.index])):c.index;let ut=null;if(!_&&y&&(ut=function ey(s,o,u,c){const h=s.cleanup;if(null!=h)for(let f=0;f<h.length-1;f+=2){const g=h[f];if(g===u&&h[f+1]===c){const _=o[7],y=h[f+2];return _.length>y?_[y]:null}"string"==typeof g&&(f+=2)}return null}(s,o,h,c.index)),null!==ut)(ut.__ngLastListenerFn__||ut).__ngNextListenerFn__=f,ut.__ngLastListenerFn__=f,G=!1;else{f=jE(c,o,A,f,!1);const nt=u.listen(He,h,f);L.push(f,nt),D&&D.push(h,ge,Ye,Ye+1)}}else f=jE(c,o,A,f,!1);const ae=c.outputs;let ye;if(G&&null!==ae&&(ye=ae[h])){const Re=ye.length;if(Re)for(let He=0;He<Re;He+=2){const hn=o[ye[He]][ye[He+1]].subscribe(f),au=L.length;L.push(f,hn),D&&D.push(h,c.index,au,-(au+1))}}}(f,h,h[11],g,s,o,0,c),hd}function sp(s,o,u,c){try{return!1!==u(c)}catch(h){return NE(s,h),!1}}function jE(s,o,u,c,h){return function f(g){if(g===Function)return c;Kf(2&s.flags?Sr(s.index,o):o);let y=sp(o,0,c,g),C=f.__ngNextListenerFn__;for(;C;)y=sp(o,0,C,g)&&y,C=C.__ngNextListenerFn__;return h&&!1===y&&(g.preventDefault(),g.returnValue=!1),y}}function yp(s,o=""){const u=me(),c=Ft(),h=s+22,f=c.firstCreatePass?za(c,h,1,o,null):c.data[h],g=u[h]=function i_(s,o){return s.createText(o)}(u[11],o);ja(c,u,g,f),ci(f,!1)}const eu=void 0;var BP=["en",[["a","p"],["AM","PM"],eu],[["AM","PM"],eu,eu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],eu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],eu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",eu,"{1} 'at' {0}",eu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Ey(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let Qo={};function t0(s){const o=function JS(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=n0(o);if(u)return u;const c=o.split("-")[0];if(u=n0(c),u)return u;if("en"===c)return BP;throw new X(701,!1)}function Rp(s){return t0(s)[ot.PluralCase]}function n0(s){return s in Qo||(Qo[s]=at.ng&&at.ng.common&&at.ng.common.locales&&at.ng.common.locales[s]),Qo[s]}var ot=(()=>((ot=ot||{})[ot.LocaleId=0]="LocaleId",ot[ot.DayPeriodsFormat=1]="DayPeriodsFormat",ot[ot.DayPeriodsStandalone=2]="DayPeriodsStandalone",ot[ot.DaysFormat=3]="DaysFormat",ot[ot.DaysStandalone=4]="DaysStandalone",ot[ot.MonthsFormat=5]="MonthsFormat",ot[ot.MonthsStandalone=6]="MonthsStandalone",ot[ot.Eras=7]="Eras",ot[ot.FirstDayOfWeek=8]="FirstDayOfWeek",ot[ot.WeekendRange=9]="WeekendRange",ot[ot.DateFormat=10]="DateFormat",ot[ot.TimeFormat=11]="TimeFormat",ot[ot.DateTimeFormat=12]="DateTimeFormat",ot[ot.NumberSymbols=13]="NumberSymbols",ot[ot.NumberFormats=14]="NumberFormats",ot[ot.CurrencyCode=15]="CurrencyCode",ot[ot.CurrencySymbol=16]="CurrencySymbol",ot[ot.CurrencyName=17]="CurrencyName",ot[ot.Currencies=18]="Currencies",ot[ot.Directionality=19]="Directionality",ot[ot.PluralCase=20]="PluralCase",ot[ot.ExtraData=21]="ExtraData",ot))();const gl="en-US";let nA=gl;class ml{}class MA{}function QP(s,o){return new NA(s,o??null)}class NA extends ml{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Bn(this);const c=Zr(o);this._bootstrapComponents=no(c.bootstrap),this._r3Injector=tS(o,u,[{provide:ml,useValue:this},{provide:If,useValue:this.componentFactoryResolver}],Ne(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Sd extends MA{constructor(o){super(),this.moduleType=o}create(o){return new NA(this.moduleType,o)}}class ZP extends ml{constructor(o,u,c){super(),this.componentFactoryResolver=new Bn(this),this.instance=null;const h=new EI([...o,{provide:ml,useValue:this},{provide:If,useValue:this.componentFactoryResolver}],u||jo(),c,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function Ad(s,o,u=null){return new ZP(s,o,u).injector}let $y=(()=>{class s{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const c=Fa(0,u.type),h=c.length>0?Ad([c],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,h)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=In({token:s,providedIn:"environment",factory:()=>new s(H(Va))}),s})();function C0(s){s.getStandaloneInjector=o=>o.get($y).getOrCreateStandaloneInjector(s)}function Qy(s){return o=>{setTimeout(s,void 0,o)}}const Ns=class $A extends v.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){let h=o,f=u||(()=>null),g=c;if(o&&"object"==typeof o){const y=o;h=y.next?.bind(y),f=y.error?.bind(y),g=y.complete?.bind(y)}this.__isAsync&&(f=Qy(f),h&&(h=Qy(h)),g&&(g=Qy(g)));const _=super.subscribe({next:h,error:f,complete:g});return o instanceof K.w0&&o.add(_),_}};function jA(){return this._results[io()]()}class Zy{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=io(),c=Zy.prototype;c[u]||(c[u]=jA)}get changes(){return this._changes||(this._changes=new Ns)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const h=Ar(o);(this._changesDetected=!function Em(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let h=s[c],f=o[c];if(u&&(h=u(h),f=u(f)),f!==h)return!1}return!0}(c._results,h,u))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Rd=(()=>{class s{}return s.__NG_ELEMENT_ID__=GA,s})();const Xy=Rd,HA=class extends Xy{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o,u){const c=this._declarationTContainer.tViews,h=ed(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,u||null);h[17]=this._declarationLView[this._declarationTContainer.index];const g=this._declarationLView[19];return null!==g&&(h[19]=g.createEmbeddedView(c)),CE(c,h,o),new rd(h)}};function GA(){return Hp(Rn(),me())}function Hp(s,o){return 4&s.type?new HA(o,s,Zu(s,o)):null}let Gp=(()=>{class s{}return s.__NG_ELEMENT_ID__=WA,s})();function WA(){return $0(Rn(),me())}const U0=Gp,V0=class extends U0{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return Zu(this._hostTNode,this._hostLView)}get injector(){return new Po(this._hostTNode,this._hostLView)}get parentInjector(){const o=Uu(this._hostTNode,this._hostLView);if(fc(o)){const u=Ks(o,this._hostLView),c=qs(o);return new Po(u[1].data[c+8],u)}return new Po(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=B0(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,c){let h,f;"number"==typeof c?h=c:null!=c&&(h=c.index,f=c.injector);const g=o.createEmbeddedView(u||{},f);return this.insert(g,h),g}createComponent(o,u,c,h,f){const g=o&&!function Aa(s){return"function"==typeof s}(o);let _;if(g)_=u;else{const A=u||{};_=A.index,c=A.injector,h=A.projectableNodes,f=A.environmentInjector||A.ngModuleRef}const y=g?o:new pi(St(o)),C=c||this.parentInjector;if(!f&&null==y.ngModule){const L=(g?C:this.parentInjector).get(Va,null);L&&(f=L)}const D=y.create(C,h,void 0,f);return this.insert(D.hostView,_),D}insert(o,u){const c=o._lView,h=c[1];if(function kh(s){return ai(s[3])}(c)){const D=this.indexOf(o);if(-1!==D)this.detach(D);else{const A=c[3],L=new V0(A,A[6],A[3]);L.detach(L.indexOf(o))}}const f=this._adjustIndex(u),g=this._lContainer;!function PD(s,o,u,c){const h=10+c,f=u.length;c>0&&(u[h-1][4]=o),c<f-10?(o[4]=u[h],Zs(u,10+c,o)):(u.push(o),o[4]=null),o[3]=u;const g=o[17];null!==g&&u!==g&&function OD(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(g,o);const _=o[19];null!==_&&_.insertView(s),o[2]|=64}(h,c,g,f);const _=Wo(f,g),y=c[11],C=kf(y,g[7]);return null!==C&&function BI(s,o,u,c,h,f){c[0]=h,c[6]=o,nl(s,c,u,1,h,f)}(h,g[6],y,c,C,_),o.attachToViewContainerRef(),Zs(Jy(g),f,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=B0(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=u_(this._lContainer,u);c&&(kt(Jy(this._lContainer),u),$I(c[1],c))}detach(o){const u=this._adjustIndex(o,-1),c=u_(this._lContainer,u);return c&&null!=kt(Jy(this._lContainer),u)?new rd(c):null}_adjustIndex(o,u=0){return o??this.length+u}};function B0(s){return s[8]}function Jy(s){return s[8]||(s[8]=[])}function $0(s,o){let u;const c=o[s.index];if(ai(c))u=c;else{let h;if(8&s.type)h=Nt(c);else{const f=o[11];h=f.createComment("");const g=Dr(s,o);$a(f,kf(f,g),h,function jI(s,o){return s.nextSibling(o)}(f,g),!1)}o[s.index]=u=function Hr(s,o,u,c){return new Array(s,!0,!1,o,null,0,c,u,null,null)}(c,o,h,s),is(o,u)}return new V0(u,s,o)}class ev{constructor(o){this.queryList=o,this.matches=null}clone(){return new ev(this.queryList)}setDirty(){this.queryList.setDirty()}}class tv{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,h=[];for(let f=0;f<c;f++){const g=u.getByIndex(f);h.push(this.queries[g.indexInDeclarationView].clone())}return new tv(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==Kp(o,u).matches&&this.queries[u].setDirty()}}class qA{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class Wp{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const h=null!==u?u.length:0,f=this.getByIndex(c).embeddedTView(o,h);f&&(f.indexInDeclarationView=c,null!==u?u.push(f):u=[f])}return null!==u?new Wp(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class G0{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new G0(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const f=c[h];this.matchTNodeWithReadOption(o,u,W0(u,f)),this.matchTNodeWithReadOption(o,u,ko(u,o,f,!1,!1))}else c===Rd?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,ko(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===Pc||h===Gp||h===Rd&&4&u.type)this.addMatch(u.index,-2);else{const f=ko(u,o,h,!1,!1);null!==f&&this.addMatch(u.index,f)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function W0(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function KA(s,o,u,c){return-1===u?function z0(s,o){return 11&s.type?Zu(s,o):4&s.type?Hp(s,o):null}(o,s):-2===u?function YA(s,o,u){return u===Pc?Zu(o,s):u===Rd?Hp(o,s):u===Gp?$0(o,s):void 0}(s,o,c):Ca(s,s[1],u,o)}function q0(s,o,u,c){const h=o[19].queries[c];if(null===h.matches){const f=s.data,g=u.matches,_=[];for(let y=0;y<g.length;y+=2){const C=g[y];_.push(C<0?null:KA(o,f[C],g[y+1],u.metadata.read))}h.matches=_}return h.matches}function nv(s,o,u,c){const h=s.queries.getByIndex(u),f=h.matches;if(null!==f){const g=q0(s,o,h,u);for(let _=0;_<f.length;_+=2){const y=f[_];if(y>0)c.push(g[_/2]);else{const C=f[_+1],D=o[-y];for(let A=10;A<D.length;A++){const L=D[A];L[17]===L[3]&&nv(L[1],L,C,c)}if(null!==D[9]){const A=D[9];for(let L=0;L<A.length;L++){const G=A[L];nv(G[1],G,C,c)}}}}}return c}function K0(s){const o=me(),u=Ft(),c=$h();Ws(c+1);const h=Kp(u,c);if(s.dirty&&function tI(s){return 4==(4&s[2])}(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const f=h.crossesNgTemplate?nv(u,o,c,[]):q0(u,o,h,c);s.reset(f,iD),s.notifyOnChanges()}return!0}return!1}function Q0(s,o,u,c){const h=Ft();if(h.firstCreatePass){const f=Rn();(function qp(s,o,u){null===s.queries&&(s.queries=new Wp),s.queries.track(new G0(o,u))})(h,new qA(o,u,c),f.index),function iO(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(h,s),2==(2&u)&&(h.staticContentQueries=!0)}!function zp(s,o,u){const c=new Zy(4==(4&u));zf(s,o,c,c.destroy),null===o[19]&&(o[19]=new tv),o[19].queries.push(new ev(c))}(h,me(),u)}function Z0(){return function X0(s,o){return s[19].queries[o].queryList}(me(),$h())}function Kp(s,o){return s.queries.getByIndex(o)}function Nd(...s){}const sT=new en("Application Initializer");let Qp=(()=>{class s{constructor(u){this.appInits=u,this.resolve=Nd,this.reject=Nd,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const f=this.appInits[h]();if(J_(f))u.push(f);else if(BE(f)){const g=new Promise((_,y)=>{f.subscribe({complete:_,error:y})});u.push(g)}}Promise.all(u).then(()=>{c()}).catch(h=>{this.reject(h)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(H(sT,8))},s.\u0275prov=In({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const oT=new en("AppId",{providedIn:"root",factory:function iv(){return`${kd()}${kd()}${kd()}`}});function kd(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const iu=new en("Platform Initializer"),aT=new en("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),sv=new en("appBootstrapListener");let uT=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=In({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const kn=new en("LocaleId",{providedIn:"root",factory:()=>xe(kn,Be.Optional|Be.SkipSelf)||function lT(){return typeof $localize<"u"&&$localize.locale||gl}()}),Pd=new en("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class _x{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let Xp=(()=>{class s{compileModuleSync(u){return new Sd(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),f=no(Zr(u).declarations).reduce((g,_)=>{const y=St(_);return y&&g.push(new pi(y)),g},[]);return new _x(c,f)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=In({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const hT=(()=>Promise.resolve(0))();function $n(s){typeof Zone>"u"?hT.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Vi{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ns(!1),this.onMicrotaskEmpty=new Ns(!1),this.onStable=new Ns(!1),this.onError=new Ns(!1),typeof Zone>"u")throw new X(908,!1);Zone.assertZonePatched();const h=this;if(h._nesting=0,h._outer=h._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const f=Zone.AsyncStackTaggingZoneSpec;h._inner=h._inner.fork(new f("Angular"))}Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&u,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function fT(){let s=at.requestAnimationFrame,o=at.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function pT(s){const o=()=>{!function wx(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(at,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Od(s),s.isCheckStableRunning=!0,ov(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Od(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,h,f,g,_)=>{try{return Ld(s),u.invokeTask(h,f,g,_)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||s.shouldCoalesceRunChangeDetection)&&o(),su(s)}},onInvoke:(u,c,h,f,g,_,y)=>{try{return Ld(s),u.invoke(h,f,g,_,y)}finally{s.shouldCoalesceRunChangeDetection&&o(),su(s)}},onHasTask:(u,c,h,f)=>{u.hasTask(h,f),c===h&&("microTask"==f.change?(s._hasPendingMicrotasks=f.microTask,Od(s),ov(s)):"macroTask"==f.change&&(s.hasPendingMacrotasks=f.macroTask))},onHandleError:(u,c,h,f)=>(u.handleError(h,f),s.runOutsideAngular(()=>s.onError.emit(f)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Vi.isInAngularZone())throw new X(909,!1)}static assertNotInAngularZone(){if(Vi.isInAngularZone())throw new X(909,!1)}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,h){const f=this._inner,g=f.scheduleEventTask("NgZoneEvent: "+h,o,vx,Nd,Nd);try{return f.runTask(g,u,c)}finally{f.cancelTask(g)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const vx={};function ov(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Od(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function Ld(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function su(s){s._nesting--,ov(s)}class Ix{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ns,this.onMicrotaskEmpty=new Ns,this.onStable=new Ns,this.onError=new Ns}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,h){return o.apply(u,c)}}const Il=new en(""),gT=new en("");let tg,Ex=(()=>{class s{constructor(u,c,h){this._ngZone=u,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,tg||(function eg(s){tg=s}(h),h.addToWindow(c)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Vi.assertNotInAngularZone(),$n(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())$n(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,h){let f=-1;c&&c>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(g=>g.timeoutId!==f),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:f,updateCb:h})}whenStable(u,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,c,h){return[]}}return s.\u0275fac=function(u){return new(u||s)(H(Vi),H(El),H(gT))},s.\u0275prov=In({token:s,factory:s.\u0275fac}),s})(),El=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return tg?.findTestabilityInTree(this,u,c)??null}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=In({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),lo=null;const av=new en("AllowMultipleToken"),ng=new en("PlatformDestroyListeners");class _T{constructor(o,u){this.name=o,this.token=u}}function wT(s,o,u=[]){const c=`Platform: ${o}`,h=new en(c);return(f=[])=>{let g=dv();if(!g||g.injector.get(av,!1)){const _=[...u,...f,{provide:h,useValue:!0}];s?s(_):function yT(s){if(lo&&!lo.get(av,!1))throw new X(400,!1);lo=s;const o=s.get(ET);(function vT(s){const o=s.get(iu,null);o&&o.forEach(u=>u())})(s)}(function rg(s=[],o){return rl.create({name:o,providers:[{provide:yf,useValue:"platform"},{provide:ng,useValue:new Set([()=>lo=null])},...s]})}(_,c))}return function cv(s){const o=dv();if(!o)throw new X(401,!1);return o}()}}function dv(){return lo?.get(ET)??null}let ET=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const h=function TT(s,o){let u;return u="noop"===s?new Ix:("zone.js"===s?void 0:s)||new Vi(o),u}(c?.ngZone,function hv(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(c)),f=[{provide:Vi,useValue:h}];return h.run(()=>{const g=rl.create({providers:f,parent:this.injector,name:u.moduleType.name}),_=u.create(g),y=_.injector.get(Lc,null);if(!y)throw new X(402,!1);return h.runOutsideAngular(()=>{const C=h.onError.subscribe({next:D=>{y.handleError(D)}});_.onDestroy(()=>{Ud(this._modules,_),C.unsubscribe()})}),function CT(s,o,u){try{const c=u();return J_(c)?c.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(y,h,()=>{const C=_.injector.get(Qp);return C.runInitializers(),C.donePromise.then(()=>(function rA(s){wn(s,"Expected localeId to be defined"),"string"==typeof s&&(nA=s.toLowerCase().replace(/_/g,"-"))}(_.injector.get(kn,gl)||gl),this._moduleDoBootstrap(_),_))})})}bootstrapModule(u,c=[]){const h=bT({},c);return function mT(s,o,u){const c=new Sd(u);return Promise.resolve(c)}(0,0,u).then(f=>this.bootstrapModuleFactory(f,h))}_moduleDoBootstrap(u){const c=u.injector.get(Fd);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!u.instance.ngDoBootstrap)throw new X(403,!1);u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new X(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const u=this._injector.get(ng,null);u&&(u.forEach(c=>c()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(H(rl))},s.\u0275prov=In({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function bT(s,o){return Array.isArray(o)?o.reduce(bT,s):{...s,...o}}let Fd=(()=>{class s{constructor(u,c,h){this._zone=u,this._injector=c,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new B.y(_=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{_.next(this._stable),_.complete()})}),g=new B.y(_=>{let y;this._zone.runOutsideAngular(()=>{y=this._zone.onStable.subscribe(()=>{Vi.assertNotInAngularZone(),$n(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,_.next(!0))})})});const C=this._zone.onUnstable.subscribe(()=>{Vi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{_.next(!1)}))});return()=>{y.unsubscribe(),C.unsubscribe()}});this.isStable=function ue(...s){const o=(0,oe.yG)(s),u=(0,oe._6)(s,1/0),c=s;return c.length?1===c.length?(0,Z.Xf)(c[0]):(0,re.J)(u)((0,_e.D)(c,o)):we.E}(f,g.pipe(function ie(s={}){const{connector:o=(()=>new v.x),resetOnError:u=!0,resetOnComplete:c=!0,resetOnRefCountZero:h=!0}=s;return f=>{let g,_,y,C=0,D=!1,A=!1;const L=()=>{_?.unsubscribe(),_=void 0},G=()=>{L(),g=y=void 0,D=A=!1},ae=()=>{const ye=g;G(),ye?.unsubscribe()};return(0,F.e)((ye,Re)=>{C++,!A&&!D&&L();const He=y=y??o();Re.add(()=>{C--,0===C&&!A&&!D&&(_=Me(ae,h))}),He.subscribe(Re),!g&&C>0&&(g=new U.Hp({next:Ye=>He.next(Ye),error:Ye=>{A=!0,L(),_=Me(G,u,Ye),He.error(Ye)},complete:()=>{D=!0,L(),_=Me(G,c),He.complete()}}),(0,Z.Xf)(ye).subscribe(g))})(f)}}()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,c){const h=u instanceof wf;if(!this._injector.get(Qp).done)throw!h&&wo(u),new X(405,false);let g;g=h?u:this._injector.get(If).resolveComponentFactory(u),this.componentTypes.push(g.componentType);const _=function uv(s){return s.isBoundToModule}(g)?void 0:this._injector.get(ml),C=g.create(rl.NULL,[],c||g.selector,_),D=C.location.nativeElement,A=C.injector.get(Il,null);return A?.registerApplication(D),C.onDestroy(()=>{this.detachView(C.hostView),Ud(this.components,C),A?.unregisterApplication(D)}),this._loadComponent(C),C}tick(){if(this._runningTick)throw new X(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;Ud(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(sv,[]).concat(this._bootstrapListeners).forEach(h=>h(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>Ud(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new X(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(u){return new(u||s)(H(Vi),H(Va),H(Lc))},s.\u0275prov=In({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Ud(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}let DT=!0,ST=!1;function Dx(){return ST=!0,DT}function Sx(){if(ST)throw new Error("Cannot enable prod mode after platform setup.");DT=!1}let Rx=(()=>{class s{}return s.__NG_ELEMENT_ID__=Mx,s})();function Mx(s){return function ea(s,o,u){if(br(s)&&!u){const c=Sr(s.index,o);return new rd(c,c)}return 47&s.type?new rd(o[16],o):null}(Rn(),me(),16==(16&s))}class _v{constructor(){}supports(o){return id(o)}create(o){return new NT(o)}}const ug=(s,o)=>o;class NT{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||ug}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,h=0,f=null;for(;u||c;){const g=!c||u&&u.currentIndex<xt(c,h,f)?u:c,_=xt(g,h,f),y=g.currentIndex;if(g===c)h--,c=c._nextRemoved;else if(u=u._next,null==g.previousIndex)h++;else{f||(f=[]);const C=_-h,D=y-h;if(C!=D){for(let L=0;L<C;L++){const G=L<f.length?f[L]:f[L]=0,ae=G+L;D<=ae&&ae<C&&(f[L]=G+1)}f[g.previousIndex]=D-C}}_!==y&&o(g,_,y)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!id(o))throw new X(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,f,g,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let _=0;_<this.length;_++)f=o[_],g=this._trackByFn(_,f),null!==u&&Object.is(u.trackById,g)?(c&&(u=this._verifyReinsertion(u,f,g,_)),Object.is(u.item,f)||this._addIdentityChange(u,f)):(u=this._mismatch(u,f,g,_),c=!0),u=u._next}else h=0,function sd(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[io()]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,_=>{g=this._trackByFn(h,_),null!==u&&Object.is(u.trackById,g)?(c&&(u=this._verifyReinsertion(u,_,g,h)),Object.is(u.item,_)||this._addIdentityChange(u,_)):(u=this._mismatch(u,_,g,h),c=!0),u=u._next,h++}),this.length=h;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,h){let f;return null===o?f=this._itTail:(f=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,f,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,f,h)):o=this._addAfter(new kT(u,c),f,h),o}_verifyReinsertion(o,u,c,h){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?o=this._reinsertAfter(f,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,f=o._nextRemoved;return null===h?this._removalsHead=f:h._nextRemoved=f,null===f?this._removalsTail=h:f._prevRemoved=h,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const h=null===u?this._itHead:u._next;return o._next=h,o._prev=u,null===h?this._itTail=o:h._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new jt),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new jt),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class kT{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class qt{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class jt{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new qt,this.map.set(u,c)),c.add(o)}get(o,u){const h=this.map.get(o);return h?h.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function xt(s,o,u){const c=s.previousIndex;if(null===c)return c;let h=0;return u&&c<u.length&&(h=u[c]),c+o+h}class ho{constructor(){}supports(o){return o instanceof Map||od(o)}create(){return new tn}}class tn{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||od(o)))throw new X(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,h)=>{if(u&&u.key===h)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const f=this._getOrCreateRecordForKey(h,c);u=this._insertBeforeOrAppend(u,f)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,u);const f=h._prev,g=h._next;return f&&(f._next=g),g&&(g._prev=f),h._next=null,h._prev=null,h}const c=new yv(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class yv{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function PT(){return new ou([new _v])}let ou=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const h=c.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||PT()),deps:[[s,new xr,new Ri]]}}find(u){const c=this.factories.find(h=>h.supports(u));if(null!=c)return c;throw new X(901,!1)}}return s.\u0275prov=In({token:s,providedIn:"root",factory:PT}),s})();function cn(){return new At([new ho])}let At=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const h=c.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||cn()),deps:[[s,new xr,new Ri]]}}find(u){const c=this.factories.find(h=>h.supports(u));if(c)return c;throw new X(901,!1)}}return s.\u0275prov=In({token:s,providedIn:"root",factory:cn}),s})();const Bx=wT(null,"core",[]);let $x=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(H(Fd))},s.\u0275mod=zt({type:s}),s.\u0275inj=Ir({}),s})();function jx(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(Je,ve,M)=>{M.d(ve,{Z:()=>$e});var v=M(2090),K=M(4859),B=M(9681),re=M(1877);class Z{constructor(ke,Ee){this._delegate=ke,this.firebase=Ee,(0,B._addComponent)(ke,new K.wA("app-compat",()=>this,"PUBLIC")),this.container=ke.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ke){this._delegate.automaticDataCollectionEnabled=ke}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ke=>{this._delegate.checkDestroyed(),ke()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,B.deleteApp)(this._delegate)))}_getService(ke,Ee=B._DEFAULT_ENTRY_NAME){var ze;this._delegate.checkDestroyed();const Ie=this._delegate.container.getProvider(ke);return!Ie.isInitialized()&&"EXPLICIT"===(null===(ze=Ie.getComponent())||void 0===ze?void 0:ze.instantiationMode)&&Ie.initialize(),Ie.getImmediate({identifier:Ee})}_removeServiceInstance(ke,Ee=B._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ke).clearInstance(Ee)}_addComponent(ke){(0,B._addComponent)(this._delegate,ke)}_addOrOverwriteComponent(ke){(0,B._addOrOverwriteComponent)(this._delegate,ke)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const oe=new v.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),U=function ue(){const Ne=function _e(Ne){const ke={},Ee={__esModule:!0,initializeApp:function Ae(de,q={}){const pe=B.initializeApp(de,q);if((0,v.r3)(ke,pe.name))return ke[pe.name];const j=new Ne(pe,Ee);return ke[pe.name]=j,j},app:Ie,registerVersion:B.registerVersion,setLogLevel:B.setLogLevel,onLog:B.onLog,apps:null,SDK_VERSION:B.SDK_VERSION,INTERNAL:{registerComponent:function X(de){const q=de.name,pe=q.replace("-compat","");if(B._registerComponent(de)&&"PUBLIC"===de.type){const j=(W=Ie())=>{if("function"!=typeof W[pe])throw oe.create("invalid-app-argument",{appName:q});return W[pe]()};void 0!==de.serviceProps&&(0,v.ZB)(j,de.serviceProps),Ee[pe]=j,Ne.prototype[pe]=function(...W){return this._getService.bind(this,q).apply(this,de.multipleInstances?W:[])}}return"PUBLIC"===de.type?Ee[pe]:null},removeApp:function ze(de){delete ke[de]},useAsService:function Oe(de,q){return"serverAuth"===q?null:q},modularAPIs:B}};function Ie(de){if(!(0,v.r3)(ke,de=de||B._DEFAULT_ENTRY_NAME))throw oe.create("no-app",{appName:de});return ke[de]}return Ee.default=Ee,Object.defineProperty(Ee,"apps",{get:function Ce(){return Object.keys(ke).map(de=>ke[de])}}),Ie.App=Ne,Ee}(Z);return Ne.INTERNAL=Object.assign(Object.assign({},Ne.INTERNAL),{createFirebaseNamespace:ue,extendNamespace:function ke(Ee){(0,v.ZB)(Ne,Ee)},createSubscribe:v.ne,ErrorFactory:v.LL,deepExtend:v.ZB}),Ne}(),F=new re.Yd("@firebase/app-compat");if((0,v.jU)()&&void 0!==self.firebase){F.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ne=self.firebase.SDK_VERSION;Ne&&Ne.indexOf("LITE")>=0&&F.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const $e=U;!function le(Ne){(0,B.registerVersion)("@firebase/app-compat","0.1.39",Ne)}()},9681:(Je,ve,M)=>{M.r(ve),M.d(ve,{FirebaseError:()=>re.ZR,SDK_VERSION:()=>In,_DEFAULT_ENTRY_NAME:()=>Qt,_addComponent:()=>$t,_addOrOverwriteComponent:()=>sr,_apps:()=>nn,_clearComponents:()=>Ot,_components:()=>dn,_getProvider:()=>vn,_registerComponent:()=>or,_removeServiceInstance:()=>wn,deleteApp:()=>yo,getApp:()=>Ir,getApps:()=>Ci,initializeApp:()=>_o,onLog:()=>vo,registerVersion:()=>Ur,setLogLevel:()=>_s});var v=M(5861),K=M(4859),B=M(1877),re=M(2090),Z=M(8766);class we{constructor(ee){this.container=ee}getPlatformInfoString(){return this.container.getProviders().map(Ge=>{if(function oe(je){return"VERSION"===je.getComponent()?.type}(Ge)){const pt=Ge.getImmediate();return`${pt.library}/${pt.version}`}return null}).filter(Ge=>Ge).join(" ")}}const _e="@firebase/app",U=new B.Yd("@firebase/app"),Qt="[DEFAULT]",vt={[_e]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},nn=new Map,dn=new Map;function $t(je,ee){try{je.container.addComponent(ee)}catch(Ge){U.debug(`Component ${ee.name} failed to register with FirebaseApp ${je.name}`,Ge)}}function sr(je,ee){je.container.addOrOverwriteComponent(ee)}function or(je){const ee=je.name;if(dn.has(ee))return U.debug(`There were multiple attempts to register component ${ee}.`),!1;dn.set(ee,je);for(const Ge of nn.values())$t(Ge,je);return!0}function vn(je,ee){const Ge=je.container.getProvider("heartbeat").getImmediate({optional:!0});return Ge&&Ge.triggerHeartbeat(),je.container.getProvider(ee)}function wn(je,ee,Ge=Qt){vn(je,ee).clearInstance(Ge)}function Ot(){dn.clear()}const si=new re.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class pa{constructor(ee,Ge,pt){this._isDeleted=!1,this._options=Object.assign({},ee),this._config=Object.assign({},Ge),this._name=Ge.name,this._automaticDataCollectionEnabled=Ge.automaticDataCollectionEnabled,this._container=pt,this.container.addComponent(new K.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ee){this.checkDestroyed(),this._automaticDataCollectionEnabled=ee}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ee){this._isDeleted=ee}checkDestroyed(){if(this.isDeleted)throw si.create("app-deleted",{appName:this._name})}}const In="9.14.0";function _o(je,ee={}){let Ge=je;"object"!=typeof ee&&(ee={name:ee});const pt=Object.assign({name:Qt,automaticDataCollectionEnabled:!1},ee),mt=pt.name;if("string"!=typeof mt||!mt)throw si.create("bad-app-name",{appName:String(mt)});if(Ge||(Ge=(0,re.aH)()),!Ge)throw si.create("no-options");const Bt=nn.get(mt);if(Bt){if((0,re.vZ)(Ge,Bt.options)&&(0,re.vZ)(pt,Bt.config))return Bt;throw si.create("duplicate-app",{appName:mt})}const P=new K.H0(mt);for(const $ of dn.values())P.addComponent($);const N=new pa(Ge,pt,P);return nn.set(mt,N),N}function Ir(je=Qt){const ee=nn.get(je);if(!ee&&je===Qt)return _o();if(!ee)throw si.create("no-app",{appName:je});return ee}function Ci(){return Array.from(nn.values())}function yo(je){return un.apply(this,arguments)}function un(){return(un=(0,v.Z)(function*(je){const ee=je.name;nn.has(ee)&&(nn.delete(ee),yield Promise.all(je.container.getProviders().map(Ge=>Ge.delete())),je.isDeleted=!0)})).apply(this,arguments)}function Ur(je,ee,Ge){var pt;let mt=null!==(pt=vt[je])&&void 0!==pt?pt:je;Ge&&(mt+=`-${Ge}`);const Bt=mt.match(/\s|\//),P=ee.match(/\s|\//);if(Bt||P){const N=[`Unable to register library "${mt}" with version "${ee}":`];return Bt&&N.push(`library name "${mt}" contains illegal characters (whitespace or "/")`),Bt&&P&&N.push("and"),P&&N.push(`version name "${ee}" contains illegal characters (whitespace or "/")`),void U.warn(N.join(" "))}or(new K.wA(`${mt}-version`,()=>({library:mt,version:ee}),"VERSION"))}function vo(je,ee){if(null!==je&&"function"!=typeof je)throw si.create("invalid-log-argument");(0,B.Am)(je,ee)}function _s(je){(0,B.Ub)(je)}const Zn="firebase-heartbeat-store";let Hi=null;function Be(){return Hi||(Hi=(0,Z.X3)("firebase-heartbeat-database",1,{upgrade:(je,ee)=>{0===ee&&je.createObjectStore(Zn)}}).catch(je=>{throw si.create("idb-open",{originalErrorMessage:je.message})})),Hi}function lt(){return(lt=(0,v.Z)(function*(je){var ee;try{return(yield Be()).transaction(Zn).objectStore(Zn).get(Fn(je))}catch(Ge){if(Ge instanceof re.ZR)U.warn(Ge.message);else{const pt=si.create("idb-get",{originalErrorMessage:null===(ee=Ge)||void 0===ee?void 0:ee.message});U.warn(pt.message)}}})).apply(this,arguments)}function gn(je,ee){return bi.apply(this,arguments)}function bi(){return(bi=(0,v.Z)(function*(je,ee){var Ge;try{const mt=(yield Be()).transaction(Zn,"readwrite");return yield mt.objectStore(Zn).put(ee,Fn(je)),mt.done}catch(pt){if(pt instanceof re.ZR)U.warn(pt.message);else{const mt=si.create("idb-set",{originalErrorMessage:null===(Ge=pt)||void 0===Ge?void 0:Ge.message});U.warn(mt.message)}}})).apply(this,arguments)}function Fn(je){return`${je.name}!${je.options.appId}`}class Yl{constructor(ee){this.container=ee,this._heartbeatsCache=null;const Ge=this.container.getProvider("app").getImmediate();this._storage=new at(Ge),this._heartbeatsCachePromise=this._storage.read().then(pt=>(this._heartbeatsCache=pt,pt))}triggerHeartbeat(){var ee=this;return(0,v.Z)(function*(){const pt=ee.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),mt=rn();if(null===ee._heartbeatsCache&&(ee._heartbeatsCache=yield ee._heartbeatsCachePromise),ee._heartbeatsCache.lastSentHeartbeatDate!==mt&&!ee._heartbeatsCache.heartbeats.some(Bt=>Bt.date===mt))return ee._heartbeatsCache.heartbeats.push({date:mt,agent:pt}),ee._heartbeatsCache.heartbeats=ee._heartbeatsCache.heartbeats.filter(Bt=>{const P=new Date(Bt.date).valueOf();return Date.now()-P<=2592e6}),ee._storage.overwrite(ee._heartbeatsCache)})()}getHeartbeatsHeader(){var ee=this;return(0,v.Z)(function*(){if(null===ee._heartbeatsCache&&(yield ee._heartbeatsCachePromise),null===ee._heartbeatsCache||0===ee._heartbeatsCache.heartbeats.length)return"";const Ge=rn(),{heartbeatsToSend:pt,unsentEntries:mt}=function ur(je,ee=1024){const Ge=[];let pt=je.slice();for(const mt of je){const Bt=Ge.find(P=>P.agent===mt.agent);if(Bt){if(Bt.dates.push(mt.date),Ls(Ge)>ee){Bt.dates.pop();break}}else if(Ge.push({agent:mt.agent,dates:[mt.date]}),Ls(Ge)>ee){Ge.pop();break}pt=pt.slice(1)}return{heartbeatsToSend:Ge,unsentEntries:pt}}(ee._heartbeatsCache.heartbeats),Bt=(0,re.L)(JSON.stringify({version:2,heartbeats:pt}));return ee._heartbeatsCache.lastSentHeartbeatDate=Ge,mt.length>0?(ee._heartbeatsCache.heartbeats=mt,yield ee._storage.overwrite(ee._heartbeatsCache)):(ee._heartbeatsCache.heartbeats=[],ee._storage.overwrite(ee._heartbeatsCache)),Bt})()}}function rn(){return(new Date).toISOString().substring(0,10)}class at{constructor(ee){this.app=ee,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,v.Z)(function*(){return!!(0,re.hl)()&&(0,re.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ee=this;return(0,v.Z)(function*(){return(yield ee._canUseIndexedDBPromise)&&(yield function et(je){return lt.apply(this,arguments)}(ee.app))||{heartbeats:[]}})()}overwrite(ee){var Ge=this;return(0,v.Z)(function*(){var pt;if(yield Ge._canUseIndexedDBPromise){const Bt=yield Ge.read();return gn(Ge.app,{lastSentHeartbeatDate:null!==(pt=ee.lastSentHeartbeatDate)&&void 0!==pt?pt:Bt.lastSentHeartbeatDate,heartbeats:ee.heartbeats})}})()}add(ee){var Ge=this;return(0,v.Z)(function*(){var pt;if(yield Ge._canUseIndexedDBPromise){const Bt=yield Ge.read();return gn(Ge.app,{lastSentHeartbeatDate:null!==(pt=ee.lastSentHeartbeatDate)&&void 0!==pt?pt:Bt.lastSentHeartbeatDate,heartbeats:[...Bt.heartbeats,...ee.heartbeats]})}})()}}function Ls(je){return(0,re.L)(JSON.stringify({version:2,heartbeats:je})).length}!function Gi(je){or(new K.wA("platform-logger",ee=>new we(ee),"PRIVATE")),or(new K.wA("heartbeat",ee=>new Yl(ee),"PRIVATE")),Ur(_e,"0.8.4",je),Ur(_e,"0.8.4","esm2017"),Ur("fire-js","")}("")},4859:(Je,ve,M)=>{M.d(ve,{H0:()=>_e,wA:()=>B});var v=M(5861),K=M(2090);class B{constructor(U,F,ie){this.name=U,this.instanceFactory=F,this.type=ie,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(U){return this.instantiationMode=U,this}setMultipleInstances(U){return this.multipleInstances=U,this}setServiceProps(U){return this.serviceProps=U,this}setInstanceCreatedCallback(U){return this.onInstanceCreated=U,this}}const re="[DEFAULT]";class Z{constructor(U,F){this.name=U,this.container=F,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(U){const F=this.normalizeInstanceIdentifier(U);if(!this.instancesDeferred.has(F)){const ie=new K.BH;if(this.instancesDeferred.set(F,ie),this.isInitialized(F)||this.shouldAutoInitialize())try{const Me=this.getOrInitializeService({instanceIdentifier:F});Me&&ie.resolve(Me)}catch{}}return this.instancesDeferred.get(F).promise}getImmediate(U){var F;const ie=this.normalizeInstanceIdentifier(U?.identifier),Me=null!==(F=U?.optional)&&void 0!==F&&F;if(!this.isInitialized(ie)&&!this.shouldAutoInitialize()){if(Me)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ie})}catch(le){if(Me)return null;throw le}}getComponent(){return this.component}setComponent(U){if(U.name!==this.name)throw Error(`Mismatching Component ${U.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=U,this.shouldAutoInitialize()){if(function oe(ue){return"EAGER"===ue.instantiationMode}(U))try{this.getOrInitializeService({instanceIdentifier:re})}catch{}for(const[F,ie]of this.instancesDeferred.entries()){const Me=this.normalizeInstanceIdentifier(F);try{const le=this.getOrInitializeService({instanceIdentifier:Me});ie.resolve(le)}catch{}}}}clearInstance(U=re){this.instancesDeferred.delete(U),this.instancesOptions.delete(U),this.instances.delete(U)}delete(){var U=this;return(0,v.Z)(function*(){const F=Array.from(U.instances.values());yield Promise.all([...F.filter(ie=>"INTERNAL"in ie).map(ie=>ie.INTERNAL.delete()),...F.filter(ie=>"_delete"in ie).map(ie=>ie._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(U=re){return this.instances.has(U)}getOptions(U=re){return this.instancesOptions.get(U)||{}}initialize(U={}){const{options:F={}}=U,ie=this.normalizeInstanceIdentifier(U.instanceIdentifier);if(this.isInitialized(ie))throw Error(`${this.name}(${ie}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Me=this.getOrInitializeService({instanceIdentifier:ie,options:F});for(const[le,$e]of this.instancesDeferred.entries())ie===this.normalizeInstanceIdentifier(le)&&$e.resolve(Me);return Me}onInit(U,F){var ie;const Me=this.normalizeInstanceIdentifier(F),le=null!==(ie=this.onInitCallbacks.get(Me))&&void 0!==ie?ie:new Set;le.add(U),this.onInitCallbacks.set(Me,le);const $e=this.instances.get(Me);return $e&&U($e,Me),()=>{le.delete(U)}}invokeOnInitCallbacks(U,F){const ie=this.onInitCallbacks.get(F);if(ie)for(const Me of ie)try{Me(U,F)}catch{}}getOrInitializeService({instanceIdentifier:U,options:F={}}){let ie=this.instances.get(U);if(!ie&&this.component&&(ie=this.component.instanceFactory(this.container,{instanceIdentifier:(ue=U,ue===re?void 0:ue),options:F}),this.instances.set(U,ie),this.instancesOptions.set(U,F),this.invokeOnInitCallbacks(ie,U),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,U,ie)}catch{}var ue;return ie||null}normalizeInstanceIdentifier(U=re){return this.component?this.component.multipleInstances?U:re:U}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class _e{constructor(U){this.name=U,this.providers=new Map}addComponent(U){const F=this.getProvider(U.name);if(F.isComponentSet())throw new Error(`Component ${U.name} has already been registered with ${this.name}`);F.setComponent(U)}addOrOverwriteComponent(U){this.getProvider(U.name).isComponentSet()&&this.providers.delete(U.name),this.addComponent(U)}getProvider(U){if(this.providers.has(U))return this.providers.get(U);const F=new Z(U,this);return this.providers.set(U,F),F}getProviders(){return Array.from(this.providers.values())}}},1877:(Je,ve,M)=>{M.d(ve,{Am:()=>ue,Ub:()=>_e,Yd:()=>oe,in:()=>K});const v=[];var K=(()=>{return(U=K||(K={}))[U.DEBUG=0]="DEBUG",U[U.VERBOSE=1]="VERBOSE",U[U.INFO=2]="INFO",U[U.WARN=3]="WARN",U[U.ERROR=4]="ERROR",U[U.SILENT=5]="SILENT",K;var U})();const B={debug:K.DEBUG,verbose:K.VERBOSE,info:K.INFO,warn:K.WARN,error:K.ERROR,silent:K.SILENT},re=K.INFO,Z={[K.DEBUG]:"log",[K.VERBOSE]:"log",[K.INFO]:"info",[K.WARN]:"warn",[K.ERROR]:"error"},we=(U,F,...ie)=>{if(F<U.logLevel)return;const Me=(new Date).toISOString(),le=Z[F];if(!le)throw new Error(`Attempted to log a message with an invalid logType (value: ${F})`);console[le](`[${Me}]  ${U.name}:`,...ie)};class oe{constructor(F){this.name=F,this._logLevel=re,this._logHandler=we,this._userLogHandler=null,v.push(this)}get logLevel(){return this._logLevel}set logLevel(F){if(!(F in K))throw new TypeError(`Invalid value "${F}" assigned to \`logLevel\``);this._logLevel=F}setLogLevel(F){this._logLevel="string"==typeof F?B[F]:F}get logHandler(){return this._logHandler}set logHandler(F){if("function"!=typeof F)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=F}get userLogHandler(){return this._userLogHandler}set userLogHandler(F){this._userLogHandler=F}debug(...F){this._userLogHandler&&this._userLogHandler(this,K.DEBUG,...F),this._logHandler(this,K.DEBUG,...F)}log(...F){this._userLogHandler&&this._userLogHandler(this,K.VERBOSE,...F),this._logHandler(this,K.VERBOSE,...F)}info(...F){this._userLogHandler&&this._userLogHandler(this,K.INFO,...F),this._logHandler(this,K.INFO,...F)}warn(...F){this._userLogHandler&&this._userLogHandler(this,K.WARN,...F),this._logHandler(this,K.WARN,...F)}error(...F){this._userLogHandler&&this._userLogHandler(this,K.ERROR,...F),this._logHandler(this,K.ERROR,...F)}}function _e(U){v.forEach(F=>{F.setLogLevel(U)})}function ue(U,F){for(const ie of v){let Me=null;F&&F.level&&(Me=B[F.level]),ie.userLogHandler=null===U?null:(le,$e,...Ne)=>{const ke=Ne.map(Ee=>{if(null==Ee)return null;if("string"==typeof Ee)return Ee;if("number"==typeof Ee||"boolean"==typeof Ee)return Ee.toString();if(Ee instanceof Error)return Ee.message;try{return JSON.stringify(Ee)}catch{return null}}).filter(Ee=>Ee).join(" ");$e>=(Me??le.logLevel)&&U({level:K[$e].toLowerCase(),message:ke,args:Ne,type:le.name})}}}},8766:(Je,ve,M)=>{M.d(ve,{Lj:()=>Ae,X3:()=>Ie});var v=M(5861);let B,re;const oe=new WeakMap,_e=new WeakMap,ue=new WeakMap,U=new WeakMap,F=new WeakMap;let le={get(q,pe,j){if(q instanceof IDBTransaction){if("done"===pe)return _e.get(q);if("objectStoreNames"===pe)return q.objectStoreNames||ue.get(q);if("store"===pe)return j.objectStoreNames[1]?void 0:j.objectStore(j.objectStoreNames[0])}return Ee(q[pe])},set:(q,pe,j)=>(q[pe]=j,!0),has:(q,pe)=>q instanceof IDBTransaction&&("done"===pe||"store"===pe)||pe in q};function ke(q){return"function"==typeof q?function Ne(q){return q!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function we(){return re||(re=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(q)?function(...pe){return q.apply(ze(this),pe),Ee(oe.get(this))}:function(...pe){return Ee(q.apply(ze(this),pe))}:function(pe,...j){const W=q.call(ze(this),pe,...j);return ue.set(W,pe.sort?pe.sort():[pe]),Ee(W)}}(q):(q instanceof IDBTransaction&&function Me(q){if(_e.has(q))return;const pe=new Promise((j,W)=>{const J=()=>{q.removeEventListener("complete",z),q.removeEventListener("error",De),q.removeEventListener("abort",De)},z=()=>{j(),J()},De=()=>{W(q.error||new DOMException("AbortError","AbortError")),J()};q.addEventListener("complete",z),q.addEventListener("error",De),q.addEventListener("abort",De)});_e.set(q,pe)}(q),((q,pe)=>pe.some(j=>q instanceof j))(q,function Z(){return B||(B=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(q,le):q)}function Ee(q){if(q instanceof IDBRequest)return function ie(q){const pe=new Promise((j,W)=>{const J=()=>{q.removeEventListener("success",z),q.removeEventListener("error",De)},z=()=>{j(Ee(q.result)),J()},De=()=>{W(q.error),J()};q.addEventListener("success",z),q.addEventListener("error",De)});return pe.then(j=>{j instanceof IDBCursor&&oe.set(j,q)}).catch(()=>{}),F.set(pe,q),pe}(q);if(U.has(q))return U.get(q);const pe=ke(q);return pe!==q&&(U.set(q,pe),F.set(pe,q)),pe}const ze=q=>F.get(q);function Ie(q,pe,{blocked:j,upgrade:W,blocking:J,terminated:z}={}){const De=indexedDB.open(q,pe),Se=Ee(De);return W&&De.addEventListener("upgradeneeded",rt=>{W(Ee(De.result),rt.oldVersion,rt.newVersion,Ee(De.transaction))}),j&&De.addEventListener("blocked",()=>j()),Se.then(rt=>{z&&rt.addEventListener("close",()=>z()),J&&rt.addEventListener("versionchange",()=>J())}).catch(()=>{}),Se}function Ae(q,{blocked:pe}={}){const j=indexedDB.deleteDatabase(q);return pe&&j.addEventListener("blocked",()=>pe()),Ee(j).then(()=>{})}const Ce=["get","getKey","getAll","getAllKeys","count"],X=["put","add","delete","clear"],Oe=new Map;function de(q,pe){if(!(q instanceof IDBDatabase)||pe in q||"string"!=typeof pe)return;if(Oe.get(pe))return Oe.get(pe);const j=pe.replace(/FromIndex$/,""),W=pe!==j,J=X.includes(j);if(!(j in(W?IDBIndex:IDBObjectStore).prototype)||!J&&!Ce.includes(j))return;const z=function(){var De=(0,v.Z)(function*(Se,...rt){const Dt=this.transaction(Se,J?"readwrite":"readonly");let Qt=Dt.store;return W&&(Qt=Qt.index(rt.shift())),(yield Promise.all([Qt[j](...rt),J&&Dt.done]))[0]});return function(rt){return De.apply(this,arguments)}}();return Oe.set(pe,z),z}!function $e(q){le=q(le)}(q=>({...q,get:(pe,j,W)=>de(pe,j)||q.get(pe,j,W),has:(pe,j)=>!!de(pe,j)||q.has(pe,j)}))},5861:(Je,ve,M)=>{function v(B,re,Z,we,oe,_e,ue){try{var U=B[_e](ue),F=U.value}catch(ie){return void Z(ie)}U.done?re(F):Promise.resolve(F).then(we,oe)}function K(B){return function(){var re=this,Z=arguments;return new Promise(function(we,oe){var _e=B.apply(re,Z);function ue(F){v(_e,we,oe,ue,U,"next",F)}function U(F){v(_e,we,oe,ue,U,"throw",F)}ue(void 0)})}}M.d(ve,{Z:()=>K})}},Je=>{Je(Je.s=522)}]);